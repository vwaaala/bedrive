import{r as f,bP as Ze,br as ht,$ as Q,bs as St,j as r,c as D,A as je,bX as dn,n as ue,g as _,bu as fn,f as q,aL as Ye,bV as hn,bU as Pt,m as C,bY as Se,bZ as mn,b_ as ge,b$ as be,c0 as mt,c1 as xt,R as he,h as xn,a3 as Ee,a8 as Re,aY as Tt,aZ as Et,a6 as se,c2 as pn,c3 as gn,c4 as Qe,c5 as le,c6 as Oe,c7 as Ve,c8 as pe,c9 as ve,ca as Rt,d as ke,cb as Ne,i as ze,cc as ce,cd as bn,ce as vn,cf as yn,cg as wn,ch as jn,ci as kn,cj as Cn,u as Nt,aU as In,bN as zt,ck as Dn,aj as Mt,ak as Ft,T as F,cl as Sn,aa as Ce,o as Je,U as et,B as J,D as Me,q as tt,v as nt,cm as Pe,bM as Pn,aA as Tn,bb as En,aT as $t,cn as Rn,a4 as At,a9 as re,co as Nn,E as ie,t as Ot,w as Y,cp as zn,ao as Vt,I as Fe,_ as Mn,cq as Fn,a1 as Lt,a as _t,k as $n,b as $e,ag as An,S as On,z as st,W as Vn,Z as Ln,cr as _n,aS as Hn,cs as Un,ct as Bn,az as at,bc as rt,cu as Kn,s as qn,p as Yn,F as Wn,e as Xn,Y as Ht,bA as Ut,cv as Gn,cw as Zn,b4 as Qn}from"./main-121e419e.js";import{E as Jn,C as es}from"./Edit-3b3e29f8.js";const ot=f.createContext(null);function ts(e=!1){f.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function mr({children:e,leftSidenavStatus:n,onLeftSidenavChange:t,rightSidenavStatus:s,initialRightSidenavStatus:a,onRightSidenavChange:o,name:i,leftSidenavCanBeCompact:l,height:u="h-screen",className:d,gridClassName:c="dashboard-grid",blockBodyOverflow:x=!0,...h}){ts(!x);const m=Ze("(max-width: 1024px)"),w=f.useMemo(()=>i?ht(`${i}.sidenav.compact`):!1,[i])?"compact":"open",[b,g]=Q(n,m?"closed":w,t),y=f.useMemo(()=>{if(m)return"closed";if(a!=null)return a;const v=ht(`${i}.sidenav.right.position`,"open");return v??(a||"closed")},[m,i,a]),[k,I]=Q(s,y,o),R=f.useCallback(v=>{I(v),St(`${i}.sidenav.right.position`,v)},[I,i]),z=m&&(b==="open"||k==="open");return r.jsx(ot.Provider,{value:{leftSidenavStatus:b,setLeftSidenavStatus:g,rightSidenavStatus:k,setRightSidenavStatus:R,leftSidenavCanBeCompact:l,name:i,isMobileMode:m},children:r.jsxs("div",{...h,className:D("relative isolate",c,d,u),children:[e,r.jsx(je,{children:z&&r.jsx(dn,{position:"fixed",onClick:()=>{g("closed"),R("closed")}},"dashboard-underlay")})]})})}function xr({children:e,isScrollable:n=!0}){return f.cloneElement(e,{className:D(e.props.className,n&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function pr({className:e,position:n,children:t,size:s="md",mode:a,overlayPosition:o="fixed",display:i="flex",overflow:l="overflow-hidden",forceClosed:u=!1}){const{isMobileMode:d,leftSidenavStatus:c,setLeftSidenavStatus:x,rightSidenavStatus:h,setRightSidenavStatus:m}=f.useContext(ot),p=n==="left"?c:h,w=d||a==="overlay",b={open:{display:i,width:null},compact:{display:i,width:null},closed:{width:0,transitionEnd:{display:"none"}}},g=ns(p==="compact"?"compact":s);return r.jsx(ue.div,{variants:b,initial:!1,animate:u?"closed":p,transition:{type:"tween",duration:.15},onClick:y=>{const k=y.target;d&&(k.closest("button")||k.closest("a"))&&(x("closed"),m("closed"))},className:D(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",l,g,w&&`${o} bottom-0 top-0 z-20 shadow-2xl`,w&&n==="left"&&"left-0",w&&n==="right"&&"right-0"),children:f.cloneElement(t,{className:D(t.props.className,"w-full h-full",p==="compact"&&"compact-scrollbar"),isCompactMode:p==="compact"})})}function ns(e){switch(e){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}const ss=_(r.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function gr({children:e,className:n,hideToggleButton:t,...s}){const{isMobileMode:a,leftSidenavStatus:o,setLeftSidenavStatus:i,name:l,leftSidenavCanBeCompact:u}=f.useContext(ot),d=u&&!a,c=!t&&(a||u),x=()=>{i(o==="open"?"closed":"open")},h=()=>{const m=o==="compact"?"open":"compact";St(`${l}.sidenav.compact`,m==="compact"),i(m)};return r.jsx(fn,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",toggleButton:c?r.jsx(q,{size:"md",onClick:()=>{d?h():x()},children:r.jsx(ss,{})}):void 0,...s,children:e})}var H=(e=>(e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e))(H||{}),ye=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e))(ye||{});function Bt(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function B(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function as(){var t,s,a;const e=(t=Ye())==null?void 0:t.settings.dates.default_timezone,n=((a=(s=Ye())==null?void 0:s.user)==null?void 0:a.timezone)||e||"auto";return!n||n==="auto"?hn():n}const O=Bt(Pt(as()));var It,Dt;const Le=((Dt=(It=Ye())==null?void 0:It.i18n)==null?void 0:Dt.language)||"en",it=[{key:0,label:C("Today"),getRangeValue:()=>({preset:0,start:O,end:B(O)})},{key:1,label:C("Yesterday"),getRangeValue:()=>({preset:1,start:O.subtract({days:1}),end:B(O).subtract({days:1})})},{key:2,label:C("This week"),getRangeValue:()=>({preset:2,start:Se(O,Le),end:mn(B(O),Le)})},{key:3,label:C("Last week"),getRangeValue:()=>{const e=Se(O,Le).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:C("Last 7 days"),getRangeValue:()=>({preset:4,start:O.subtract({days:7}),end:B(O)})},{key:6,label:C("Last 30 days"),getRangeValue:()=>({preset:6,start:O.subtract({days:30}),end:B(O)})},{key:7,label:C("Last 3 months"),getRangeValue:()=>({preset:7,start:O.subtract({months:3}),end:B(O)})},{key:8,label:C("Last 12 months"),getRangeValue:()=>({preset:8,start:O.subtract({months:12}),end:B(O)})},{key:9,label:C("This month"),getRangeValue:()=>({preset:9,start:ge(O),end:be(B(O))})},{key:10,label:C("This year"),getRangeValue:()=>({preset:10,start:mt(O),end:xt(B(O))})},{key:11,label:C("Last year"),getRangeValue:()=>({preset:11,start:mt(O).subtract({years:1}),end:xt(B(O)).subtract({years:1})})}],Kt=_(r.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),qt=he.forwardRef((e,n)=>{const{children:t,inputProps:s,wrapperProps:a,className:o,autoFocus:i,style:l,onClick:u}=e;return r.jsx("div",{...a,onClick:u,children:r.jsx("div",{...s,role:"group",className:D(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:n,style:l,children:r.jsx(xn,{autoFocus:i,children:t})})})}),lt=he.forwardRef(({inputRef:e,wrapperProps:n,children:t,onBlur:s,...a},o)=>{const i=Ee(a),l=Re(o),{fieldProps:u,inputProps:d}=Tt({...a,focusRef:l,labelElementType:"span"});return i.wrapper=D(i.wrapper,a.disabled&&"pointer-events-none"),r.jsx(Et,{wrapperProps:se(n,{onBlur:c=>{l.current&&!l.current.contains(c.relatedTarget)&&(s==null||s(c))},onClick:()=>{const c=pn(l);c==null||c.focusFirst()}}),fieldClassNames:i,ref:l,...u,children:r.jsx(qt,{inputProps:d,className:D(i.input,"gap-10"),ref:e,children:t})})});function rs(e){return e instanceof gn?"day":"minute"}function We(e,n,t){return n!=null&&e.compare(n)<0||t!=null&&e.compare(t)>0}function Yt(e,n){const t=Qe(),[s,a]=f.useState(!1),o=n.closeDialogOnSelection??!0,i=n.granularity||rs(e),l=n.min?le(n.min,t):void 0,u=n.max?le(n.max,t):void 0;return{timezone:t,granularity:i,min:l,max:u,calendarIsOpen:s,setCalendarIsOpen:a,closeDialogOnSelection:o}}function ct(){const e=Qe();return f.useMemo(()=>Pt(e),[e])}function os(e){var ne,G;const n=ct(),[t,s]=f.useState({start:(!e.value||!e.value.start)&&!((ne=e.defaultValue)!=null&&ne.start),end:(!e.value||!e.value.end)&&!((G=e.defaultValue)!=null&&G.end)}),a=e.onChange,[o,i]=Q(e.value?He(e.value,n):void 0,e.value?void 0:He(e.defaultValue,n),j=>{s({start:!1,end:!1}),a==null||a(j)}),{min:l,max:u,granularity:d,timezone:c,calendarIsOpen:x,setCalendarIsOpen:h,closeDialogOnSelection:m}=Yt(o.start,e),p=f.useCallback(()=>{s({start:!0,end:!0}),i(He(null,n)),a==null||a(null),h(!1)},[n,i,a,h]),[w,b]=f.useState(null),[g,y]=f.useState(!1),[k,I]=f.useState(o),[R,z]=f.useState(()=>pt(o,u)),v=f.useCallback(j=>{let T=j.start,M=j.end;l&&(T=Oe(T,l));const L=u?Ve(u,M):M;T=Ve(T,L);const ae=l?Oe(l,T):T;return M=Oe(M,ae),u&&(M=Ve(M,u)),{start:le(T,c),end:le(M,c)}},[l,u,c]),S=f.useCallback(j=>{const T={...v(j),preset:j.preset};i(T),I(T),z(pt(T,u)),s({start:!1,end:!1})},[i,v,u]),E=f.useCallback(j=>!t.start&&pe(j,k.start)||!t.end&&pe(j,k.end),[k,t]),A=f.useCallback(j=>(g||!t.start&&!t.end)&&j.compare(k.start)>=0&&j.compare(k.end)<=0,[k,t,g]),P=f.useCallback(j=>pe(j,k.start),[k]),N=f.useCallback(j=>pe(j,k.end),[k]),V=f.useCallback((j,T)=>({onPointerEnter:()=>{g&&T&&I(_e({start:w,end:j,timezone:c}))},onClick:()=>{if(!g)y(!0),b(j),I(_e({start:j,end:j,timezone:c}));else{const M=_e({start:w,end:j,timezone:c});M.start=Bt(M.start),M.end=B(M.end),y(!1),b(null),S==null||S(M),m&&(h==null||h(!1))}}}),[w,g,S,h,m,c]);return{selectedValue:o,setSelectedValue:S,calendarIsOpen:x,setCalendarIsOpen:h,dayIsActive:E,dayIsHighlighted:A,dayIsRangeStart:P,dayIsRangeEnd:N,getCellProps:V,calendarDates:R,setIsPlaceholder:s,isPlaceholder:t,clear:p,setCalendarDates:z,min:l,max:u,granularity:d,timezone:c,closeDialogOnSelection:m}}function pt(e,n){let t=ve(ge(e.start)),s=ve(be(e.end));return Rt(t,s)&&(s=be(s.add({months:1}))),n&&s.compare(n)>0&&(s=t,t=ge(t.subtract({months:1}))),[t,s]}function _e(e){const n=le(e.start,e.timezone),t=le(e.end,e.timezone);return n.compare(t)>0?{start:t,end:n}:{start:n,end:t}}function He(e,n){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:n,end:n.add({months:1})}}const Wt=_(r.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function is(e,n,t,s){switch(n){case"era":case"year":case"month":case"day":return e.cycle(n,t,{round:n==="year"})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return e.set({hour:o?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(n,t,{round:n!=="hour",hourCycle:s.hour12?12:24})}return e}function ls(e,n,t,s){switch(n){case"day":case"month":case"year":return e.set({[n]:t})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return t>=12===o?e:e.set({hour:o?a-12:a+12})}case"hour":if(s.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[n]:t})}return e}const gt={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function cs({segment:e,domProps:n,value:t,onChange:s,isPlaceholder:a,state:{timezone:o,calendarIsOpen:i,setCalendarIsOpen:l}}){const u=ke(),d=f.useRef(""),{localeCode:c}=Ne(),x=ze(),h=ce({timeZone:o}),m=f.useMemo(()=>new bn(c,{maximumFractionDigits:0}),[c]),p=v=>{s(ls(t,e.type,v,h.resolvedOptions()))},w=v=>{s(is(t,e.type,v,h.resolvedOptions()))},b=()=>{if(m.isValidPartialNumber(e.text)){const v=e.text.slice(0,-1),S=m.parse(v);if(v.length===0||S===0){const E=vn(o);e.type in E&&p(E[e.type])}else p(S);d.current=v}else e.type==="dayPeriod"&&w(-1)},g=v=>{var S;if(!(v.ctrlKey||v.metaKey||v.shiftKey||v.altKey)){switch(v.key){case"ArrowLeft":v.preventDefault(),v.stopPropagation(),x==null||x.focusPrevious();break;case"ArrowRight":v.preventDefault(),v.stopPropagation(),x==null||x.focusNext();break;case"Enter":(S=v.target.closest("form"))==null||S.requestSubmit(),l(!i);break;case"Tab":break;case"Backspace":case"Delete":{v.preventDefault(),v.stopPropagation(),b();break}case"ArrowUp":v.preventDefault(),d.current="",w(1);break;case"ArrowDown":v.preventDefault(),d.current="",w(-1);break;case"PageUp":v.preventDefault(),d.current="",w(gt[e.type]||1);break;case"PageDown":v.preventDefault(),d.current="",w(-(gt[e.type]||1));break;case"Home":v.preventDefault(),d.current="",p(e.maxValue);break;case"End":v.preventDefault(),d.current="",p(e.minValue);break}R(v.key)}},y=ce({hour:"numeric",hour12:!0}),k=f.useMemo(()=>{const v=new Date;return v.setHours(0),y.formatToParts(v).find(S=>S.type==="dayPeriod").value},[y]),I=f.useMemo(()=>{const v=new Date;return v.setHours(12),y.formatToParts(v).find(S=>S.type==="dayPeriod").value},[y]),R=v=>{const S=d.current+v;switch(e.type){case"dayPeriod":if(k.toLowerCase().startsWith(v))p(0);else if(I.toLowerCase().startsWith(v))p(12);else break;x==null||x.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!m.isValidPartialNumber(S))return;let E=m.parse(S),A=E,P=e.minValue===0;if(e.type==="hour"&&h.resolvedOptions().hour12){switch(h.resolvedOptions().hourCycle){case"h11":E>11&&(A=m.parse(v));break;case"h12":P=!1,E>12&&(A=m.parse(v));break}e.value>=12&&E>1&&(E+=12)}else E>e.maxValue&&(A=m.parse(v));if(Number.isNaN(E))return;const N=A!==0||P;N&&p(A),+`${E}0`>e.maxValue||S.length>=String(e.maxValue).length?(d.current="",N&&(x==null||x.focusNext())):d.current=S;break}}},z=u?{}:{"aria-label":e.type,"aria-valuetext":a?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":a?void 0:e.value,tabIndex:0,onKeyDown:g};return r.jsx("div",{...se(n,{...z,onFocus:v=>{d.current="",v.target.scrollIntoView({block:"nearest"})},onClick:v=>{v.preventDefault(),v.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function us({segment:e,domProps:n}){const t=ze();return r.jsx("div",{...n,onPointerDown:s=>{s.pointerType==="mouse"&&(s.preventDefault(),t!=null&&t.focusNext({from:s.target})||t==null||t.focusPrevious({from:s.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function ds(e,n,t){switch(n){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:wn(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:yn(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(n){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const s=e.hour>=12;return{value:e.hour,minValue:s?12:0,maxValue:s?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function we({segmentProps:e,state:n,value:t,onChange:s,isPlaceholder:a}){const{granularity:o}=n,i=f.useMemo(()=>{const c={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(c.hour="numeric",c.minute="numeric"),c},[o]),l=ce(i),u=f.useMemo(()=>t.toDate(),[t]),d=f.useMemo(()=>l.formatToParts(u).map(c=>{const x=ds(t,c.type,l.resolvedOptions()),h=a&&c.type!=="literal"?x.placeholder:c.value;return{type:c.type,text:c.value===", "?" ":h,...x,minLength:c.type!=="literal"?String(x.maxValue).length:1}}),[u,l,a,t]);return r.jsx("div",{className:"flex items-center",children:d.map((c,x)=>c.type==="literal"?r.jsx(us,{domProps:e,segment:c},x):r.jsx(cs,{isPlaceholder:a,domProps:e,state:n,value:t,onChange:s,segment:c},x))})}const Xt=_(r.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),Gt=_(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function fs({date:e,currentMonth:n,state:{dayIsActive:t,dayIsHighlighted:s,dayIsRangeStart:a,dayIsRangeEnd:o,getCellProps:i,timezone:l,min:u,max:d}}){const{localeCode:c}=Ne(),x=jn(e,c),h=t(e),m=s(e),p=a(e),w=o(e),b=kn(e,l),g=Rt(e,n),y=We(e,u,d);return r.jsxs("div",{role:"button","aria-disabled":y,className:D("w-40 h-40 text-sm relative isolate flex-shrink-0",y&&"text-disabled pointer-events-none",!g&&"invisible pointer-events-none"),...i(e,g),children:[r.jsx("span",{className:D("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!h&&!b&&"hover:bg-hover",h&&"bg-primary text-on-primary font-semibold",b&&!h&&"bg-chip"),children:e.day}),m&&g&&r.jsx("span",{className:D("absolute w-full h-full inset-0 bg-primary/focus",(p||x===0||e.day===1)&&"rounded-l-full",(w||x===6||e.day===n.calendar.getDaysInMonth(n))&&"rounded-r-full")})]})}function hs({startDate:e,state:n,isFirst:t,isLast:s}){const{localeCode:a}=Ne(),o=Cn(e,a),i=Se(e,a);return r.jsxs("div",{className:"w-280 flex-shrink-0",children:[r.jsx(ms,{isFirst:t,isLast:s,state:n,currentMonth:e}),r.jsxs("div",{className:"block",role:"grid",children:[r.jsx(xs,{state:n,startDate:e}),[...new Array(o).keys()].map(l=>r.jsx(ue.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(u=>r.jsx(fs,{date:i.add({weeks:l,days:u}),currentMonth:e,state:n},u))},l))]})]})}function ms({currentMonth:e,isFirst:n,isLast:t,state:{calendarDates:s,setCalendarDates:a,timezone:o,min:i,max:l}}){const u=h=>{const m=s.length;let p;h==="forward"?p=s.map(w=>be(w.add({months:m}))):p=s.map(w=>be(w.subtract({months:m}))),a(p)},d=ce({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),c=We(e.subtract({days:1}),i,l),x=We(ge(e.add({months:1})),i,l);return r.jsxs("div",{className:"flex items-center justify-between gap-10",children:[r.jsx(q,{size:"md",className:D("text-muted",!n&&"invisible"),disabled:!n||c,"aria-hidden":!n,onClick:()=>{u("backward")},children:r.jsx(Xt,{})}),r.jsx("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),r.jsx(q,{size:"md",className:D("text-muted",!t&&"invisible"),disabled:!t||x,"aria-hidden":!t,onClick:()=>{u("forward")},children:r.jsx(Gt,{})})]})}function xs({state:{timezone:e},startDate:n}){const{localeCode:t}=Ne(),s=ce({weekday:"short"}),a=Se(n,t);return r.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const l=a.add({days:o}).toDate(e),u=s.format(l);return r.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:r.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:u})},o)})})}function Zt({state:e,visibleMonths:n=1}){return ke()&&(n=1),r.jsx(f.Fragment,{children:[...new Array(n).keys()].map(s=>{const a=ve(ge(e.calendarDates[s])),o=s===0,i=s===n-1;return r.jsx(hs,{state:e,startDate:a,isFirst:o,isLast:i},s)})})}const Qt=f.memo(({start:e,end:n,options:t,preset:s})=>{const{dates:a}=Nt(),o=Qe(),i=ce(t||In[s||(a==null?void 0:a.format)]);if(!e||!n)return null;let l;try{l=i.formatRange(bt(e,o),bt(n,o))}catch{l=""}return r.jsx(f.Fragment,{children:l})},zt);function bt(e,n){return typeof e=="string"?Dn(e,n).toDate():"toDate"in e?e.toDate(n):e}function ps({onPresetSelected:e,selectedValue:n}){return r.jsx(Mt,{children:it.map(t=>r.jsx(Ft,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===t.key,onSelected:()=>{const s=t.getRangeValue();e(s)},children:r.jsx(F,{...t.label})},t.key))})}function gs(e){return Ze("(max-width: 1024px)",e)}const Jt=he.forwardRef((e,n)=>{const{children:t,size:s="sm",description:a,className:o,invalid:i,autoFocus:l,errorMessage:u,iconRight:d,...c}=e,x=Re(n);Sn({autoFocus:l},x);const h=bs(s),m=Ee(e),p=f.useId();return r.jsxs("div",{className:D(o,"isolate"),children:[r.jsxs("label",{className:"flex select-none items-center",children:[r.jsx("input",{...c,type:"checkbox",role:"switch","aria-invalid":i||void 0,"aria-describedby":a?p:void 0,ref:x,"aria-checked":c.checked,className:D(h,!i&&"checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark",i&&"checked:border-danger checked:bg-danger","relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary","before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform","checked:before:border-white","focus-visible:ring",e.disabled&&"cursor-not-allowed opacity-80")}),t&&r.jsx("span",{className:D(m.size.font,"ml-12",i&&"text-danger",e.disabled&&"text-disabled"),children:t}),d]}),a&&!u&&r.jsx("div",{id:p,className:m.description,children:a}),u&&r.jsx("div",{id:p,className:m.error,children:u})]})});function br(e){const{field:{onChange:n,onBlur:t,value:s=!1,ref:a},fieldState:{invalid:o,error:i}}=Ce({name:e.name}),l={onChange:u=>{u.target.value&&u.target.value!=="on"?n(u.target.checked?u.target.value:!1):n(u)},onBlur:t,checked:!!s,invalid:o,errorMessage:i==null?void 0:i.message,name:e.name};return r.jsx(Jt,{ref:a,...se(e,l)})}function bs(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const vs=[{key:0,label:C("Preceding period"),getRangeValue:e=>{const n=e.start,a=(e.end.toDate().getTime()-n.toDate().getTime())/(1e3*60);return{preset:0,start:n.subtract({minutes:a}),end:n}}},{key:1,label:C("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:C("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function ys({originalRangeValue:e,onPresetSelected:n,selectedValue:t}){return r.jsx(Mt,{children:vs.map(s=>r.jsx(Ft,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===s.key,onSelected:()=>{const a=s.getRangeValue(e);n(a)},children:r.jsx(F,{...s.label})},s.key))})}function ws({state:e,compareState:n,showInlineDatePickerField:t=!1,compareVisibleDefault:s=!1}){const a=gs(),{close:o}=Je(),i=f.useRef(e),l=e.isPlaceholder.start||e.isPlaceholder.end,[u,d]=f.useState(s),c=r.jsxs(et,{dividerTop:!0,startAction:!l&&!a?r.jsx("div",{className:"text-xs",children:r.jsx(Qt,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[r.jsx(J,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(i.current.selectedValue),e.setIsPlaceholder(i.current.isPlaceholder),o()},children:r.jsx(F,{message:"Cancel"})}),r.jsx(J,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const x=e.selectedValue;n&&u&&(x.compareStart=n.selectedValue.start,x.compareEnd=n.selectedValue.end),o(x)},children:r.jsx(F,{message:"Select"})})]});return r.jsxs(Me,{size:"auto",children:[r.jsxs(tt,{className:"flex",padding:"p-0",children:[!a&&r.jsxs("div",{className:"min-w-192 py-14",children:[r.jsx(ps,{selectedValue:e.selectedValue,onPresetSelected:x=>{e.setSelectedValue(x),e.closeDialogOnSelection&&o(x)}}),!!n&&r.jsxs(f.Fragment,{children:[r.jsx(Jt,{className:"mx-20 mb-10 mt-14",checked:u,onChange:x=>d(x.target.checked),children:r.jsx(F,{message:"Compare"})}),u&&r.jsx(ys,{originalRangeValue:e.selectedValue,selectedValue:n.selectedValue,onPresetSelected:x=>{n.setSelectedValue(x)}})]})]}),r.jsx(je,{initial:!1,children:r.jsx(js,{state:e,compareState:n,showInlineDatePickerField:t,compareVisible:u})})]}),!e.closeDialogOnSelection&&c]})}function js({state:e,compareState:n,showInlineDatePickerField:t,compareVisible:s}){return r.jsxs(ue.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[t&&r.jsxs("div",{children:[r.jsx(vt,{state:e}),!!n&&s&&r.jsx(vt,{state:n,label:r.jsx(F,{message:"Compare"})})]}),r.jsx("div",{className:"flex items-start gap-36",children:r.jsx(Zt,{state:e,visibleMonths:2})})]})}function vt({state:e,label:n}){const{selectedValue:t,setSelectedValue:s}=e;return r.jsxs(lt,{className:"mb-20 mt-10",label:n,children:[r.jsx(we,{state:e,value:t.start,onChange:a=>{s({...t,start:a})}}),r.jsx(Wt,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(we,{state:e,value:t.end,onChange:a=>{s({...t,end:a})}})]})}function ks(e){var h,m;const{granularity:n,closeDialogOnSelection:t,...s}=e,a=os(e),o=f.useRef(null),l=ke()&&n!=="day",u=r.jsx(nt,{offset:8,placement:"bottom-start",isOpen:a.calendarIsOpen,onOpenChange:a.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsx(ws,{state:a})}),d={onClick:p=>{p.stopPropagation(),p.preventDefault(),Cs(p)?a.setCalendarIsOpen(!1):a.setCalendarIsOpen(!0)}},c=a.selectedValue,x=a.setSelectedValue;return r.jsxs(f.Fragment,{children:[r.jsxs(lt,{ref:o,wrapperProps:d,endAdornment:l?void 0:r.jsx(Kt,{}),...s,children:[r.jsx(we,{isPlaceholder:(h=a.isPlaceholder)==null?void 0:h.start,state:a,segmentProps:d,value:c.start,onChange:p=>{x({start:p,end:c.end})}}),r.jsx(Wt,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(we,{isPlaceholder:(m=a.isPlaceholder)==null?void 0:m.end,state:a,segmentProps:d,value:c.end,onChange:p=>{x({start:c.start,end:p})}})]}),u]})}function Cs(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function Is(e){const{field:{onChange:n,onBlur:t,value:s,ref:a},fieldState:{invalid:o,error:i}}=Ce({name:e.name}),l={onChange:u=>{n(u?en(u):null)},onBlur:t,value:Ds(s),invalid:o,errorMessage:i==null?void 0:i.message,inputRef:a};return r.jsx(ks,{...se(l,e)})}function Ds(e){const{start:n,end:t,preset:s}=e||{},a={preset:s};try{n&&(a.start=typeof n=="string"?Pe(n):n),t&&(a.end=typeof t=="string"?Pe(t):t)}catch{}return a}function en({start:e,end:n,preset:t}={}){const s={preset:t};return e&&(s.start=e.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function tn(e){var n;return{...e,defaultOperator:ye.between,control:{type:H.DateRangePicker,defaultValue:((n=e.control)==null?void 0:n.defaultValue)||en(it[3].getRangeValue())}}}function Ss(e){return tn({key:"created_at",label:C("Date created"),...e})}function Ps(e){return tn({key:"updated_at",label:C("Last updated"),...e})}const Ue="filters";function Ts(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return n}function Es(e,n){return!e||(e=n?e.filter(t=>t.value!=="").map(t=>Rs(t,n)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Rs(e,n){var s;const t=n.find(a=>a.key===e.key);if((t==null?void 0:t.control.type)==="select"){const a=(t.control.options||[]).find(o=>o.key===e.value);if(a)return{...e,value:a.value,valueKey:a.key}}return(s=t==null?void 0:t.extraFilters)!=null&&s.length&&(e.extraFilters=t.extraFilters),e}function Ns(e,n){const[t]=Pn(),s=Tn(),a=t.get(Ue),o=f.useMemo(()=>{if(!e)return[];const c=Ts(a);return(n||[]).forEach(x=>{if(!c.find(h=>h.key===x)){const h=e.find(m=>m.key===x);c.push({key:x,value:h.control.defaultValue,operator:h.defaultOperator,isInactive:!0})}}),c.sort((x,h)=>e.findIndex(m=>m.key===x.key)-e.findIndex(m=>m.key===h.key)),c},[a,n,e]),i=f.useCallback(c=>{const x=[...o];return c.forEach(h=>{const m=typeof h=="object"?h.key:h,p=x.findIndex(w=>w.key===m);p>-1&&x.splice(p,1)}),x},[o]),l=f.useCallback(c=>{const x=Es(c,e);x?t.set(Ue,x):t.delete(Ue),s({search:`?${t}`},{replace:!0})},[e,s,t]),u=f.useCallback(c=>{const h=[...i(c),...c];l(h)},[i,l]),d=f.useCallback(c=>l(i([c])),[i,l]);return{add:u,remove:d,replaceAll:l,decodedFilters:o,encodedFilters:a}}function Te(e){return En()?e.metaKey:e.ctrlKey}function zs(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:a=>{switch(a.key){case"ArrowLeft":W(a,{cell:{op:"decrement"}},e);break;case"ArrowRight":W(a,{cell:{op:"increment"}},e);break;case"ArrowUp":W(a,{row:{op:"decrement"}},e);break;case"ArrowDown":W(a,{row:{op:"increment"}},e);break;case"PageUp":W(a,{row:{op:"decrement",count:5}},e);break;case"PageDown":W(a,{row:{op:"increment",count:5}},e);break;case"Tab":Ms(a);break;case"Home":Te(a)?W(a,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):W(a,{cell:{op:"decrement",count:n}},e);break;case"End":Te(a)?W(a,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):W(a,{cell:{op:"increment",count:n}},e);break}}}}function W(e,n,{cellCount:t,rowCount:s}){var p,w,b,g,y,k,I;if(((p=document.activeElement)==null?void 0:p.tagName)==="input")return;e.preventDefault();const a=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!a)return;const i=o.closest("[aria-rowindex]");if(!i)return;let l=parseInt(i.getAttribute("aria-rowindex")),u=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(l)||Number.isNaN(u))return;const d=((w=n.row)==null?void 0:w.count)??1;((b=n.row)==null?void 0:b.op)==="increment"?l=Math.min(s,l+d):((g=n.row)==null?void 0:g.op)==="decrement"&&(l=Math.max(1,l-d));const c=((y=n.cell)==null?void 0:y.count)??1;((k=n.cell)==null?void 0:k.op)==="increment"?u=Math.min(t,u+c):((I=n.cell)==null?void 0:I.op)==="decrement"&&(u=Math.max(1,u-c));const x=a.querySelector(`[aria-rowindex="${l}"] [aria-colindex="${u}"]`);if(!x)return;const m=$t(x).nextNode()||x;o.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function Ms(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=$t(n,{tabbable:!0});let s,a;do a=t.lastChild(),a&&(s=a);while(a);s&&!s.contains(document.activeElement)&&Rn(s)}}const X=f.createContext(null);function nn({index:e,isHeader:n}){const{columns:t,cellHeight:s="h-46",headerCellHeight:a="h-46"}=f.useContext(X),o=t[e],i=o==null?void 0:o.padding;let l="justify-start";return(o==null?void 0:o.align)==="center"?l="justify-center":(o==null?void 0:o.align)==="end"&&(l="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?a:s,(o==null?void 0:o.width)??"flex-1",o==null?void 0:o.maxWidth,o==null?void 0:o.minWidth,l,i,o==null?void 0:o.className)}function Fs({rowIndex:e,rowIsHovered:n,index:t,item:s,id:a}){const{columns:o}=f.useContext(X),i=o[t],l=f.useMemo(()=>({index:e,isHovered:n,isPlaceholder:s.isPlaceholder}),[e,n,s.isPlaceholder]),u=nn({index:t,isHeader:!1});return r.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:a,className:u,children:r.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:i.body(s,l)})})}function $s({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:s=0,preventDefault:a,stopPropagation:o=!0,onPress:i,onLongPress:l,...u}){const c=f.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:x,removeGlobalListener:h}=At(),m=g=>{!c.el||(e==null?void 0:e(g,c.el))===!1||(c.originalTouchAction=c.el.style.touchAction,c.el.style.touchAction="none",c.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",c.started=!0)},p=g=>{var y;if(g.button===0&&c.id==null){if(c.started=!1,((y=u.onPointerDown)==null?void 0:y.call(u,g))===!1)return;o&&g.stopPropagation(),a&&g.preventDefault(),c.id=g.pointerId,c.el=g.currentTarget,c.lastPosition={x:g.clientX,y:g.clientY},l&&(c.longPressTimer=setTimeout(()=>{l(g,c.el),c.longPressTriggered=!0},400)),(e||n)&&x(window,"pointermove",w,!1),x(window,"pointerup",b,!1),x(window,"pointercancel",b,!1)}},w=g=>{if(g.pointerId===c.id){const y=g.clientX-c.lastPosition.x,k=g.clientY-c.lastPosition.y;(Math.abs(y)>=s||Math.abs(k)>=s)&&!c.started&&m(g),c.started&&(n==null||n(g,y,k),c.lastPosition={x:g.clientX,y:g.clientY})}},b=g=>{var y;if(g.pointerId===c.id){c.longPressTimer&&clearTimeout(c.longPressTimer);const k=c.longPressTriggered;c.longPressTriggered=!1,c.started&&(t==null||t(g)),c.el&&(g.type!=="pointercancel"&&((y=u.onPointerUp)==null||y.call(u,g,c.el),g.target&&c.el.contains(g.target)&&(k?l==null||l(g,c.el):i==null||i(g,c.el))),document.documentElement.style.userSelect=c.originalUserSelect||"",c.el.style.touchAction=c.originalTouchAction||""),c.id=void 0,c.started=!1,h(window,"pointermove",w,!1),h(window,"pointerup",b,!1),h(window,"pointercancel",b,!1)}};return{domProps:{onPointerDown:re(p)}}}function As(e){return e.shiftKey||Te(e)}function Os({index:e,isSelected:n,isHeader:t}){const s=Nn(),a=ke(),{hideBorder:o,enableSelection:i,collapseOnMobile:l,onAction:u}=f.useContext(X);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",u&&"cursor-pointer",a&&l&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&(i||u)&&"focus-visible:bg-focus hover:bg-hover")}const Vs=["button","a","input","select","textarea"];function Ls({item:e,index:n,renderAs:t,className:s,style:a}){const{selectedRows:o,columns:i,toggleRow:l,selectRow:u,onAction:d,selectRowOnContextMenu:c,enableSelection:x,selectionStyle:h,hideHeaderRow:m}=f.useContext(X),p=f.useRef(!1),w=o.includes(e.id),[b,g]=f.useState(!1),y=P=>P.target.closest(Vs.join(",")),k=P=>{h==="highlight"&&d&&!p.current&&!y(P)&&(P.preventDefault(),P.stopPropagation(),d(e,n))},I=!!o.length,R=P=>{y(P)||(h==="checkbox"?x&&(I||!d)?l(e):d&&d(e,n):h==="highlight"&&(p.current?x&&I?l(e):d==null||d(e,n):x&&u(e,As(P))))},{domProps:z}=$s({onPointerDown:P=>{p.current=P.pointerType==="touch"},onPress:R,onLongPress:x?()=>{p.current&&l(e)}:void 0}),v=P=>{x&&P.key===" "?(P.preventDefault(),P.stopPropagation(),h==="checkbox"?l(e):u(e)):P.key==="Enter"&&!o.length&&d&&(P.preventDefault(),P.stopPropagation(),d(e,n))},S=P=>{c&&x&&(o.includes(e.id)||u(e)),p.current&&(P.preventDefault(),P.stopPropagation())},E=Os({index:n,isSelected:w}),A=t||"div";return r.jsx(A,{role:"row","aria-rowindex":n+1+(m?0:1),"aria-selected":w,tabIndex:-1,className:D(s,E),item:A==="div"?void 0:e,onDoubleClick:re(k),onKeyDown:re(v),onContextMenu:re(S),onPointerEnter:re(()=>g(!0)),onPointerLeave:re(()=>g(!1)),style:a,...z,children:i.map((P,N)=>r.jsx(Fs,{rowIndex:n,rowIsHovered:b,index:N,item:e},`${e.id}-${P.key}`))})}const _s={key:"checkbox",header:()=>r.jsx(Us,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?r.jsx(ie,{size:"w-24 h-24",variant:"rect"}):r.jsx(Hs,{item:e})};function Hs({item:e}){const{selectedRows:n,toggleRow:t}=f.useContext(X);return r.jsx(Ot,{checked:n.includes(e.id),onChange:()=>t(e)})}function Us(){const{trans:e}=Y(),{data:n,selectedRows:t,onSelectionChange:s}=f.useContext(X),a=!!n.length&&n.length===t.length,o=!a&&!!t.length;return r.jsx(Ot,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:a,onChange:()=>{s(a?[]:n.map(i=>i.id))}})}const Bs=_(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Ks({index:e}){const{columns:n,sortDescriptor:t,onSortChange:s,enableSorting:a}=f.useContext(X),o=n[e],i=nn({index:e,isHeader:!0}),[l,u]=f.useState(!1),d=o.sortingKey||o.key,c=o.allowsSorting&&a,{orderBy:x,orderDir:h}=t||{},m=c&&x===d;let p;m&&h==="asc"?p="ascending":m&&h==="desc"?p="descending":c&&(p="none");const w=()=>{if(!c)return;let y;m&&h==="desc"?y={orderDir:"asc",orderBy:d}:m&&h==="asc"?y={orderBy:void 0,orderDir:void 0}:y={orderDir:"desc",orderBy:d},s==null||s(y)},b=m||l,g={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return r.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":p,className:D(i,"text-muted font-medium text-xs",c&&"cursor-pointer"),onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},onKeyDown:y=>{(y.key===" "||y.key==="Enter")&&(y.preventDefault(),w())},onClick:w,children:[o.hideHeader?r.jsx("div",{className:"sr-only",children:o.header()}):o.header(),r.jsx(je,{children:c&&r.jsx(ue.span,{variants:g,animate:b?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!b,children:r.jsx(Bs,{size:"xs",className:D("text-muted",h==="asc"&&x===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function qs(){const{columns:e}=f.useContext(X);return r.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>r.jsx(Ks,{index:t},n.key))})}function vr({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:s=!1,hideBorder:a=!1,data:o,selectedRows:i,defaultSelectedRows:l,onSelectionChange:u,sortDescriptor:d,onSortChange:c,enableSorting:x=!0,onDelete:h,enableSelection:m=!0,selectionStyle:p="checkbox",ariaLabelledBy:w,selectRowOnContextMenu:b,onAction:g,renderRowAs:y,tableBody:k,meta:I,tableRef:R,closeOnInteractOutside:z=!1,cellHeight:v,headerCellHeight:S,...E}){const A=ke(),P=!!A&&t;P&&(s=!0,a=!0);const[N,V]=Q(i,l||[],u),[ne,G]=Q(d,void 0,c),j=f.useCallback($=>{const U=[...N];if(!U.includes($.id))U.push($.id);else{const de=U.indexOf($.id);U.splice(de,1)}V(U)},[N,V]),T=f.useCallback(($,U)=>{let de=[];$&&(de=U?[...N==null?void 0:N.filter(me=>me!==$.id),$.id]:[$.id]),V(de)},[N,V]),M=f.useMemo(()=>{const $=n.filter(de=>{const me=de.visibleInMode||"regular";if(me==="all"||me==="compact"&&P||me==="regular"&&!P)return!0});return m&&p!=="highlight"&&!A&&$.unshift(_s),$},[A,n,m,p,P]),L={isCollapsedMode:P,cellHeight:v,headerCellHeight:S,hideBorder:a,hideHeaderRow:s,selectedRows:N,onSelectionChange:V,enableSorting:x,enableSelection:m,selectionStyle:p,data:o,columns:M,sortDescriptor:ne,onSortChange:G,toggleRow:j,selectRow:T,onAction:g,selectRowOnContextMenu:b,meta:I,collapseOnMobile:t},ae=zs({cellCount:m?M.length+1:M.length,rowCount:o.length+1}),dt={renderRowAs:y};k?k=f.cloneElement(k,dt):k=r.jsx(Ys,{...dt});const ft=Re(R);return zn({ref:ft,onInteractOutside:$=>{z&&m&&(N!=null&&N.length)&&!$.target.closest('[role="dialog"]')&&V([])}}),r.jsx(X.Provider,{value:L,children:r.jsxs("div",{...se(E,ae,{onKeyDown:$=>{$.key==="Escape"?($.preventDefault(),$.stopPropagation(),N!=null&&N.length&&V([])):$.key==="Delete"?($.preventDefault(),$.stopPropagation(),N!=null&&N.length&&(h==null||h(o.filter(U=>N==null?void 0:N.includes(U.id))))):Te($)&&$.key==="a"&&($.preventDefault(),$.stopPropagation(),m&&V(o.map(U=>U.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":M.length+1,ref:ft,"aria-multiselectable":m?!0:void 0,"aria-labelledby":w,className:D(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!s&&r.jsx(qs,{}),k]})})}function Ys({renderRowAs:e}){const{data:n}=f.useContext(X);return r.jsx(f.Fragment,{children:n.map((t,s)=>r.jsx(Ls,{item:t,index:s,renderAs:e},t.id))})}function Ws({filter:e}){const{trans:n}=Y();return r.jsx(Vt,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?n(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>r.jsx(Fe,{value:t.key,children:r.jsx(F,{...t.label})},t.key))})}function Xs({filter:e}){return r.jsx(Is,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const Ae=f.forwardRef(({className:e,circle:n,size:t="md",src:s,link:a,label:o,fallback:i="generic",lazy:l=!0,...u},d)=>{let c=s?r.jsx("img",{ref:d,src:s,alt:o,loading:l?"lazy":void 0,className:"block h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:r.jsx(Fn,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});o&&(c=r.jsx(Lt,{label:o,children:c}));const x={...u,className:D(e,"relative block overflow-hidden select-none flex-shrink-0",Gs(t),n?"rounded-full":"rounded")};return a?r.jsx(Mn,{...x,to:a,children:c}):r.jsx("div",{...x,children:c})});function Gs(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}function Zs(e,n,t){return _t({queryKey:[e,n],queryFn:()=>Qs(e,n),placeholderData:$n,...t})}async function Qs(e,n){return $e.get(e,{params:n}).then(t=>t.data)}function sn(e,n,t){return _t({queryKey:[e,n],queryFn:()=>Js(e,n),...t})}async function Js(e,n){return $e.get(e,{params:n}).then(t=>t.data)}function ea({label:e,className:n,background:t,value:s,defaultValue:a="",placeholder:o=C("Select item..."),searchPlaceholder:i=C("Find an item..."),onChange:l,description:u,errorMessage:d,invalid:c,autoFocus:x,queryParams:h,endpoint:m,disabled:p,required:w}){var S;const b=f.useRef(null),[g,y]=f.useState(""),[k,I]=Q(s,a,l),R=Zs(m,{query:g,...h}),{trans:z}=Y(),v=Ee({size:"md"});return k?r.jsxs("div",{className:n,children:[r.jsx("div",{className:v.label,children:e}),r.jsx("div",{className:D("rounded-input border p-8",t,c&&"border-danger"),children:r.jsx(je,{initial:!1,mode:"wait",children:r.jsx(ta,{disabled:p,endpoint:m,modelId:k,queryParams:h,onEditClick:()=>{I(""),y(""),requestAnimationFrame(()=>{var E,A;(E=b.current)==null||E.focus(),(A=b.current)==null||A.click()})}})})}),u&&!d&&r.jsx("div",{className:v.description,children:u}),d&&r.jsx("div",{className:v.error,children:d})]}):r.jsx(On,{className:n,showSearchField:!0,invalid:c,errorMessage:d,description:u,color:"white",isAsync:!0,background:t,placeholder:z(o),searchPlaceholder:z(i),label:e,isLoading:R.isFetching,items:(S=R.data)==null?void 0:S.results,inputValue:g,onInputValueChange:y,selectionMode:"single",selectedValue:k,onSelectionChange:I,ref:b,autoFocus:x,disabled:p,required:w,children:E=>r.jsx(Fe,{value:E.id,description:E.description,startIcon:r.jsx(Ae,{src:E.image}),children:E.name},E.id)})}function ta({modelId:e,onEditClick:n,endpoint:t,disabled:s,queryParams:a}){const{data:o,isLoading:i}=sn(`${t}/${e}`,a);return i||!(o!=null&&o.model)?r.jsx(na,{},"skeleton"):r.jsxs(ue.div,{className:D("flex items-center gap-10",s&&"pointer-events-none cursor-not-allowed text-disabled"),...st,children:[o.model.image&&r.jsx(Ae,{src:o.model.image}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm leading-4",children:o.model.name}),r.jsx("div",{className:"text-xs text-muted",children:o.model.description})]}),r.jsx(Lt,{label:r.jsx(F,{message:"Change item"}),children:r.jsx(q,{className:"ml-auto text-muted",size:"sm",onClick:n,disabled:s,children:r.jsx(Jn,{})})})]},"preview")}function na(){return r.jsxs(ue.div,{className:"flex items-center gap-10",...st,children:[r.jsx(ie,{variant:"rect",size:"w-32 h-32"}),r.jsxs("div",{className:"max-h-[36px] flex-auto",children:[r.jsx(ie,{className:"text-xs"}),r.jsx(ie,{className:"max-h-8 text-xs"})]}),r.jsx(ie,{variant:"icon",size:"w-24 h-24"})]})}function sa({name:e,...n}){const{clearErrors:t}=An(),{field:{onChange:s,value:a=""},fieldState:{invalid:o,error:i}}=Ce({name:e});return r.jsx(ea,{value:a,onChange:l=>{s(l),t(e)},invalid:o,errorMessage:i==null?void 0:i.message,...n})}function aa({filter:e}){return r.jsx(sa,{name:`${e.key}.value`,endpoint:`normalized-models/${e.control.model}`})}const an={"=":C("is"),"!=":C("is not"),">":C("is greater than"),">=":C("is greater than or equal to"),"<":C("is less than"),"<=":C("is less than or equal to"),has:C("Include"),doesntHave:C("Do not include"),between:C("Is between"),hasAll:C("Include all")};function ra({filter:e}){var t;const n=e.control;return r.jsxs(f.Fragment,{children:[r.jsx(Vt,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(t=e.operators)==null?void 0:t.map(s=>r.jsx(Fe,{value:s,children:r.jsx(F,{...an[s]})},s))}),r.jsx(Vn,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0,required:!0})]})}function oa({className:e,children:n,size:t,color:s,radius:a,selectable:o,wrap:i=!0}){return r.jsx("div",{className:D("flex items-center gap-8",i&&"flex-wrap",e),children:f.Children.map(n,l=>{if(f.isValidElement(l))return f.cloneElement(l,{size:t,color:s,selectable:o,radius:a})})})}function Xe(e){return{id:e,name:`${e}`,description:`${e}`}}function ia(e,n){const t=f.useRef(null),s=Re(n),{displayWith:a=L=>L.name,validateWith:o,children:i,suggestions:l,isLoading:u,inputValue:d,onInputValueChange:c,onItemSelected:x,placeholder:h,onOpenChange:m,chipSize:p="sm",openMenuOnFocus:w=!0,showEmptyMessage:b,value:g,defaultValue:y,onChange:k,valueKey:I,isAsync:R,allowCustomValue:z=!0,showDropdownArrow:v,onChipClick:S,...E}=e,A=Ee({...e,flexibleHeight:!0}),[P,N]=ua(e),[V,ne]=f.useState(!1),G=r.jsx(at,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),j=v?r.jsx(rt,{}):null,{fieldProps:T,inputProps:M}=Tt({...E,focusRef:s,endAdornment:u&&V?G:j});return r.jsx(Et,{fieldClassNames:A,...T,children:r.jsxs(qt,{ref:t,className:D("flex flex-wrap items-center",A.input),onClick:()=>{var L;(L=s.current)==null||L.focus()},children:[r.jsx(la,{displayChipUsing:a,onChipClick:S,items:P,setItems:N,chipSize:p}),r.jsx(ca,{size:e.size,showEmptyMessage:b,inputProps:M,inputValue:d,onInputValueChange:c,fieldRef:t,inputRef:s,chips:P,setChips:N,validateWith:o,isLoading:u,suggestions:l,placeholder:h,openMenuOnFocus:w,listboxIsOpen:V,setListboxIsOpen:ne,allowCustomValue:z,children:i})]})})}function la({items:e,setItems:n,displayChipUsing:t,chipSize:s,onChipClick:a}){const o=ze(),i=f.useCallback(l=>{const u=e.findIndex(c=>c.id===l),d=[...e];return u>-1&&(d.splice(u,1),n(d)),d},[e,n]);return r.jsx(oa,{className:D("max-w-full flex-shrink-0 flex-wrap",s==="xs"?"my-6":"my-8"),size:s,selectable:!0,children:e.map(l=>r.jsx(Ln,{errorMessage:l.errorMessage,adornment:l.image?r.jsx(Ae,{circle:!0,src:l.image}):null,onClick:()=>a==null?void 0:a(l),onRemove:()=>{i(l.id).length?o==null||o.focusPrevious({tabbable:!0}):o==null||o.focusLast()},children:t(l)},l.id))})}function ca(e){const{inputRef:n,fieldRef:t,validateWith:s,setChips:a,chips:o,suggestions:i,inputProps:l,placeholder:u,openMenuOnFocus:d,listboxIsOpen:c,setListboxIsOpen:x,allowCustomValue:h,isLoading:m,size:p}=e,w=ze(),b=f.useCallback(j=>{j=(j||[]).filter(T=>{const M=!T||!T.id||!T.name;return!(o.findIndex(ae=>ae.id===(T==null?void 0:T.id))>-1)&&!M}),j.length&&(s&&(j=j.map(T=>s(T))),a([...o,...j]))},[o,a,s]),g=_n({...e,clearInputOnItemSelection:!0,isOpen:c,onOpenChange:x,items:i,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:j=>{N(j)}}),{state:{activeIndex:y,setActiveIndex:k,isOpen:I,setIsOpen:R,inputValue:z,setInputValue:v},refs:S,listboxId:E,collection:A,onInputChange:P}=g,N=j=>{const T=A.size&&y!=null?[...A.values()][y]:null;T!=null&&T.item?b([T.item]):h&&b([Xe(T?T.value:j)]),v(""),k(null),R(!1)};Hn(()=>{t.current&&S.reference.current!==t.current&&g.reference(t.current)},[t,g,S]);const{handleTriggerKeyDown:V,handleListboxKeyboardNavigation:ne}=Kn(g),G=re(()=>{d&&!I&&R(!0)});return r.jsx(Un,{listbox:g,mobileOverlay:Bn,isLoading:m,onPointerDown:j=>{j.preventDefault()},children:r.jsx("input",{type:"text",className:D("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",p==="xs"?"h-20":"h-30"),placeholder:u,...se(l,{ref:n,value:z,onChange:P,onPaste:j=>{const M=j.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(M){j.preventDefault();const L=window.getSelection();L!=null&&L.rangeCount&&(L.deleteFromDocument(),b(M.map(ae=>Xe(ae))))}},"aria-autocomplete":"list","aria-controls":I?E:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:j=>{const T=j.target;if(j.key==="Enter"){j.preventDefault(),N(T.value);return}if(j.key==="Escape"&&I&&(R(!1),v("")),j.key==="ArrowUp"&&I&&(y===0||y==null)){k(null);return}if(y!=null&&(j.key==="ArrowLeft"||j.key==="ArrowRight")){j.preventDefault();return}if((j.key==="ArrowLeft"||j.key==="Backspace"||j.key==="Delete")&&T.selectionStart===0&&y==null&&o.length){w==null||w.focusPrevious({tabbable:!0});return}V(j)||ne(j)},onFocus:G,onClick:G})})})}function ua({onChange:e,value:n,defaultValue:t,valueKey:s}){const a=f.useMemo(()=>yt(n),[n]),o=f.useMemo(()=>yt(t),[t]),i=f.useCallback(l=>{const u=s?l.map(d=>d[s]):l;e==null||e(u)},[e,s]);return Q(a||void 0,o||[],i)}function yt(e){if(e!=null)return e.map(n=>typeof n!="object"?Xe(n):n)}const da=he.forwardRef(ia);function fa({children:e,...n}){const{field:{onChange:t,onBlur:s,value:a=[],ref:o},fieldState:{invalid:i,error:l}}=Ce({name:n.name}),u={onChange:t,onBlur:s,value:a,invalid:i,errorMessage:l==null?void 0:l.message};return r.jsx(da,{ref:o,...se(u,n),children:e})}function ha({filter:e}){const{trans:n}=Y();return r.jsx(fa,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,displayWith:t=>{var s;return(s=e.control.options.find(a=>a.key===t.id))==null?void 0:s.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:t.label.message})),children:t=>r.jsx(Fe,{value:t.id,children:r.jsx(F,{message:t.name})},t.id)})}const rn=f.forwardRef((e,n)=>{const{isInactive:t,filter:s,...a}=e;return t?r.jsx(ma,{filter:s,...a,ref:n}):r.jsx(xa,{filter:s,...a,ref:n})}),ma=f.forwardRef(({filter:e,...n},t)=>r.jsx(J,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:r.jsx(rt,{}),...n,children:r.jsx(F,{...e.label})})),xa=f.forwardRef(({filter:e,children:n,...t},s)=>{const a=e.control.type===H.BooleanToggle;return r.jsxs(J,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!a&&r.jsx(rt,{}),ref:s,...t,children:[r.jsx("span",{className:D(!a&&"border-r border-r-primary-light mr-8 pr-8"),children:r.jsx(F,{...e.label})}),n]})});function Ie(e){const{onValueChange:n,isInactive:t,filter:s,label:a}=e;return r.jsxs(nt,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[r.jsx(rn,{isInactive:t,filter:s,children:a}),r.jsx(pa,{...e})]})}function pa({filter:e,panel:n,value:t,operator:s}){const a=qn({defaultValues:{[e.key]:{value:t,operator:s}}}),{close:o,formId:i}=Je();return r.jsxs(Me,{size:"xs",children:[r.jsx(Yn,{children:r.jsx(F,{...e.label})}),r.jsx(tt,{padding:"px-14 pt-14 pb-4 max-h-288",children:r.jsxs(Wn,{form:a,id:i,onSubmit:l=>{o(l[e.key])},children:[e.description&&r.jsx("div",{className:"text-muted text-xs mb-14",children:r.jsx(F,{...e.description})}),n]})}),r.jsx(et,{children:r.jsx(J,{form:i,type:"submit",variant:"flat",color:"primary",size:"xs",children:r.jsx(F,{message:"Apply"})})})]})}const ga=f.memo(({value:e,...n})=>{const t=Xn(n);return isNaN(e)&&(e=0),r.jsx(f.Fragment,{children:t.format(e)})},zt);function ba(e){switch(e.filter.control.type){case H.DateRangePicker:return r.jsx(va,{...e});case H.BooleanToggle:return r.jsx(ya,{...e});case H.Select:return r.jsx(wa,{...e});case H.ChipField:return r.jsx(ja,{...e});case H.Input:return r.jsx(Ca,{...e});case H.SelectModel:return r.jsx(Ia,{...e});case H.Custom:const n=e.filter.control.listItem;return r.jsx(n,{...e});default:return null}}function va(e){const{value:n,filter:t}=e;let s;return n.preset!==void 0?s=r.jsx(F,{...it[n.preset].label}):s=r.jsx(Qt,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),r.jsx(Ie,{...e,label:s,panel:r.jsx(Xs,{filter:t})})}function ya({filter:e,isInactive:n,onValueChange:t}){return r.jsx(rn,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:n})}function wa(e){const{filter:n,value:t}=e,s=n.control.options.find(a=>a.key===t);return r.jsx(Ie,{...e,label:s?r.jsx(F,{...s.label}):null,panel:r.jsx(Ws,{filter:n})})}function ja(e){return r.jsx(Ie,{...e,label:r.jsx(ka,{...e}),panel:r.jsx(ha,{filter:e.filter})})}function ka(e){const{trans:n}=Y(),{filter:t,value:s}=e,a=s.map(u=>t.control.options.find(d=>d.key===u)),o=3,i=s.length-o,l=r.jsx(f.Fragment,{children:a.filter(Boolean).slice(0,o).map((u,d)=>{let c="";return d!==0&&(c+=", "),c+=n(u.label),c})});return i>0?r.jsx(F,{message:":names + :count more",values:{names:l,count:i}}):l}function Ca(e){const{filter:n,value:t,operator:s}=e,a=s?r.jsx(F,{...an[s]}):null,o=n.control.inputType==="number"?r.jsx(ga,{value:t}):t;return r.jsx(Ie,{...e,label:r.jsxs(f.Fragment,{children:[a," ",o]}),panel:r.jsx(ra,{filter:n})})}function Ia(e){const{value:n,filter:t}=e,{isLoading:s,data:a}=sn(`normalized-models/${t.control.model}/${n}`,void 0,{enabled:!!n}),o=r.jsxs(f.Fragment,{children:[r.jsx(ie,{variant:"avatar",size:"w-18 h-18 mr-6"}),r.jsx(ie,{variant:"rect",size:"w-50"})]}),i=r.jsxs(f.Fragment,{children:[r.jsx(Ae,{size:"xs",src:a==null?void 0:a.model.image,className:"mr-6"}),a==null?void 0:a.model.name]}),l=s||!a?o:i;return r.jsx(Ie,{...e,label:l,panel:r.jsx(aa,{filter:t})})}function yr({filters:e,pinnedFilters:n,className:t}){const{decodedFilters:s,remove:a,replaceAll:o}=Ns(e,n);return s.length?r.jsx("div",{className:D("flex items-center gap-6 overflow-x-auto",t),children:s.map((i,l)=>{const u=e.find(c=>c.key===i.key);if(!u)return null;const d=c=>{const x=[...s];x.splice(l,1,{key:u.key,value:c.value,isInactive:!1,operator:c.operator||u.defaultOperator}),o(x)};return r.jsxs("div",{children:[!i.isInactive&&r.jsx(q,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{a(i.key)},children:r.jsx(Ht,{})}),r.jsx(ba,{filter:u,isInactive:i.isInactive,value:i.valueKey!=null?i.valueKey:i.value,operator:i.operator,onValueChange:d})]},i.key)})}):null}const wr=_(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),wt=_(r.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Ge(e,n){const t=document.createElement("a");t.href=e,n&&(t.download=n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Da(e){const n=ct(),[t,s]=f.useState(!e.value&&!e.defaultValue),a=e.onChange,[o,i]=Q(e.value||n,e.defaultValue||n,I=>{s(!1),a==null||a(I)}),{min:l,max:u,granularity:d,timezone:c,calendarIsOpen:x,setCalendarIsOpen:h,closeDialogOnSelection:m}=Yt(o,e),p=f.useCallback(()=>{s(!0),i(n),a==null||a(null),h(!1)},[n,i,a,h]),[w,b]=f.useState(()=>[ve(o)]),g=f.useCallback(I=>{l&&I.compare(l)<0?I=l:u&&I.compare(u)>0&&(I=u);const R=o?o.set(I):le(I,c);i(R),b([ve(R)]),s(!1)},[i,l,u,o,c]),y=f.useCallback(I=>!t&&pe(o,I),[o,t]),k=f.useCallback(I=>({onClick:()=>{g==null||g(I),m&&(h==null||h(!1))}}),[g,h,m]);return{selectedValue:o,setSelectedValue:i,calendarIsOpen:x,setCalendarIsOpen:h,dayIsActive:y,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:k,calendarDates:w,setCalendarDates:b,isPlaceholder:t,clear:p,setIsPlaceholder:s,min:l,max:u,granularity:d,timezone:c,closeDialogOnSelection:m}}function Sa({showCalendarFooter:e,...n}){const t=Da(n),s=f.useRef(null),a=ct(),o=e&&r.jsx(et,{padding:"px-14 pb-14",startAction:r.jsx(J,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:r.jsx(F,{message:"Clear"})}),children:r.jsx(J,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(a),t.setCalendarIsOpen(!1)},children:r.jsx(F,{message:"Today"})})}),i=r.jsx(nt,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsxs(Me,{size:"auto",children:[r.jsx(tt,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:r.jsx(Zt,{state:t,visibleMonths:1})}),o]})}),l={onClick:u=>{u.stopPropagation(),u.preventDefault(),Pa(u)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return r.jsxs(f.Fragment,{children:[r.jsx(lt,{ref:s,wrapperProps:l,endAdornment:r.jsx(Kt,{className:D(n.disabled&&"text-disabled")}),...n,children:r.jsx(we,{segmentProps:l,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),i]})}function jr(e){const{min:n,max:t}=e,{trans:s}=Y(),{format:a}=ce(),{field:{onChange:o,onBlur:i,value:l=null,ref:u},fieldState:{invalid:d,error:c}}=Ce({name:e.name,rules:{validate:m=>{if(!m)return;const p=Pe(m);if(n&&p.compare(n)<0)return s({message:"Enter a date after :date",values:{date:a(m)}});if(t&&p.compare(t)>0)return s({message:"Enter a date before :date",values:{date:a(m)}})}}}),x=l?Pe(l):null,h={onChange:m=>{o(m&&m.toAbsoluteString())},onBlur:i,value:x,invalid:d,errorMessage:c==null?void 0:c.message,inputRef:u};return r.jsx(Sa,{...se(h,e)})}function Pa(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const kr=_(r.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Z=new Map,De=new Map,Ta=new Map,K={status:"inactive"};function Be({e,rect:n,deltaX:t,deltaY:s}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:s??0,nativeEvent:e}}let on=null;function jt(e){on=e}function Ea(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Ra(e){const n=new IntersectionObserver(t=>{t.forEach(s=>{const{width:a,height:o,left:i,top:l}=s.boundingClientRect,[u,d]=[...e].find(([,x])=>x.ref.current===s.target)||[];if(u==null||d==null)return;const c={width:a,height:o,left:i,top:l};e.set(u,{...d,rect:c})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function Cr({id:e,disabled:n,ref:t,preview:s,hidePreview:a,...o}){const i=f.useRef(null),{addGlobalListener:l,removeAllGlobalListeners:u}=At(),d=f.useRef({lastPosition:{x:0,y:0}}).current,c=f.useRef(o);c.current=o,f.useLayoutEffect(()=>(n?Z.delete(e):Z.set(e,{...Z.get(e),id:e,ref:t,type:c.current.type,getData:c.current.getData}),()=>{Z.delete(e)}),[e,n,c,t]);const x=b=>{Ta.forEach(g=>{var y;g.type===((y=Z.get(e))==null?void 0:y.type)&&b(g)})},h=b=>{var R,z;const g=Z.get(e),y=t.current,k=!i.current||!d.clickedEl||i.current.contains(d.clickedEl);if(on||!y||!g||!k){b.preventDefault(),b.stopPropagation();return}Ra(De),jt("drag"),a&&Na(b),b.dataTransfer.effectAllowed="move",d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=Ea(y.getBoundingClientRect());const I=Be({rect:d.currentRect,e:b});s!=null&&s.current&&s.current(g,v=>{b.dataTransfer.setDragImage(v,0,0)}),K.status="dragging",K.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(z=(R=c.current).onDragStart)==null||z.call(R,I,g),requestAnimationFrame(()=>{x(v=>{var S;return(S=v.onDragStart)==null?void 0:S.call(v,I,g)})}),l(window,"dragover",m,!0)},m=b=>{var z,v;if(b.preventDefault(),!d.currentRect)return;const g=b.clientX-d.lastPosition.x,y=b.clientY-d.lastPosition.y,k={...d.currentRect,left:d.currentRect.left+g,top:d.currentRect.top+y},I=Be({rect:k,e:b,deltaX:g,deltaY:y}),R=Z.get(e);R&&((v=(z=c.current).onDragMove)==null||v.call(z,I,R),x(S=>{var E;return(E=S.onDragMove)==null?void 0:E.call(S,I,R)})),d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=k};return{draggableProps:{draggable:!n,onDragStart:h,onDragEnd:b=>{var k,I;if(u(),!d.currentRect)return;jt(null),oe&&oe.remove();const g=Be({rect:d.currentRect,e:b}),y=Z.get(e);y&&((I=(k=c.current).onDragEnd)==null||I.call(k,g,y),x(R=>{var z;return(z=R.onDragEnd)==null?void 0:z.call(R,g,y,K.status)})),requestAnimationFrame(()=>{K.dragTargetId=void 0,K.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:b=>{d.clickedEl=b.target}},dragHandleRef:i}}let oe;function Na(e){oe||(oe=new Image,document.body.append(oe),oe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(oe,0,0)}async function*za(e){const n=[];for(const t of e.items)if(t.kind==="file"){const s=t.webkitGetAsEntry();s&&n.push(s)}for(const t of n)if(t.isFile){if(t.name===".DS_Store")continue;const s=await cn(t);yield new Ut(s,t.fullPath)}else t.isDirectory&&(yield*ln(t))}async function*ln(e){const n=e.createReader();let t;do{t=await new Promise((s,a)=>{n.readEntries(s,a)});for(const s of t)if(s.isFile){if(s.name===".DS_Store")continue;const a=await cn(s);yield new Ut(a,s.fullPath)}else s.isDirectory&&(yield*ln(s))}while(t.length>0)}function cn(e){return new Promise((n,t)=>e.file(n,t))}async function Ma(e){const n=[];for await(const t of e)n.push(t);return n}const Fa=400;function Ir({id:e,disabled:n,ref:t,...s}){const a=f.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=f.useRef(s);o.current=s,f.useLayoutEffect(()=>(De.set(e,{...De.get(e),disabled:n,id:e,ref:t}),()=>{De.delete(e)}),[e,o,n,t]);const i=h=>{var w;const m=o.current,p=m.allowDragEventsFromItself||t.current!==((w=h.ref)==null?void 0:w.current);return!!(h!=null&&h.type&&p&&m.types.includes(h.type)&&(!m.acceptsDrop||m.acceptsDrop(h)))},l=h=>{var p,w;const m=xe(h);m&&((w=(p=o.current).onDragLeave)==null||w.call(p,m))};return{droppableProps:n?{}:{onDragOver:h=>{var p,w;h.preventDefault(),h.stopPropagation();const m=xe(h);m&&i(m)&&((w=(p=o.current).onDragOver)==null||w.call(p,m,h))},onDragEnter:h=>{var p,w;if(h.stopPropagation(),a.dragOverElements.add(h.target),a.dragOverElements.size>1)return;const m=xe(h);m&&i(m)&&((w=(p=o.current).onDragEnter)==null||w.call(p,m),clearTimeout(a.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(a.dropActivateTimer=setTimeout(()=>{var b,g;m&&((g=(b=o.current).onDropActivate)==null||g.call(b,m))},Fa)))},onDragLeave:h=>{h.stopPropagation(),a.dragOverElements.delete(h.target);for(const p of a.dragOverElements)h.currentTarget.contains(p)||a.dragOverElements.delete(p);if(a.dragOverElements.size>0)return;const m=xe(h);m&&i(m)&&(l(h),clearTimeout(a.dropActivateTimer))},onDrop:async h=>{var p,w,b,g;h.preventDefault(),h.stopPropagation(),a.dragOverElements.clear(),l(h),clearTimeout(a.dropActivateTimer);const m=xe(h);if(m)if((w=(p=o.current).onDragLeave)==null||w.call(p,m),!i(m))K.status!=="inactive"&&(K.status="dropFail");else{const y=(g=(b=o.current).onDrop)==null?void 0:g.call(b,m);K.status!=="inactive"&&(K.status=y===!1?"dropFail":"dropSuccess")}}}}}function xe(e){if(K.dragTargetId!=null)return Z.get(K.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Ma(za(e.dataTransfer))}}const $a="user",Dr=_(r.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),Sr=_(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function fe(e,n,t){let s=t.initialDeps??[],a;return()=>{var o,i,l,u;let d;t.key&&((o=t.debug)!=null&&o.call(t))&&(d=Date.now());const c=e();if(!(c.length!==s.length||c.some((m,p)=>s[p]!==m)))return a;s=c;let h;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(h=Date.now()),a=n(...c),t.key&&((l=t.debug)!=null&&l.call(t))){const m=Math.round((Date.now()-d)*100)/100,p=Math.round((Date.now()-h)*100)/100,w=p/16,b=(g,y)=>{for(g=String(g);g.length<y;)g=" "+g;return g};console.info(`%c⏱ ${b(p,5)} /${b(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*w,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,a),a}}function Ke(e,n){if(e===void 0)throw new Error(`Unexpected undefined${n?`: ${n}`:""}`);return e}const Aa=(e,n)=>Math.abs(e-n)<1,Oa=e=>e,Va=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let a=n;a<=t;a++)s.push(a);return s},La=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=o=>{const{width:i,height:l}=o;n({width:Math.round(i),height:Math.round(l)})};if(s(t.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const a=new ResizeObserver(o=>{const i=o[0];if(i!=null&&i.borderBoxSize){const l=i.borderBoxSize[0];if(l){s({width:l.inlineSize,height:l.blockSize});return}}s(t.getBoundingClientRect())});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},_a=(e,n)=>{const t=e.scrollElement;if(!t)return;const s=()=>{n(t[e.options.horizontal?"scrollLeft":"scrollTop"])};return s(),t.addEventListener("scroll",s,{passive:!0}),()=>{t.removeEventListener("scroll",s)}},Ha=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const s=n.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},Ua=(e,{adjustments:n=0,behavior:t},s)=>{var a,o;const i=e+n;(o=(a=s.scrollElement)==null?void 0:a.scrollTo)==null||o.call(a,{[s.options.horizontal?"left":"top"]:i,behavior:t})};class Ba{constructor(n){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(typeof ResizeObserver<"u"?t=new ResizeObserver(a=>{a.forEach(o=>{this._measureElement(o.target,o)})}):null);return{disconnect:()=>{var a;return(a=s())==null?void 0:a.disconnect()},observe:a=>{var o;return(o=s())==null?void 0:o.observe(a,{box:"border-box"})},unobserve:a=>{var o;return(o=s())==null?void 0:o.unobserve(a)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,a])=>{typeof a>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Oa,rangeExtractor:Va,onChange:()=>{},measureElement:Ha,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...t}},this.notify=t=>{var s,a;(a=(s=this.options).onChange)==null||a.call(s,this,t)},this.maybeNotify=fe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,s=>{this.scrollAdjustments=0,this.scrollOffset!==s&&(this.isScrollingTimeoutId!==null&&(clearTimeout(this.isScrollingTimeoutId),this.isScrollingTimeoutId=null),this.isScrolling=!0,this.scrollDirection=this.scrollOffset<s?"forward":"backward",this.scrollOffset=s,this.maybeNotify(),this.isScrollingTimeoutId=setTimeout(()=>{this.isScrollingTimeoutId=null,this.isScrolling=!1,this.scrollDirection=null,this.maybeNotify()},this.options.scrollingDelay))})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.memoOptions=fe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,s,a,o)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:a,getItemKey:o}),{key:!1}),this.getFurthestMeasurement=(t,s)=>{const a=new Map,o=new Map;for(let i=s-1;i>=0;i--){const l=t[i];if(a.has(l.lane))continue;const u=o.get(l.lane);if(u==null||l.end>u.end?o.set(l.lane,l):l.end<u.end&&a.set(l.lane,!0),a.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((i,l)=>i.end===l.end?i.index-l.index:i.end-l.end)[0]:void 0},this.getMeasurements=fe(()=>[this.memoOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:a,getItemKey:o},i)=>{const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let d=l;d<t;d++){const c=o(d),x=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),h=x?x.end:s+a,m=i.get(c),p=typeof m=="number"?m:this.options.estimateSize(d),w=h+p,b=x?x.lane:d%this.options.lanes;u[d]={index:d,start:h,size:p,end:w,key:c,lane:b}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=fe(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,s,a)=>this.range=t.length>0&&s>0?Ka({measurements:t,outerSize:s,scrollOffset:a}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=fe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,s,a,o)=>s===null?[]:t({...s,overscan:a,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,a=t.getAttribute(s);return a?parseInt(a,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const a=this.measurementsCache[this.indexFromElement(t)];if(!a||!t.isConnected){this.measureElementCache.forEach((l,u)=>{l===t&&(this.observer.unobserve(t),this.measureElementCache.delete(u))});return}const o=this.measureElementCache.get(a.key);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.measureElementCache.set(a.key,t));const i=this.options.measureElement(t,s,this);this.resizeItem(a,i)},this.resizeItem=(t,s)=>{const a=this.itemSizeCache.get(t.key)??t.size,o=s-a;o!==0&&(t.start<this.scrollOffset+this.scrollAdjustments&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,s)),this.notify(!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=fe(()=>[this.getIndexes(),this.getMeasurements()],(t,s)=>{const a=[];for(let o=0,i=t.length;o<i;o++){const l=t[o],u=s[l];a.push(u)}return a},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();return Ke(s[un(0,s.length-1,a=>Ke(s[a]).start,t)])},this.getOffsetForAlignment=(t,s)=>{const a=this.getSize();s==="auto"&&(t<=this.scrollOffset?s="start":t>=this.scrollOffset+a?s="end":s="start"),s==="start"?t=t:s==="end"?t=t-a:s==="center"&&(t=t-a/2);const o=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-this.getSize();return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const a=Ke(this.getMeasurements()[t]);if(s==="auto")if(a.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)s="end";else if(a.start<=this.scrollOffset+this.options.scrollPaddingStart)s="start";else return[this.scrollOffset,s];const o=s==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,s),s]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:s="start",behavior:a}={})=>{this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:a})},this.scrollToIndex=(t,{align:s="auto",behavior:a}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[o,i]=this.getOffsetForIndex(t,s);this._scrollToOffset(o,{adjustments:void 0,behavior:a}),a!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[u]=this.getOffsetForIndex(t,i);Aa(u,this.scrollOffset)||this.scrollToIndex(t,{align:i,behavior:a})}else this.scrollToIndex(t,{align:i,behavior:a})}))},this.scrollBy=(t,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let a;return s.length===0?a=this.options.paddingStart:a=this.options.lanes===1?((t=s[s.length-1])==null?void 0:t.end)??0:Math.max(...s.slice(-this.options.lanes).map(o=>o.end)),a-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:s,behavior:a})=>{this.options.scrollToFn(t,{behavior:a,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()}}const un=(e,n,t,s)=>{for(;e<=n;){const a=(e+n)/2|0,o=t(a);if(o<s)e=a+1;else if(o>s)n=a-1;else return a}return e>0?e-1:0};function Ka({measurements:e,outerSize:n,scrollOffset:t}){const s=e.length-1,o=un(0,s,l=>e[l].start,t);let i=o;for(;i<s&&e[i].end<t+n;)i++;return{startIndex:o,endIndex:i}}const qa=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Ya(e){const n=f.useReducer(()=>({}),{})[1],t={...e,onChange:(a,o)=>{var i;o?Gn.flushSync(n):n(),(i=e.onChange)==null||i.call(e,a,o)}},[s]=f.useState(()=>new Ba(t));return s.setOptions(t),f.useEffect(()=>s._didMount(),[]),qa(()=>s._willUpdate()),s}function Pr(e){return Ya({observeElementRect:La,observeElementOffset:_a,scrollToFn:Ua,...e})}const Wa=he.createContext(null);function te(e,n){const{base_url:t}=Nt(),s=f.useContext(Wa);return f.useMemo(()=>{if(!e)return{};let a;e.url&&(a=Zn(e.url)?e.url:`${t}/${e.url}`);const o={previewUrl:a,downloadUrl:`${t}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||e.hash}`};return s&&(o.previewUrl&&(o.previewUrl=kt(o.previewUrl,{...s,thumbnail:n!=null&&n.thumbnail?"true":""},t)),o.downloadUrl=kt(o.downloadUrl,s,t)),o},[t,e,n==null?void 0:n.downloadHashes,n==null?void 0:n.thumbnail,s])}function kt(e,n,t){const s=new URL(e,t);return Object.entries(n).forEach(([a,o])=>{s.searchParams.append(a,o)}),s.toString()}const ut=he.createContext(null);function ee({message:e,className:n,allowDownload:t}){const{entries:s,activeIndex:a}=f.useContext(ut),o=s[a],i=e||r.jsx(F,{message:"No file preview available"}),{downloadUrl:l}=te(o);return r.jsxs("div",{className:D(n,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[r.jsx("div",{className:"text-lg",children:i}),t&&r.jsx("div",{className:"block mt-20 text-center",children:r.jsx(J,{variant:"flat",color:"primary",onClick:()=>{l&&Ge(l)},children:r.jsx(F,{message:"Download"})})})]})}function Xa(e){const{entry:n,className:t}=e,{trans:s}=Y(),{previewUrl:a}=te(n);return a?r.jsx("img",{className:D(t,"shadow"),src:a,alt:s({message:"Preview for :name",values:{name:n.name}})}):r.jsx(ee,{...e})}const Ga=5242880;function Za(e){const{entry:n,className:t}=e,{trans:s}=Y(),[a,o]=f.useState(!1),[i,l]=f.useState(!0),[u,d]=f.useState(!1),[c,x]=f.useState(null),{previewUrl:h}=te(n);return f.useEffect(()=>{n&&(h?n.file_size>=Ga?(o(!0),l(!1)):Qa(h).then(m=>{x(m.data)}).catch(()=>{d(!0)}).finally(()=>{l(!1)}):d(!0))},[n,h]),i?r.jsx(at,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):a?r.jsx(ee,{...e,message:r.jsx(F,{message:"This file is too large to preview."})}):u?r.jsx(ee,{...e,message:r.jsx(F,{message:"There was an issue previewing this file"})}):r.jsx("pre",{className:D("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",t),children:r.jsx("div",{className:"container mx-auto",children:`${c}`})})}function Qa(e){return $e.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function Ja(e){const{entry:n,className:t}=e,{previewUrl:s}=te(n),a=f.useRef(null),[o,i]=f.useState(!1);return f.useEffect(()=>{var l;i(!((l=a.current)!=null&&l.canPlayType(n.mime)))},[n]),o||!s?r.jsx(ee,{...e}):r.jsx("video",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{i(!0)}})})}function er(e){const{entry:n,className:t}=e,{previewUrl:s}=te(n),a=f.useRef(null),[o,i]=f.useState(!1);return f.useEffect(()=>{var l;i(!((l=a.current)!=null&&l.canPlayType(n.mime)))},[n]),o||!s?r.jsx(ee,{...e}):r.jsx("audio",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{i(!0)}})})}function tr(e){const{entry:n,className:t}=e,{trans:s}=Y(),{previewUrl:a}=te(n);return a?r.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:D(t,"w-full h-full"),src:`${a}#toolbar=0`}):r.jsx(ee,{...e})}function qe(e){const{entry:n,className:t}=e,{trans:s}=Y(),a=f.useRef(null),[o,i]=f.useState(!1),l=f.useRef(),[u,d]=f.useState(!1),{previewUrl:c}=te(n);return f.useEffect(()=>{c?n.file_size&&n.file_size>25e6?i(!0):a.current&&(a.current.onload=()=>{clearTimeout(l.current),d(!1)},nr(c,n).then(x=>{a.current&&(a.current.src=x)}),l.current=setTimeout(()=>{i(!0)},5e3)):i(!0)},[n,c]),o?r.jsx(ee,{...e}):r.jsxs("div",{className:D(t,"w-full h-full"),children:[u&&r.jsx(at,{}),r.jsx("iframe",{ref:a,title:s({message:"Preview for :name",values:{name:n.name}}),className:D("w-full h-full",u&&"hidden")})]})}async function nr(e,n){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:s}=await $e.post(`file-entries/${n.id}/add-preview-token`);t.searchParams.append("preview_token",s.preview_token)}return sr(t)}function sr(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const Ct={text:Za,video:Ja,audio:er,image:Xa,pdf:tr,spreadsheet:qe,powerPoint:qe,word:qe,"text/rtf":ee};function ar(e){const n=e==null?void 0:e.mime,t=e==null?void 0:e.type;return Ct[n]||Ct[t]||ee}const rr=_(r.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined"),or=2*1024*1024;function ir({file:e,className:n,iconClassName:t,showImage:s=!0}){const{trans:a}=Y(),{previewUrl:o}=te(e,{thumbnail:!0});if(e.file_size&&e.file_size>or&&!e.thumbnail&&(s=!1),s&&e.type==="image"&&o){const i=a({message:":fileName thumbnail",values:{fileName:e.name}});return r.jsx("img",{className:D(n,"object-cover"),src:o,alt:i,draggable:!1})}return r.jsx(Qn,{className:t,type:e.type})}function lr({entries:e,onClose:n,showHeader:t=!0,className:s,headerActionsLeft:a,allowDownload:o=!0,...i}){const l=Ze("(max-width: 1024px)"),[u,d]=Q(i.activeIndex,i.defaultActiveIndex||0,i.onActiveIndexChange),c=e[u],x=f.useMemo(()=>({entries:e,activeIndex:u}),[e,u]),h=ar(c);if(!c)return n==null||n(),null;const m=e.length-1>u,p=()=>{d(u+1)},w=u>0,b=()=>{d(u-1)};return r.jsxs(ut.Provider,{value:x,children:[t&&r.jsx(cr,{actionsLeft:a,isMobile:l,onClose:n,onNext:m?p:void 0,onPrevious:w?b:void 0,allowDownload:o}),r.jsxs("div",{className:D("overflow-hidden relative flex-auto",s),children:[l&&r.jsx(q,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!w,onClick:b,children:r.jsx(Xt,{})}),r.jsx(je,{initial:!1,children:r.jsx(ue.div,{className:"absolute inset-0 flex items-center justify-center",...st,children:r.jsx(h,{className:"max-h-[calc(100%-30px)]",entry:c,allowDownload:o})},c.id)}),l&&r.jsx(q,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!m,onClick:p,children:r.jsx(Gt,{})})]})]})}function cr({onNext:e,onPrevious:n,onClose:t,isMobile:s,actionsLeft:a,allowDownload:o}){const{entries:i,activeIndex:l}=f.useContext(ut),u=i[l],{downloadUrl:d}=te(u),h=s?r.jsx(q,{onClick:()=>{d&&Ge(d)},children:r.jsx(wt,{})}):r.jsx(J,{startIcon:r.jsx(wt,{}),variant:"text",onClick:()=>{d&&Ge(d)},children:r.jsx(F,{message:"Download"})});return r.jsxs("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[r.jsxs("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[a,o?h:void 0]}),r.jsxs("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[r.jsx(ir,{file:u,iconClassName:"w-16 h-16",showImage:!1}),r.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:u.name})]}),r.jsxs("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!s&&r.jsxs(f.Fragment,{children:[r.jsx(q,{disabled:!n,onClick:n,children:r.jsx(rr,{})}),r.jsx("div",{children:l+1}),r.jsx("div",{children:"/"}),r.jsx("div",{children:i.length}),r.jsx(q,{disabled:!e,onClick:e,children:r.jsx(es,{})}),r.jsx("div",{className:"bg-divider w-1 h-24 mx-20"})]}),r.jsx(q,{radius:"rounded-none",onClick:t,children:r.jsx(Ht,{})})]})]})}function Tr(e){return r.jsx(Me,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:r.jsx(ur,{...e})})}function ur(e){const{close:n}=Je();return r.jsx(lr,{onClose:n,...e})}const dr={key:"type",label:C("Type"),description:C("Type of the file"),defaultOperator:ye.eq,control:{type:H.Select,defaultValue:"05",options:[{key:"02",label:C("Text"),value:"text"},{key:"03",label:C("Audio"),value:"audio"},{key:"04",label:C("Video"),value:"video"},{key:"05",label:C("Image"),value:"image"},{key:"06",label:C("PDF"),value:"pdf"},{key:"07",label:C("Spreadsheet"),value:"spreadsheet"},{key:"08",label:C("Word Document"),value:"word"},{key:"09",label:C("Photoshop"),value:"photoshop"},{key:"10",label:C("Archive"),value:"archive"},{key:"11",label:C("Folder"),value:"folder"}]}},Er=[dr,{key:"public",label:C("Visibility"),description:C("Whether file is publicly accessible"),defaultOperator:ye.eq,control:{type:H.Select,defaultValue:"01",options:[{key:"01",label:C("Private"),value:!1},{key:"02",label:C("Public"),value:!0}]}},Ss({description:C("Date file was uploaded")}),Ps({description:C("Date file was last changed")}),{key:"owner_id",label:C("Uploader"),description:C("User that this file was uploaded by"),defaultOperator:ye.eq,control:{type:H.SelectModel,model:$a}}],Rr=_(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Nr=_(r.jsx("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined");export{ot as $,wr as A,Ue as B,ha as C,mr as D,Pr as E,ye as F,Zs as G,Er as H,ra as I,Tr as J,Xt as K,Dr as L,Sr as M,aa as N,tn as O,sa as P,Nr as Q,Rr as R,Ws as S,vr as T,$a as U,te as V,ir as W,X,lr as Y,Wa as Z,dr as _,gr as a,on as a0,As as a1,Te as a2,Ta as a3,ga as a4,Kt as a5,Qt as a6,os as a7,vs as a8,ws as a9,it as aa,Bs as ab,Wt as ac,rr as ad,ss as ae,pr as b,xr as c,H as d,Ss as e,Gt as f,Ns as g,Xs as h,yr as i,Ge as j,wt as k,Ae as l,jr as m,br as n,oa as o,$s as p,Jt as q,fa as r,De as s,Cr as t,Ps as u,Ir as v,Ra as w,kr as x,da as y,ct as z};
//# sourceMappingURL=UnfoldMore-cded68c9.js.map
