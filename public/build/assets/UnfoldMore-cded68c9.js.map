{"version":3,"file":"UnfoldMore-cded68c9.js","sources":["../../../common/resources/client/ui/layout/dashboard-layout-context.ts","../../../common/resources/client/utils/hooks/use-block-body-overflow.ts","../../../common/resources/client/ui/layout/dashboard-layout.tsx","../../../common/resources/client/ui/layout/dashboard-content.tsx","../../../common/resources/client/ui/layout/dashboard-sidenav.tsx","../../../common/resources/client/icons/material/MenuOpen.tsx","../../../common/resources/client/ui/layout/dashboard-navbar.tsx","../../../common/resources/client/datatable/filters/backend-filter.ts","../../../common/resources/client/utils/date/start-of-day.ts","../../../common/resources/client/utils/date/end-of-day.ts","../../../common/resources/client/i18n/get-user-timezone.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../common/resources/client/icons/material/DateRange.tsx","../../../common/resources/client/ui/forms/input-field/input.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../common/resources/client/ui/forms/input-field/date/utils.ts","../../../common/resources/client/ui/forms/input-field/date/use-base-date-picker-state.ts","../../../common/resources/client/i18n/use-current-date-time.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../common/resources/client/icons/material/ArrowRightAlt.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/adjust-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/set-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/page-step.ts","../../../common/resources/client/ui/forms/input-field/date/segments/editable-date-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/literal-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../common/resources/client/ui/forms/input-field/date/segments/date-segment-list.tsx","../../../common/resources/client/icons/material/KeyboardArrowLeft.tsx","../../../common/resources/client/icons/material/KeyboardArrowRight.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-cell.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-month.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar.tsx","../../../common/resources/client/i18n/formatted-date-time-range.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-preset-list.tsx","../../../common/resources/client/utils/hooks/is-tablet-media-query.ts","../../../common/resources/client/ui/forms/toggle/switch.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../common/resources/client/datatable/filters/timestamp-filters.ts","../../../common/resources/client/datatable/filters/backend-filters-url-key.ts","../../../common/resources/client/datatable/filters/utils/decode-backend-filters.ts","../../../common/resources/client/datatable/filters/utils/encode-backend-filters.ts","../../../common/resources/client/datatable/filters/backend-filter-url-params.ts","../../../common/resources/client/utils/keybinds/is-ctrl-key-pressed.ts","../../../common/resources/client/ui/tables/navigate-grid.ts","../../../common/resources/client/ui/tables/table-context.ts","../../../common/resources/client/ui/tables/style/use-table-cell-style.ts","../../../common/resources/client/ui/tables/table-cell.tsx","../../../common/resources/client/ui/interactions/use-pointer-events.ts","../../../common/resources/client/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../common/resources/client/ui/tables/style/use-table-row-style.ts","../../../common/resources/client/ui/tables/table-row.tsx","../../../common/resources/client/ui/tables/checkbox-column-config.tsx","../../../common/resources/client/icons/material/ArrowDownward.tsx","../../../common/resources/client/ui/tables/header-cell.tsx","../../../common/resources/client/ui/tables/table-header-row.tsx","../../../common/resources/client/ui/tables/table.tsx","../../../common/resources/client/datatable/filters/panels/select-filter-panel.tsx","../../../common/resources/client/datatable/filters/panels/date-range-filter-panel.tsx","../../../common/resources/client/ui/images/avatar.tsx","../../../common/resources/client/users/queries/use-normalized-models.ts","../../../common/resources/client/users/queries/use-normalized-model.ts","../../../common/resources/client/ui/forms/normalized-model-field.tsx","../../../common/resources/client/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-operator-names.ts","../../../common/resources/client/datatable/filters/panels/input-filter-panel.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/chip-list.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/string-to-chip-value.ts","../../../common/resources/client/ui/forms/input-field/chip-field/chip-field.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/form-chip-field.tsx","../../../common/resources/client/datatable/filters/panels/chip-field-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../common/resources/client/i18n/formatted-number.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-control.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list.tsx","../../../common/resources/client/icons/material/Add.tsx","../../../common/resources/client/icons/material/FileDownload.tsx","../../../common/resources/client/uploads/utils/download-file-from-url.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/date-picker.tsx","../../../common/resources/client/icons/material/Delete.tsx","../../../common/resources/client/ui/interactions/dnd/drag-state.ts","../../../common/resources/client/ui/interactions/interactable-event.ts","../../../common/resources/client/ui/interactions/active-interaction.ts","../../../common/resources/client/ui/interactions/utils/dom-rect-to-obj.ts","../../../common/resources/client/ui/interactions/dnd/update-rects.ts","../../../common/resources/client/ui/interactions/dnd/use-draggable.ts","../../../common/resources/client/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../common/resources/client/utils/array/async-iterable-to-array.ts","../../../common/resources/client/ui/interactions/dnd/use-droppable.ts","../../../common/resources/client/auth/user.ts","../../../common/resources/client/icons/material/Link.tsx","../../../common/resources/client/icons/material/MoreVert.tsx","../../../node_modules/@tanstack/virtual-core/dist/esm/utils.js","../../../node_modules/@tanstack/virtual-core/dist/esm/index.js","../../../node_modules/@tanstack/react-virtual/dist/esm/index.js","../../../common/resources/client/uploads/hooks/file-entry-urls.ts","../../../common/resources/client/uploads/preview/file-preview-context.ts","../../../common/resources/client/uploads/preview/file-preview/default-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/image-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/text-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/video-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/audio-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/pdf-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/word-document-file-preview.tsx","../../../common/resources/client/uploads/preview/available-previews.ts","../../../common/resources/client/icons/material/ChevronLeft.tsx","../../../common/resources/client/uploads/file-type-icon/file-thumbnail.tsx","../../../common/resources/client/uploads/preview/file-preview-container.tsx","../../../common/resources/client/uploads/preview/file-preview-dialog.tsx","../../../common/resources/client/admin/file-entry/file-entry-index-filters.ts","../../../common/resources/client/icons/material/ArrowBack.tsx","../../../common/resources/client/icons/material/UnfoldMore.tsx"],"sourcesContent":["import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow(disable: boolean = false) {\n  useEffect(() => {\n    if (disable) {\n      document.documentElement.classList.remove('no-page-overflow');\n    } else {\n      document.documentElement.classList.add('no-page-overflow');\n    }\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, [disable]);\n}\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\nimport {Underlay} from '../overlays/underlay';\nimport {AnimatePresence} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '../../utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '../../utils/hooks/use-block-body-overflow';\nimport clsx from 'clsx';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  initialRightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n  height?: string;\n  gridClassName?: string;\n  blockBodyOverflow?: boolean;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  initialRightSidenavStatus,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  height = 'h-screen',\n  className,\n  gridClassName = 'dashboard-grid',\n  blockBodyOverflow = true,\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow(!blockBodyOverflow);\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\n  }, [name]);\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange,\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    if (isMobile) {\n      return 'closed';\n    }\n    if (initialRightSidenavStatus != null) {\n      return initialRightSidenavStatus;\n    }\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open',\n    );\n    if (userSelected != null) {\n      return userSelected;\n    }\n    return initialRightSidenavStatus || 'closed';\n  }, [isMobile, name, initialRightSidenavStatus]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange,\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name],\n  );\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className={clsx('relative isolate', gridClassName, className, height)}\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n  isScrollable?: boolean;\n}\nexport function DashboardContent({\n  children,\n  isScrollable = true,\n}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      isScrollable && 'overflow-y-auto stable-scrollbar',\n      'dashboard-grid-content'\n    ),\n  });\n}\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface DashboardSidenavChildrenProps {\n  className?: string;\n  isCompactMode?: boolean;\n}\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement<DashboardSidenavChildrenProps>;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg' | string;\n  mode?: 'overlay';\n  // absolute will place sidenav between navbar/footer, fixed will overlay it over nav/footer.\n  overlayPosition?: 'absolute' | 'fixed';\n  display?: 'flex' | 'block';\n  overflow?: string;\n  forceClosed?: boolean;\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  size = 'md',\n  mode,\n  overlayPosition = 'fixed',\n  display = 'flex',\n  overflow = 'overflow-hidden',\n  forceClosed = false,\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n  const isOverlayMode = isMobileMode || mode === 'overlay';\n\n  const variants = {\n    open: {display, width: null as any},\n    compact: {\n      display,\n      width: null as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const sizeClassName = getSize(status === 'compact' ? 'compact' : size);\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={forceClosed ? 'closed' : status}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        'will-change-[width]',\n        overflow,\n        sizeClassName,\n        isOverlayMode && `${overlayPosition} bottom-0 top-0 z-20 shadow-2xl`,\n        isOverlayMode && position === 'left' && 'left-0',\n        isOverlayMode && position === 'right' && 'right-0',\n      )}\n    >\n      {cloneElement<DashboardSidenavChildrenProps>(children, {\n        className: clsx(\n          children.props.className,\n          'w-full h-full',\n          status === 'compact' && 'compact-scrollbar',\n        ),\n        isCompactMode: status === 'compact',\n      })}\n    </m.div>\n  );\n}\n\nfunction getSize(size: SidenavProps['size'] | 'compact'): string {\n  switch (size) {\n    case 'compact':\n      return 'w-80';\n    case 'sm':\n      return 'w-224';\n    case 'md':\n      return 'w-240';\n    case 'lg':\n      return 'w-288';\n    default:\n      return size || '';\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuOpenIcon = createSvgIcon(\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\n, 'MenuOpenOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '../buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '../../utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@common/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {ComponentType} from 'react';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\nimport {ChipValue} from '@common/ui/forms/input-field/chip-field/chip-field';\nimport {AbsoluteDateRange} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {DateValue} from '@internationalized/date';\nimport {FilterListControlProps} from '@common/datatable/filters/filter-list/filter-list-control';\n\nexport interface FilterSelectControl {\n  type: FilterControlType.Select;\n  options: {label: MessageDescriptor; key: string | number; value: any}[];\n  defaultValue?: string | number | boolean;\n  placeholder?: MessageDescriptor;\n  searchPlaceholder?: MessageDescriptor;\n  showSearchField?: boolean;\n}\n\nexport interface FilterNumberInputControl {\n  type: FilterControlType.Input;\n  placeholder?: MessageDescriptor;\n  inputType: 'number';\n  minValue?: number;\n  maxValue?: number;\n  defaultValue: number;\n}\n\nexport interface FilterTextInputControl {\n  type: FilterControlType.Input;\n  placeholder?: MessageDescriptor;\n  inputType: 'string';\n  minLength?: number;\n  maxLength?: number;\n  defaultValue: string;\n}\n\nexport interface FilterSelectModelControl {\n  type: FilterControlType.SelectModel;\n  model: string;\n  defaultValue?: NormalizedModel;\n}\n\nexport interface FilterChipFieldControl {\n  type: FilterControlType.ChipField;\n  options: FilterSelectControl['options'];\n  placeholder?: MessageDescriptor;\n  defaultValue: ChipValue[];\n}\n\nexport interface FilterBooleanToggleControl {\n  type: FilterControlType.BooleanToggle;\n  // value can be something other than boolean, toggling will either send that value or nothing\n  defaultValue: string | number | boolean | null;\n}\n\nexport interface DatePickerFilterControl {\n  type: FilterControlType.DateRangePicker;\n  defaultValue: AbsoluteDateRange;\n  min?: DateValue;\n  max?: DateValue;\n}\n\nexport interface CustomFilterControl {\n  type: FilterControlType.Custom;\n  panel: ComponentType<{filter: BackendFilter<CustomFilterControl>}>;\n  listItem: ComponentType<FilterListControlProps<number, CustomFilterControl>>;\n  defaultValue?: any;\n}\n\nexport type FilterControl =\n  | FilterSelectControl\n  | FilterNumberInputControl\n  | FilterTextInputControl\n  | FilterSelectModelControl\n  | FilterChipFieldControl\n  | DatePickerFilterControl\n  | FilterBooleanToggleControl\n  | CustomFilterControl;\n\nexport interface BackendFilter<T = FilterControl> {\n  key: string;\n  label: MessageDescriptor;\n  description?: MessageDescriptor;\n  control: T;\n  defaultOperator: FilterOperator;\n  operators?: FilterOperator[];\n  extraFilters?: {key: string; operator: FilterOperator; value: any}[];\n}\n\nexport enum FilterControlType {\n  Select = 'select',\n  DateRangePicker = 'dateRangePicker',\n  SelectModel = 'selectModel',\n  Input = 'input',\n  BooleanToggle = 'booleanToggle',\n  ChipField = 'chipField',\n  Custom = 'custom',\n}\n\nexport enum FilterOperator {\n  eq = '=',\n  ne = '!=',\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  has = 'has',\n  hasAll = 'hasAll',\n  doesntHave = 'doesntHave',\n  between = 'between',\n}\n\nexport const ALL_PRIMITIVE_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.gt,\n  FilterOperator.gte,\n  FilterOperator.lt,\n  FilterOperator.lte,\n];\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1,\n  });\n}\n","import {getBootstrapData} from '../core/bootstrap-data/use-backend-bootstrap-data';\nimport {getLocalTimeZone} from '@internationalized/date';\n\nexport function getUserTimezone(): string {\n  const defaultTimezone = getBootstrapData()?.settings.dates.default_timezone;\n  const preferredTimezone =\n    getBootstrapData()?.user?.timezone || defaultTimezone || 'auto';\n\n  if (!preferredTimezone || preferredTimezone === 'auto') {\n    return getLocalTimeZone();\n  }\n  return preferredTimezone;\n}\n","import {DateRangeValue} from '../date-range-value';\nimport {message} from '@common/i18n/message';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {\n  endOfMonth,\n  endOfWeek,\n  endOfYear,\n  now,\n  startOfMonth,\n  startOfWeek,\n  startOfYear,\n} from '@internationalized/date';\nimport {startOfDay} from '@common/utils/date/start-of-day';\nimport {endOfDay} from '@common/utils/date/end-of-day';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\nimport {getUserTimezone} from '@common/i18n/get-user-timezone';\n\nconst Now = startOfDay(now(getUserTimezone()));\nconst locale = getBootstrapData()?.i18n?.language || 'en';\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: () => DateRangeValue;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('Today'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now,\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 1,\n    label: message('Yesterday'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 1}),\n      end: endOfDay(Now).subtract({days: 1}),\n    }),\n  },\n  {\n    key: 2,\n    label: message('This week'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: startOfWeek(Now, locale),\n      end: endOfWeek(endOfDay(Now), locale),\n    }),\n  },\n  {\n    key: 3,\n    label: message('Last week'),\n    getRangeValue: () => {\n      const start = startOfWeek(Now, locale).subtract({days: 7});\n      return {\n        preset: 3,\n        start,\n        end: start.add({days: 6}),\n      };\n    },\n  },\n  {\n    key: 4,\n    label: message('Last 7 days'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({days: 7}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 6,\n    label: message('Last 30 days'),\n    getRangeValue: () => ({\n      preset: 6,\n      start: Now.subtract({days: 30}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 7,\n    label: message('Last 3 months'),\n    getRangeValue: () => ({\n      preset: 7,\n      start: Now.subtract({months: 3}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 8,\n    label: message('Last 12 months'),\n    getRangeValue: () => ({\n      preset: 8,\n      start: Now.subtract({months: 12}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 9,\n    label: message('This month'),\n    getRangeValue: () => ({\n      preset: 9,\n      start: startOfMonth(Now),\n      end: endOfMonth(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 10,\n    label: message('This year'),\n    getRangeValue: () => ({\n      preset: 10,\n      start: startOfYear(Now),\n      end: endOfYear(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 11,\n    label: message('Last year'),\n    getRangeValue: () => ({\n      preset: 11,\n      start: startOfYear(Now).subtract({years: 1}),\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\n    }),\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DateRangeIcon = createSvgIcon(\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\n, 'DateRangeOutlined');\n","import {FocusScope} from '@react-aria/focus';\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InputProps {\n  className?: string;\n  children: ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  style?: CSSProperties;\n  inputProps?: ComponentPropsWithoutRef<'div'>;\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\n  (props, ref) => {\n    const {\n      children,\n      inputProps,\n      wrapperProps,\n      className,\n      autoFocus,\n      style,\n      onClick,\n    } = props;\n\n    return (\n      <div {...wrapperProps} onClick={onClick}>\n        <div\n          {...inputProps}\n          role=\"group\"\n          className={clsx(\n            className,\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\n          )}\n          ref={ref}\n          style={style}\n        >\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>\n    );\n  }\n);\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\nimport clsx from 'clsx';\nimport {createFocusManager} from '@react-aria/focus';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\nimport {Field, FieldProps} from '../../field';\nimport {Input} from '../../input';\nimport {useField} from '../../use-field';\n\nexport interface DatePickerFieldProps\n  extends Omit<FieldProps, 'fieldClassNames'> {\n  inputRef?: Ref<HTMLDivElement>;\n  onBlur?: FocusEventHandler;\n  showCalendarFooter?: boolean;\n}\nexport const DatePickerField = React.forwardRef<\n  HTMLDivElement,\n  DatePickerFieldProps\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n\n  const {fieldProps, inputProps} = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span',\n  });\n\n  fieldClassNames.wrapper = clsx(\n    fieldClassNames.wrapper,\n    other.disabled && 'pointer-events-none',\n  );\n\n  return (\n    <Field\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\n        wrapperProps!,\n        {\n          onBlur: e => {\n            if (objRef.current && !objRef.current.contains(e.relatedTarget)) {\n              onBlur?.(e);\n            }\n          },\n          onClick: () => {\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n            const focusManager = createFocusManager(objRef);\n            focusManager?.focusFirst();\n          },\n        },\n      )}\n      fieldClassNames={fieldClassNames}\n      ref={objRef}\n      {...fieldProps}\n    >\n      <Input\n        inputProps={inputProps}\n        className={clsx(fieldClassNames.input, 'gap-10')}\n        ref={inputRef}\n      >\n        {children}\n      </Input>\n    </Field>\n  );\n});\n","import {CalendarDate, DateValue} from '@internationalized/date';\n\nexport function getDefaultGranularity(date: DateValue) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\n\nexport function dateIsInvalid(\n  date: CalendarDate,\n  min?: DateValue,\n  max?: DateValue\n) {\n  return (\n    (min != null && date.compare(min) < 0) ||\n    (max != null && date.compare(max) > 0)\n  );\n}\n","import {useState} from 'react';\nimport {DateValue, toZoned, ZonedDateTime} from '@internationalized/date';\nimport {getDefaultGranularity} from './utils';\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-picker/date-range-value';\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\n\nexport function useBaseDatePickerState(\n  selectedDate: DateValue,\n  props:\n    | DatePickerValueProps<ZonedDateTime>\n    | DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\n) {\n  const timezone = useUserTimezone();\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toZoned(props.min, timezone) : undefined;\n  const max = props.max ? toZoned(props.max, timezone) : undefined;\n\n  return {\n    timezone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  };\n}\n","import {useMemo} from 'react';\nimport {now} from '@internationalized/date';\nimport {useUserTimezone} from './use-user-timezone';\n\nexport function useCurrentDateTime() {\n  const timezone = useUserTimezone();\n  return useMemo(() => {\n    return now(timezone);\n  }, [timezone]);\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  isSameDay,\n  isSameMonth,\n  maxDate,\n  minDate,\n  startOfMonth,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {\n  BaseDatePickerState,\n  DatePickerValueProps,\n} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {startOfDay} from '@common/utils/date/start-of-day';\nimport {endOfDay} from '@common/utils/date/end-of-day';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>,\n): DateRangePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value ? completeRange(props.value, now) : undefined,\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\n    value => {\n      setIsPlaceholder({start: false, end: false});\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue.start, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder({start: true, end: true});\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(internalValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n\n  const constrainRange = useCallback(\n    (range: DateRangeValue): DateRangeValue => {\n      let start = range.start;\n      let end = range.end;\n\n      // make sure start date is after min date and before max date/range end\n      if (min) {\n        start = maxDate(start, min);\n      }\n      const startMax = max ? minDate(max, end) : end;\n      start = minDate(start, startMax);\n\n      // make sure end date is after min date/range start and before max date\n      const endMin = min ? maxDate(min, start) : start;\n      end = maxDate(end, endMin);\n\n      if (max) {\n        end = minDate(end, max);\n      }\n\n      return {start: toZoned(start, timezone), end: toZoned(end, timezone)};\n    },\n    [min, max, timezone],\n  );\n\n  const setSelectedValue = useCallback(\n    (newRange: DateRangeValue) => {\n      const value = {\n        ...constrainRange(newRange),\n        preset: newRange.preset,\n      };\n      setInternalValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setInternalValue, constrainRange, max],\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder],\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting],\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange],\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange],\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(\n              makeRange({start: anchorDate!, end: date, timezone}),\n            );\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\n          } else {\n            const finalRange = makeRange({\n              start: anchorDate!,\n              end: date,\n              timezone,\n            });\n            // cast to start and end of day after making range, because \"makeRange\"\n            // will flip start and end dates, if they are out of order\n            finalRange.start = startOfDay(finalRange.start);\n            finalRange.end = endOfDay(finalRange.end);\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n      timezone,\n    ],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue,\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n  timezone: string;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toZoned(props.start, props.timezone);\n  const end = toZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined,\n  now: ZonedDateTime,\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: now, end: now.add({months: 1})};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowRightAltIcon = createSvgIcon(\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\n, 'ArrowRightAltOutlined');\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function adjustSegment(\n  value: ZonedDateTime,\n  part: string,\n  amount: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {round: part === 'year'});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const isPM = hours >= 12;\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24,\n        });\n    }\n  }\n\n  return value;\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function setSegment(\n  value: ZonedDateTime,\n  part: string,\n  segmentValue: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({[part]: segmentValue});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const wasPM = hours >= 12;\n        const isPM = segmentValue >= 12;\n        if (isPM === wasPM) {\n          return value;\n        }\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({[part]: segmentValue});\n    }\n  }\n\n  return value;\n}\n","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1,\n};\n","import {useFocusManager} from '@react-aria/focus';\nimport React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  KeyboardEventHandler,\n  useMemo,\n  useRef,\n} from 'react';\nimport {NumberParser} from '@internationalized/number';\nimport {mergeProps} from '@react-aria/utils';\nimport {today, ZonedDateTime} from '@internationalized/date';\nimport {useSelectedLocale} from '@common/i18n/selected-locale';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {adjustSegment} from './utils/adjust-segment';\nimport {setSegment} from './utils/set-segment';\nimport {PAGE_STEP} from './utils/page-step';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\nexport interface EditableSegment {\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\n  text: string;\n  value: number;\n  minValue: number;\n  maxValue: number;\n  minLength: number;\n}\n\ninterface DatePickerSegmentProps {\n  segment: EditableSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {timezone, calendarIsOpen, setCalendarIsOpen},\n}: DatePickerSegmentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {localeCode} = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({timeZone: timezone});\n  const parser = useMemo(\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\n    [localeCode],\n  );\n\n  const setSegmentValue = (newValue: number) => {\n    onChange(\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions()),\n    );\n  };\n\n  const adjustSegmentValue = (amount: number) => {\n    onChange(\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions()),\n    );\n  };\n\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(timezone);\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n\n  const onKeyDown: KeyboardEventHandler = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager?.focusNext();\n        break;\n      case 'Enter':\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete': {\n        e.preventDefault();\n        e.stopPropagation();\n        backspace();\n        break;\n      }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n\n    onInput(e.key);\n  };\n\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter\n      .formatToParts(amDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter\n      .formatToParts(pmDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = (key: string) => {\n    const newValue = enteredKeys.current + key;\n\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager?.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year': {\n        if (!parser.isValidPartialNumber(newValue)) {\n          return;\n        }\n\n        let numberValue = parser.parse(newValue);\n        let segmentValue = numberValue;\n        let allowsZero = segment.minValue === 0;\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n          switch (formatter.resolvedOptions().hourCycle) {\n            case 'h11':\n              if (numberValue > 11) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n            case 'h12':\n              allowsZero = false;\n              if (numberValue > 12) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n          }\n\n          if (segment.value >= 12 && numberValue > 1) {\n            numberValue += 12;\n          }\n        } else if (numberValue > segment.maxValue) {\n          segmentValue = parser.parse(key);\n        }\n\n        if (Number.isNaN(numberValue)) {\n          return;\n        }\n\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\n        if (shouldSetValue) {\n          setSegmentValue(segmentValue);\n        }\n\n        if (\n          Number(`${numberValue}0`) > segment.maxValue ||\n          newValue.length >= String(segment.maxValue).length\n        ) {\n          enteredKeys.current = '';\n          if (shouldSetValue) {\n            focusManager?.focusNext();\n          }\n        } else {\n          enteredKeys.current = newValue;\n        }\n        break;\n      }\n    }\n  };\n\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\n    ? {}\n    : {\n        'aria-label': segment.type,\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n        'aria-valuemin': segment.minValue,\n        'aria-valuemax': segment.maxValue,\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\n        tabIndex: 0,\n        onKeyDown,\n      };\n\n  return (\n    <div\n      {...mergeProps(domProps!, {\n        ...spinButtonProps,\n        onFocus: e => {\n          enteredKeys.current = '';\n          e.target.scrollIntoView({block: 'nearest'});\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n      } as HTMLAttributes<HTMLDivElement>)}\n      className=\"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary\"\n    >\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>\n  );\n}\n","import {useFocusManager} from '@react-aria/focus';\nimport {ComponentPropsWithoutRef} from 'react';\n\nexport interface LiteralSegment {\n  type: 'literal';\n  minLength: 1;\n  text: string;\n}\n\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\n  segment: LiteralSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n}\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\n  const focusManager = useFocusManager();\n  return (\n    <div\n      {...domProps}\n      onPointerDown={e => {\n        if (e.pointerType === 'mouse') {\n          e.preventDefault();\n          const res = focusManager?.focusNext({from: e.target as HTMLElement});\n          if (!res) {\n            focusManager?.focusPrevious({from: e.target as HTMLElement});\n          }\n        }\n      }}\n      aria-hidden\n      className=\"min-w-4 cursor-default select-none\"\n    >\n      {segment.text}\n    </div>\n  );\n}\n","import {\n  DateValue,\n  getMinimumDayInMonth,\n  getMinimumMonthInYear,\n} from '@internationalized/date';\n\nexport function getSegmentLimits(\n  date: DateValue,\n  type: string,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date),\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date),\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd',\n      };\n  }\n\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--',\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--',\n          };\n        }\n\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--',\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--',\n        };\n    }\n  }\n\n  return {};\n}\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\nimport {ZonedDateTime} from '@internationalized/date';\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {getSegmentLimits} from './utils/get-segment-limits';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface DateSegmentListProps {\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder,\n}: DateSegmentListProps) {\n  const {granularity} = state;\n  const options = useMemo(() => {\n    const memoOptions: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity]);\n\n  const formatter = useDateFormatter(options);\n\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(\n        value,\n        segment.type,\n        formatter.resolvedOptions(),\n      );\n      const textValue =\n        isPlaceholder && segment.type !== 'literal'\n          ? limits.placeholder\n          : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength:\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\n      } as LiteralSegment | EditableSegment;\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n\n  return (\n    <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n        if (segment.type === 'literal') {\n          return (\n            <LiteralDateSegment\n              domProps={segmentProps}\n              key={index}\n              segment={segment}\n            />\n          );\n        }\n        return (\n          <EditableDateSegment\n            isPlaceholder={isPlaceholder}\n            domProps={segmentProps}\n            state={state}\n            value={value}\n            onChange={onChange}\n            segment={segment}\n            key={index}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowLeftIcon = createSvgIcon(\n  <path d=\"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\" />\n, 'KeyboardArrowLeftOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowRightIcon = createSvgIcon(\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n, 'KeyboardArrowRightOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n  CalendarDate,\n  DateValue,\n  getDayOfWeek,\n  isSameMonth,\n  isToday,\n} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarCellProps {\n  date: CalendarDate;\n  currentMonth: DateValue;\n  state: DatePickerState | DateRangePickerState;\n}\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timezone,\n    min,\n    max,\n  },\n}: CalendarCellProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timezone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n\n  return (\n    <div\n      role=\"button\"\n      aria-disabled={isDisabled}\n      className={clsx(\n        'w-40 h-40 text-sm relative isolate flex-shrink-0',\n        isDisabled && 'text-disabled pointer-events-none',\n        !sameMonth && 'invisible pointer-events-none'\n      )}\n      {...getCellProps(date, sameMonth)}\n    >\n      <span\n        className={clsx(\n          'absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer',\n          !isActive && !dayIsToday && 'hover:bg-hover',\n          isActive && 'bg-primary text-on-primary font-semibold',\n          dayIsToday && !isActive && 'bg-chip'\n        )}\n      >\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && (\n        <span\n          className={clsx(\n            'absolute w-full h-full inset-0 bg-primary/focus',\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\n              'rounded-l-full',\n            (isRangeEnd ||\n              dayOfWeek === 6 ||\n              date.day ===\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\n              'rounded-r-full'\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {\n  CalendarDate,\n  endOfMonth,\n  getWeeksInMonth,\n  startOfMonth,\n  startOfWeek,\n} from '@internationalized/date';\nimport {KeyboardArrowLeftIcon} from '../../../../../icons/material/KeyboardArrowLeft';\nimport {IconButton} from '../../../../buttons/icon-button';\nimport {KeyboardArrowRightIcon} from '../../../../../icons/material/KeyboardArrowRight';\nimport {CalendarCell} from './calendar-cell';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\nexport interface CalendarMonthProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast,\n}: CalendarMonthProps) {\n  const {localeCode} = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader\n        isFirst={isFirst}\n        isLast={isLast}\n        state={state}\n        currentMonth={startDate}\n      />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\n          <m.div className=\"flex mb-6\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => (\n              <CalendarCell\n                key={dayIndex}\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\n                currentMonth={startDate}\n                state={state}\n              />\n            ))}\n          </m.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CalendarMonthHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  currentMonth: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {calendarDates, setCalendarDates, timezone, min, max},\n}: CalendarMonthHeaderProps) {\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\n    const count = calendarDates.length;\n    let newDates: CalendarDate[];\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.add({months: count}))\n      );\n    } else {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.subtract({months: count}))\n      );\n    }\n    setCalendarDates(newDates);\n  };\n\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier,\n  });\n\n  const isBackwardDisabled = dateIsInvalid(\n    currentMonth.subtract({days: 1}),\n    min,\n    max\n  );\n  const isForwardDisabled = dateIsInvalid(\n    startOfMonth(currentMonth.add({months: 1})),\n    min,\n    max\n  );\n\n  return (\n    <div className=\"flex items-center justify-between gap-10\">\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isFirst && 'invisible')}\n        disabled={!isFirst || isBackwardDisabled}\n        aria-hidden={!isFirst}\n        onClick={() => {\n          shiftCalendars('backward');\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"text-sm font-semibold select-none\">\n        {monthFormatter.format(currentMonth.toDate(timezone))}\n      </div>\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isLast && 'invisible')}\n        disabled={!isLast || isForwardDisabled}\n        aria-hidden={!isLast}\n        onClick={() => {\n          shiftCalendars('forward');\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface WeekdayHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n}\nfunction WeekdayHeader({state: {timezone}, startDate}: WeekdayHeaderProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayFormatter = useDateFormatter({weekday: 'short'});\n\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n        const date = monthStart.add({days: index});\n        const dateDay = date.toDate(timezone);\n        const weekday = dayFormatter.format(dateDay);\n        return (\n          <div\n            className=\"w-40 h-40 text-sm font-semibold relative flex-shrink-0\"\n            key={index}\n          >\n            <div className=\"absolute flex items-center justify-center w-full h-full select-none\">\n              {weekday}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, {Fragment} from 'react';\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {CalendarMonth} from './calendar-month';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarProps {\n  state: DatePickerState | DateRangePickerState;\n  visibleMonths?: 1 | 2;\n}\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n\n  return (\n    <Fragment>\n      {[...new Array(visibleMonths).keys()].map(index => {\n        const startDate = toCalendarDate(\n          startOfMonth(state.calendarDates[index])\n        );\n        const isFirst = index === 0;\n        const isLast = index === visibleMonths - 1;\n        return (\n          <CalendarMonth\n            key={index}\n            state={state}\n            startDate={startDate}\n            isFirst={isFirst}\n            isLast={isLast}\n          />\n        );\n      })}\n    </Fragment>\n  );\n}\n","import {DateValue, parseAbsolute} from '@internationalized/date';\nimport {Fragment, memo} from 'react';\nimport {useDateFormatter} from './use-date-formatter';\nimport {useSettings} from '../core/settings/use-settings';\nimport {shallowEqual} from '../utils/shallow-equal';\nimport {useUserTimezone} from './use-user-timezone';\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n  preset?: keyof typeof DateFormatPresets;\n}\nexport const FormattedDateTimeRange = memo(\n  ({start, end, options, preset}: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const timezone = useUserTimezone();\n    const formatter = useDateFormatter(\n      options ||\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\n          preset || dates?.format\n        ]\n    );\n\n    if (!start || !end) {\n      return null;\n    }\n\n    let value: string;\n\n    try {\n      value = formatter.formatRange(\n        castToDate(start, timezone),\n        castToDate(end, timezone)\n      );\n    } catch (e) {\n      value = '';\n    }\n\n    return <Fragment>{value}</Fragment>;\n  },\n  shallowEqual\n);\n\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}\n","import {List, ListItem} from '@common/ui/list/list';\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {Trans} from '@common/i18n/trans';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\n\ninterface DateRangePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue();\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {useMediaQuery, UseMediaQueryOptions} from './use-media-query';\n\nexport function useIsTabletMediaQuery(options?: UseMediaQueryOptions) {\n  return useMediaQuery('(max-width: 1024px)', options);\n}\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n  iconRight?: ReactNode;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      iconRight,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex select-none items-center\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            aria-checked={domProps.checked}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark',\n              invalid && 'checked:border-danger checked:bg-danger',\n              'relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary',\n              'before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'cursor-not-allowed opacity-80',\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled',\n              )}\n            >\n              {children}\n            </span>\n          )}\n          {iconRight}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange: e => {\n      if (e.target.value && e.target.value !== 'on') {\n        onChange(e.target.checked ? e.target.value : false);\n      } else {\n        onChange(e);\n      }\n    },\n    onBlur,\n    checked: !!value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n","import {message} from '@common/i18n/message';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\nexport interface DateRangeComparePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: (range: DateRangeValue) => DateRangeValue;\n}\n\nexport const DateRangeComparePresets: DateRangeComparePreset[] = [\n  {\n    key: 0,\n    label: message('Preceding period'),\n    getRangeValue: (range: DateRangeValue) => {\n      const startDate = range.start;\n      const endDate = range.end;\n\n      const diffInMilliseconds =\n        endDate.toDate().getTime() - startDate.toDate().getTime();\n      const diffInMinutes = diffInMilliseconds / (1000 * 60);\n      const newStart = startDate.subtract({minutes: diffInMinutes});\n      return {\n        preset: 0,\n        start: newStart,\n        end: startDate,\n      };\n    },\n  },\n  {\n    key: 1,\n    label: message('Same period last year'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({years: 1}),\n        end: range.end.subtract({years: 1}),\n        preset: 1,\n      };\n    },\n  },\n  {\n    key: 2,\n    label: message('Custom'),\n    getRangeValue: (range: DateRangeValue) => {\n      return {\n        start: range.start.subtract({weeks: 1}),\n        end: range.end.subtract({weeks: 1}),\n        preset: 2,\n      };\n    },\n  },\n];\n","import {List, ListItem} from '@common/ui/list/list';\nimport {Trans} from '@common/i18n/trans';\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\nimport {DateRangeComparePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\n\ninterface DateRangePresetList {\n  originalRangeValue: DateRangeValue;\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DateRangeComparePresetList({\n  originalRangeValue,\n  onPresetSelected,\n  selectedValue,\n}: DateRangePresetList) {\n  return (\n    <List>\n      {DateRangeComparePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue(originalRangeValue);\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import React, {Fragment, ReactNode, useRef, useState} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {Calendar} from '../../calendar/calendar';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {ArrowRightAltIcon} from '@common/icons/material/ArrowRightAlt';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {DatePresetList} from './date-range-preset-list';\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\nimport {Switch} from '@common/ui/forms/toggle/switch';\nimport {DateRangeComparePresetList} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  compareVisibleDefault?: boolean;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  compareState,\n  showInlineDatePickerField = false,\n  compareVisibleDefault = false,\n}: DateRangeDialogProps) {\n  const isTablet = useIsTabletMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n  const [compareVisible, setCompareVisible] = useState(compareVisibleDefault);\n\n  const footer = (\n    <DialogFooter\n      dividerTop\n      startAction={\n        !hasPlaceholder && !isTablet ? (\n          <div className=\"text-xs\">\n            <FormattedDateTimeRange\n              start={state.selectedValue.start.toDate()}\n              end={state.selectedValue.end.toDate()}\n              options={{dateStyle: 'medium'}}\n            />\n          </div>\n        ) : undefined\n      }\n    >\n      <Button\n        variant=\"text\"\n        size=\"xs\"\n        onClick={() => {\n          state.setSelectedValue(initialStateRef.current.selectedValue);\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n          close();\n        }}\n      >\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"xs\"\n        onClick={() => {\n          const value = state.selectedValue;\n          if (compareState && compareVisible) {\n            value.compareStart = compareState.selectedValue.start;\n            value.compareEnd = compareState.selectedValue.end;\n          }\n          close(value);\n        }}\n      >\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && (\n          <div className=\"min-w-192 py-14\">\n            <DatePresetList\n              selectedValue={state.selectedValue}\n              onPresetSelected={preset => {\n                state.setSelectedValue(preset);\n                if (state.closeDialogOnSelection) {\n                  close(preset);\n                }\n              }}\n            />\n            {!!compareState && (\n              <Fragment>\n                <Switch\n                  className=\"mx-20 mb-10 mt-14\"\n                  checked={compareVisible}\n                  onChange={e => setCompareVisible(e.target.checked)}\n                >\n                  <Trans message=\"Compare\" />\n                </Switch>\n                {compareVisible && (\n                  <DateRangeComparePresetList\n                    originalRangeValue={state.selectedValue}\n                    selectedValue={compareState.selectedValue}\n                    onPresetSelected={preset => {\n                      compareState.setSelectedValue(preset);\n                    }}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            compareState={compareState}\n            showInlineDatePickerField={showInlineDatePickerField}\n            compareVisible={compareVisible}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  compareState?: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n  compareVisible: boolean;\n}\nfunction Calendars({\n  state,\n  compareState,\n  showInlineDatePickerField,\n  compareVisible,\n}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pb-20 pt-10\"\n    >\n      {showInlineDatePickerField && (\n        <div>\n          <InlineDatePickerField state={state} />\n          {!!compareState && compareVisible && (\n            <InlineDatePickerField\n              state={compareState}\n              label={<Trans message=\"Compare\" />}\n            />\n          )}\n        </div>\n      )}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n  label?: ReactNode;\n}\nfunction InlineDatePickerField({state, label}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\" label={label}>\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\nimport {useDateRangePickerState} from './use-date-range-picker-state';\nimport {ArrowRightAltIcon} from '@common/icons/material/ArrowRightAlt';\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {DateRangeDialog} from './dialog/date-range-dialog';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\nexport interface DateRangePickerProps\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\n    Omit<DatePickerFieldProps, 'children'> {}\nexport function DateRangePicker(props: DateRangePickerProps) {\n  const {granularity, closeDialogOnSelection, ...fieldProps} = props;\n  const state = useDateRangePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const isMobile = useIsMobileMediaQuery();\n  const hideCalendarIcon = isMobile && granularity !== 'day';\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <DateRangeDialog state={state} />\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  const value = state.selectedValue;\n  const onChange = state.setSelectedValue;\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\n        {...fieldProps}\n      >\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.start}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.start}\n          onChange={newValue => {\n            onChange({start: newValue, end: value.end});\n          }}\n        />\n        <ArrowRightAltIcon\n          className=\"block flex-shrink-0 text-muted\"\n          size=\"md\"\n        />\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.end}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.end}\n          onChange={newValue => {\n            onChange({start: value.start, end: newValue});\n          }}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {DateRangeValue} from './date-range-value';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\n\nexport interface AbsoluteDateRange {\n  start?: string;\n  end?: string;\n  preset?: number;\n}\n\ninterface FormDateRange {\n  start?: string | ZonedDateTime;\n  end?: string | ZonedDateTime;\n  preset?: number;\n}\n\nexport interface FormDateRangePickerProps extends DateRangePickerProps {\n  name: string;\n}\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<DateRangePickerProps> = {\n    onChange: e => {\n      onChange(e ? dateRangeToAbsoluteRange(e) : null);\n    },\n    onBlur,\n    value: absoluteRangeToDateRange(value),\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\n}\n\nexport function absoluteRangeToDateRange(props: FormDateRange | null) {\n  const {start, end, preset} = props || {};\n  const dateRange: Partial<DateRangeValue> = {preset};\n  try {\n    if (start) {\n      dateRange.start =\n        typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\n    }\n    if (end) {\n      dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\n    }\n  } catch (e) {\n    // ignore\n  }\n  return dateRange;\n}\n\nexport function dateRangeToAbsoluteRange({\n  start,\n  end,\n  preset,\n}: Partial<DateRangeValue> = {}): AbsoluteDateRange {\n  const absoluteRange: AbsoluteDateRange = {\n    preset,\n  };\n  if (start) {\n    absoluteRange.start = start.toAbsoluteString();\n  }\n  if (end) {\n    absoluteRange.end = end.toAbsoluteString();\n  }\n  return absoluteRange;\n}\n","import {\n  BackendFilter,\n  DatePickerFilterControl,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {\n  DateRangePreset,\n  DateRangePresets,\n} from '../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {message} from '../../i18n/message';\nimport {dateRangeToAbsoluteRange} from '../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {PartialWithRequired} from '@common/utils/ts/partial-with-required';\n\nexport function timestampFilter(\n  options: PartialWithRequired<\n    BackendFilter<DatePickerFilterControl>,\n    'key' | 'label'\n  >\n): BackendFilter<DatePickerFilterControl> {\n  return {\n    ...options,\n    defaultOperator: FilterOperator.between,\n    control: {\n      type: FilterControlType.DateRangePicker,\n      defaultValue:\n        options.control?.defaultValue ||\n        dateRangeToAbsoluteRange(\n          (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue()\n        ),\n    },\n  };\n}\n\nexport function createdAtFilter(\n  options: Partial<BackendFilter<DatePickerFilterControl>>\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'created_at',\n    label: message('Date created'),\n    ...options,\n  });\n}\n\nexport function updatedAtFilter(\n  options: Partial<BackendFilter<DatePickerFilterControl>>\n): BackendFilter<DatePickerFilterControl> {\n  return timestampFilter({\n    key: 'updated_at',\n    label: message('Last updated'),\n    ...options,\n  });\n}\n","export const BackendFiltersUrlKey = 'filters';\n","import {FilterListValue} from './encode-backend-filters';\n\nexport function decodeBackendFilters(\n  encodedFilters: string | null\n): FilterListValue[] {\n  if (!encodedFilters) return [];\n  let filtersFromQuery: FilterListValue[] = [];\n  try {\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\n    filtersFromQuery.map(filterValue => {\n      // set value key as value so selects work properly\n      if (filterValue.valueKey != null) {\n        filterValue.value = filterValue.valueKey;\n      }\n      return filterValue;\n    });\n  } catch (e) {\n    //\n  }\n  return filtersFromQuery;\n}\n","import {BackendFilter} from '../backend-filter';\n\nexport interface FilterListValue {\n  key: string | number;\n  value: BackendFilter['control']['defaultValue'];\n  operator?: BackendFilter['defaultOperator'];\n  valueKey?: string | number;\n  isInactive?: boolean;\n  extraFilters?: {key: string; operator: string; value: any}[];\n}\n\nexport function encodeBackendFilters(\n  filterValues: FilterListValue[] | null,\n  filters?: BackendFilter[],\n): string {\n  if (!filterValues) return '';\n\n  // prepare values for backend\n  filterValues = !filters\n    ? filterValues\n    : filterValues\n        .filter(item => item.value !== '')\n        .map(item => transformValue(item, filters));\n\n  // remove all placeholder filters\n  filterValues = filterValues.filter(fm => !fm.isInactive);\n\n  if (!filterValues.length) {\n    return '';\n  }\n\n  return encodeURIComponent(btoa(JSON.stringify(filterValues)));\n}\n\nfunction transformValue(\n  filterValue: FilterListValue,\n  filters: BackendFilter[],\n) {\n  const filterConfig = filters.find(f => f.key === filterValue.key);\n  // select components will use a key always, because we can't use objects as\n  // value. Map over select options and replace key with actual value\n  if (filterConfig?.control.type === 'select') {\n    const option = (filterConfig.control.options || []).find(\n      o => o.key === filterValue.value,\n    );\n    // if it's language or country select, there might not be an option\n    if (option) {\n      return {...filterValue, value: option.value, valueKey: option.key};\n    }\n  }\n\n  if (filterConfig?.extraFilters?.length) {\n    filterValue['extraFilters'] = filterConfig.extraFilters;\n  }\n\n  return filterValue;\n}\n","import {useNavigate, useSearchParams} from 'react-router-dom';\nimport {Key, useCallback, useMemo} from 'react';\nimport {BackendFilter} from './backend-filter';\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\nimport {\n  encodeBackendFilters,\n  FilterListValue,\n} from './utils/encode-backend-filters';\n\nexport function useBackendFilterUrlParams(\n  filters?: BackendFilter[],\n  pinnedFilters?: string[]\n) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\n\n  const decodedFilters: FilterListValue[] = useMemo(() => {\n    if (!filters) return [];\n    const decoded = decodeBackendFilters(encodedFilters);\n\n    // if filter is pinned, and it is not applied yet, add a placeholder\n    (pinnedFilters || []).forEach(key => {\n      if (!decoded.find(f => f.key === key)) {\n        const config = filters.find(f => f.key === key)!;\n        decoded.push({\n          key,\n          value: config.control.defaultValue,\n          operator: config.defaultOperator,\n          isInactive: true,\n        });\n      }\n    });\n\n    // preserve original filter order from configuration\n    decoded.sort(\n      (a, b) =>\n        filters.findIndex(f => f.key === a.key) -\n        filters.findIndex(f => f.key === b.key)\n    );\n\n    return decoded;\n  }, [encodedFilters, pinnedFilters, filters]);\n\n  const getDecodedWithoutKeys = useCallback(\n    (values: (FilterListValue | Key)[]) => {\n      const newFilters = [...decodedFilters];\n      values.forEach(value => {\n        const key = typeof value === 'object' ? value.key : value;\n        const index = newFilters.findIndex(f => f.key === key);\n        if (index > -1) {\n          newFilters.splice(index, 1);\n        }\n      });\n      return newFilters;\n    },\n    [decodedFilters]\n  );\n\n  const replaceAll = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\n      if (encodedFilters) {\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\n      } else {\n        searchParams.delete(BackendFiltersUrlKey);\n      }\n      navigate({search: `?${searchParams}`}, {replace: true});\n    },\n    [filters, navigate, searchParams]\n  );\n\n  const add = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const existing = getDecodedWithoutKeys(filterValues);\n      const decodedFilters = [...existing, ...filterValues];\n      replaceAll(decodedFilters);\n    },\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  const remove = useCallback(\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  return {\n    add,\n    remove,\n    replaceAll,\n    decodedFilters,\n    encodedFilters,\n  };\n}\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  isCollapsedMode: boolean;\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  enableSorting?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  meta?: any;\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T | null, merge?: boolean) => void;\n  hideBorder: boolean;\n  hideHeaderRow: boolean;\n  collapseOnMobile: boolean;\n  onAction: TableProps<T>['onAction'];\n  selectRowOnContextMenu: TableProps<T>['selectRowOnContextMenu'];\n  cellHeight: string | undefined;\n  headerCellHeight: string | undefined;\n}\nexport const TableContext = createContext<TableContextValue>(null!);\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\ninterface Props {\n  index: number;\n  isHeader: boolean;\n}\nexport function useTableCellStyle({index, isHeader}: Props) {\n  const {\n    columns,\n    cellHeight = 'h-46',\n    headerCellHeight = 'h-46',\n  } = useContext(TableContext);\n  const column = columns[index];\n\n  const userPadding = column?.padding;\n\n  let justify = 'justify-start';\n  if (column?.align === 'center') {\n    justify = 'justify-center';\n  } else if (column?.align === 'end') {\n    justify = 'justify-end';\n  }\n\n  return clsx(\n    'flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2',\n    isHeader ? headerCellHeight : cellHeight,\n    column?.width ?? 'flex-1',\n    column?.maxWidth,\n    column?.minWidth,\n    justify,\n    userPadding,\n    column?.className\n  );\n}\n","import {useContext, useMemo} from 'react';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\nimport {RowContext} from '@common/datatable/column-config';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface TableCellProps {\n  rowIsHovered: boolean;\n  rowIndex: number;\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({\n  rowIndex,\n  rowIsHovered,\n  index,\n  item,\n  id,\n}: TableCellProps) {\n  const {columns} = useContext(TableContext);\n  const column = columns[index];\n\n  const rowContext: RowContext = useMemo(() => {\n    return {\n      index: rowIndex,\n      isHovered: rowIsHovered,\n      isPlaceholder: item.isPlaceholder,\n    };\n  }, [rowIndex, rowIsHovered, item.isPlaceholder]);\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: false,\n  });\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"gridcell\"\n      aria-colindex={index + 1}\n      id={id}\n      className={style}\n    >\n      <div className=\"overflow-x-hidden overflow-ellipsis min-w-0 w-full\">\n        {column.body(item, rowContext)}\n      </div>\n    </div>\n  );\n}\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {useGlobalListeners} from '@react-aria/utils';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\nimport {useIsDarkMode} from '@common/ui/themes/use-is-dark-mode';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\ninterface Props {\n  index: number;\n  isSelected: boolean;\n  isHeader?: boolean;\n}\nexport function useTableRowStyle({index, isSelected, isHeader}: Props) {\n  const isDarkMode = useIsDarkMode();\n  const isMobile = useIsMobileMediaQuery();\n  const {hideBorder, enableSelection, collapseOnMobile, onAction} =\n    useContext(TableContext);\n  const isFirst = index === 0;\n  return clsx(\n    'flex gap-x-16 break-inside-avoid outline-none border border-transparent',\n    onAction && 'cursor-pointer',\n    isMobile && collapseOnMobile && hideBorder\n      ? 'mb-8 pl-8 pr-0 rounded'\n      : 'px-16',\n    !hideBorder && 'border-b-divider',\n    !hideBorder && isFirst && 'border-t-divider',\n    isSelected &&\n      !isDarkMode &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    isSelected &&\n      isDarkMode &&\n      'bg-selected hover:bg-focus focus-visible:bg-focus',\n    !isSelected &&\n      !isHeader &&\n      (enableSelection || onAction) &&\n      'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport {TableContext} from './table-context';\nimport {TableCell} from './table-cell';\nimport {TableDataItem} from './types/table-data-item';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {usePointerEvents} from '../interactions/use-pointer-events';\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useTableRowStyle} from '@common/ui/tables/style/use-table-row-style';\nimport clsx from 'clsx';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T & {isPlaceholder?: boolean};\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n  className?: string;\n  style?: React.CSSProperties;\n}\nexport function TableRow({\n  item,\n  index,\n  renderAs,\n  className,\n  style,\n}: TableRowProps) {\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    enableSelection,\n    selectionStyle,\n    hideHeaderRow,\n  } = useContext(TableContext);\n\n  const isTouchDevice = useRef(false);\n  const isSelected = selectedRows.includes(item.id);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice.current &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle === 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice.current) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPointerDown: e => {\n      isTouchDevice.current = e.pointerType === 'touch';\n    },\n    onPress: handleRowTap,\n    onLongPress: enableSelection\n      ? () => {\n          if (isTouchDevice.current) {\n            toggleRow(item);\n          }\n        }\n      : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (selectRowOnContextMenu && enableSelection) {\n      if (!selectedRows.includes(item.id)) {\n        selectRow(item);\n      }\n    }\n    // prevent context menu on mobile\n    if (isTouchDevice.current) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const styleClassName = useTableRowStyle({index, isSelected});\n\n  const RowElement = renderAs || 'div';\n  return (\n    <RowElement\n      role=\"row\"\n      aria-rowindex={index + 1 + (hideHeaderRow ? 0 : 1)}\n      aria-selected={isSelected}\n      tabIndex={-1}\n      className={clsx(className, styleClassName)}\n      item={RowElement === 'div' ? (undefined as any) : item}\n      onDoubleClick={createEventHandler(doubleClickHandler)}\n      onKeyDown={createEventHandler(keyboardHandler)}\n      onContextMenu={createEventHandler(contextMenuHandler)}\n      onPointerEnter={createEventHandler(() => setIsHovered(true))}\n      onPointerLeave={createEventHandler(() => setIsHovered(false))}\n      style={style}\n      {...domProps}\n    >\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          rowIndex={index}\n          rowIsHovered={isHovered}\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport React, {useContext} from 'react';\nimport {Checkbox} from '@common/ui/forms/toggle/checkbox';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport const CheckboxColumnConfig: ColumnConfig<TableDataItem> = {\n  key: 'checkbox',\n  header: () => <SelectAllCheckbox />,\n  align: 'center',\n  width: 'w-24 flex-shrink-0',\n  body: (item, row) => {\n    if (row.isPlaceholder) {\n      return <Skeleton size=\"w-24 h-24\" variant=\"rect\" />;\n    }\n    return <SelectRowCheckbox item={item} />;\n  },\n};\n\ninterface SelectRowCheckboxProps {\n  item: TableDataItem;\n}\nfunction SelectRowCheckbox({item}: SelectRowCheckboxProps) {\n  const {selectedRows, toggleRow} = useContext(TableContext);\n  return (\n    <Checkbox\n      checked={selectedRows.includes(item.id)}\n      onChange={() => toggleRow(item)}\n    />\n  );\n}\n\nfunction SelectAllCheckbox() {\n  const {trans} = useTrans();\n\n  const {data, selectedRows, onSelectionChange} = useContext(TableContext);\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <Checkbox\n      aria-label={trans({message: 'Select all'})}\n      isIndeterminate={someRowsSelected}\n      checked={allRowsSelected}\n      onChange={() => {\n        if (allRowsSelected) {\n          onSelectionChange([]);\n        } else {\n          onSelectionChange(data.map(d => d.id));\n        }\n      }}\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {columns, sortDescriptor, onSortChange, enableSorting} =\n    useContext(TableContext);\n  const column = columns[index];\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: true,\n  });\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting && enableSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <div\n      role=\"columnheader\"\n      tabIndex={-1}\n      aria-colindex={index + 1}\n      aria-sort={ariaSort}\n      className={clsx(\n        style,\n        'text-muted font-medium text-xs',\n        allowSorting && 'cursor-pointer'\n      )}\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n    >\n      {column.hideHeader ? (\n        <div className=\"sr-only\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"inline-block ml-6 -mt-2\"\n            data-testid=\"table-sort-button\"\n            aria-hidden={!sortVisible}\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform'\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import {HeaderCell} from '@common/ui/tables/header-cell';\nimport React, {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport function TableHeaderRow() {\n  const {columns} = useContext(TableContext);\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={1}\n      tabIndex={-1}\n      className=\"flex gap-x-16 px-16\"\n    >\n      {columns.map((column, columnIndex) => (\n        <HeaderCell index={columnIndex} key={column.key} />\n      ))}\n    </div>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentPropsWithoutRef,\n  Fragment,\n  JSXElementConstructor,\n  MutableRefObject,\n  ReactElement,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\nimport {useInteractOutside} from '@react-aria/interactions';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {CheckboxColumnConfig} from '@common/ui/tables/checkbox-column-config';\nimport {TableHeaderRow} from '@common/ui/tables/table-header-row';\n\nexport interface TableProps<T extends TableDataItem>\n  extends ComponentPropsWithoutRef<'table'> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  meta?: any;\n  tableRef?: MutableRefObject<HTMLTableElement>;\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSorting?: boolean;\n  onDelete?: (items: T[]) => void;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  selectRowOnContextMenu?: boolean;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n  tableBody?: ReactElement<TableBodyProps>;\n  hideBorder?: boolean;\n  closeOnInteractOutside?: boolean;\n  collapseOnMobile?: boolean;\n  cellHeight?: string;\n  headerCellHeight?: string;\n}\nexport function Table<T extends TableDataItem>({\n  className,\n  columns: userColumns,\n  collapseOnMobile = true,\n  hideHeaderRow = false,\n  hideBorder = false,\n  data,\n  selectedRows: propsSelectedRows,\n  defaultSelectedRows: propsDefaultSelectedRows,\n  onSelectionChange: propsOnSelectionChange,\n  sortDescriptor: propsSortDescriptor,\n  onSortChange: propsOnSortChange,\n  enableSorting = true,\n  onDelete,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  ariaLabelledBy,\n  selectRowOnContextMenu,\n  onAction,\n  renderRowAs,\n  tableBody,\n  meta,\n  tableRef: propsTableRef,\n  closeOnInteractOutside = false,\n  cellHeight,\n  headerCellHeight,\n  ...domProps\n}: TableProps<T>) {\n  const isMobile = useIsMobileMediaQuery();\n  const isCollapsedMode = !!isMobile && collapseOnMobile;\n  if (isCollapsedMode) {\n    hideHeaderRow = true;\n    hideBorder = true;\n  }\n\n  const [selectedRows, onSelectionChange] = useControlledState(\n    propsSelectedRows,\n    propsDefaultSelectedRows || [],\n    propsOnSelectionChange,\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    propsSortDescriptor,\n    undefined,\n    propsOnSortChange,\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  const selectRow = useCallback(\n    // allow deselecting all rows by passing in null\n    (item: TableDataItem | null, merge?: boolean) => {\n      let newValues: (string | number)[] = [];\n      if (item) {\n        newValues = merge\n          ? [...selectedRows?.filter(id => id !== item.id), item.id]\n          : [item.id];\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  // add checkbox columns to config, if selection is enabled\n  const columns = useMemo(() => {\n    const filteredColumns = userColumns.filter(c => {\n      const visibleInMode = c.visibleInMode || 'regular';\n      if (visibleInMode === 'all') {\n        return true;\n      }\n      if (visibleInMode === 'compact' && isCollapsedMode) {\n        return true;\n      }\n      if (visibleInMode === 'regular' && !isCollapsedMode) {\n        return true;\n      }\n    });\n    const showCheckboxCell =\n      enableSelection && selectionStyle !== 'highlight' && !isMobile;\n    if (showCheckboxCell) {\n      filteredColumns.unshift(CheckboxColumnConfig);\n    }\n    return filteredColumns;\n  }, [isMobile, userColumns, enableSelection, selectionStyle, isCollapsedMode]);\n\n  const contextValue: TableContextValue<T> = {\n    isCollapsedMode,\n    cellHeight,\n    headerCellHeight,\n    hideBorder,\n    hideHeaderRow,\n    selectedRows,\n    onSelectionChange,\n    enableSorting,\n    enableSelection,\n    selectionStyle,\n    data,\n    columns,\n    sortDescriptor,\n    onSortChange,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    meta,\n    collapseOnMobile,\n  };\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const tableBodyProps: TableBodyProps = {\n    renderRowAs: renderRowAs as any,\n  };\n\n  if (!tableBody) {\n    tableBody = <BasicTableBody {...tableBodyProps} />;\n  } else {\n    tableBody = cloneElement(tableBody, tableBodyProps);\n  }\n\n  // deselect rows when clicking outside the table\n  const tableRef = useObjectRef(propsTableRef);\n  useInteractOutside({\n    ref: tableRef,\n    onInteractOutside: e => {\n      if (\n        closeOnInteractOutside &&\n        enableSelection &&\n        selectedRows?.length &&\n        // don't deselect if clicking on a dialog (for example is table row has a context menu)\n        !(e.target as HTMLElement).closest('[role=\"dialog\"]')\n      ) {\n        onSelectionChange([]);\n      }\n    },\n  });\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <div\n        {...mergeProps(domProps, navProps, {\n          onKeyDown: (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onSelectionChange([]);\n              }\n            } else if (e.key === 'Delete') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onDelete?.(\n                  data.filter(item => selectedRows?.includes(item.id)),\n                );\n              }\n            } else if (isCtrlKeyPressed(e) && e.key === 'a') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (enableSelection) {\n                onSelectionChange(data.map(item => item.id));\n              }\n            }\n          },\n        })}\n        role=\"grid\"\n        tabIndex={0}\n        aria-rowcount={data.length + 1}\n        aria-colcount={columns.length + 1}\n        ref={tableRef}\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'isolate select-none text-sm outline-none focus-visible:ring-2',\n        )}\n      >\n        {!hideHeaderRow && <TableHeaderRow />}\n        {tableBody}\n      </div>\n    </TableContext.Provider>\n  );\n}\n\nexport interface TableBodyProps {\n  renderRowAs?: TableProps<TableDataItem>['renderRowAs'];\n}\nfunction BasicTableBody({renderRowAs}: TableBodyProps) {\n  const {data} = useContext(TableContext);\n  return (\n    <Fragment>\n      {data.map((item, rowIndex) => (\n        <TableRow\n          item={item}\n          index={rowIndex}\n          key={item.id}\n          renderAs={renderRowAs}\n        />\n      ))}\n    </Fragment>\n  );\n}\n","import {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {FilterSelectControl} from '@common/datatable/filters/backend-filter';\n\nexport function SelectFilterPanel({\n  filter,\n}: FilterPanelProps<FilterSelectControl>) {\n  const {trans} = useTrans();\n\n  return (\n    <FormSelect\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      selectionMode=\"single\"\n      showSearchField={filter.control.showSearchField}\n      placeholder={\n        filter.control.placeholder\n          ? trans(filter.control.placeholder)\n          : undefined\n      }\n      searchPlaceholder={\n        filter.control.searchPlaceholder\n          ? trans(filter.control.searchPlaceholder)\n          : undefined\n      }\n    >\n      {filter.control.options.map(option => (\n        <Item key={option.key} value={option.key}>\n          <Trans {...option.label} />\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n","import {FormDateRangePicker} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {DatePickerFilterControl} from '@common/datatable/filters/backend-filter';\n\nexport function DateRangeFilterPanel({\n  filter,\n}: FilterPanelProps<DatePickerFilterControl>) {\n  return (\n    <FormDateRangePicker\n      min={filter.control.min}\n      max={filter.control.max}\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      granularity=\"day\"\n      closeDialogOnSelection={true}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport React, {\n  ComponentProps,\n  ComponentPropsWithoutRef,\n  forwardRef,\n} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {AvatarPlaceholderIcon} from '@common/auth/ui/account-settings/avatar/avatar-placeholder-icon';\n\ntype Size = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | string;\n\nexport interface AvatarProps extends ComponentPropsWithoutRef<any> {\n  className?: string;\n  src?: string;\n  label?: string;\n  circle?: boolean;\n  size?: Size;\n  link?: string;\n  fallback?: 'initials' | 'generic';\n  lazy?: boolean;\n}\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\n  (\n    {\n      className,\n      circle,\n      size = 'md',\n      src,\n      link,\n      label,\n      fallback = 'generic',\n      lazy = true,\n      ...domProps\n    },\n    ref,\n  ) => {\n    let renderedAvatar = src ? (\n      <img\n        ref={ref}\n        src={src}\n        alt={label}\n        loading={lazy ? 'lazy' : undefined}\n        className=\"block h-full w-full object-cover\"\n      />\n    ) : (\n      <div className=\"h-full w-full bg-alt dark:bg-chip\">\n        <AvatarPlaceholderIcon\n          viewBox=\"0 0 48 48\"\n          className=\"h-full w-full text-muted\"\n        />\n      </div>\n    );\n\n    if (label) {\n      renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\n    }\n\n    const wrapperProps: ComponentProps<any> = {\n      ...domProps,\n      className: clsx(\n        className,\n        'relative block overflow-hidden select-none flex-shrink-0',\n        getSizeClassName(size),\n        circle ? 'rounded-full' : 'rounded',\n      ),\n    };\n\n    return link ? (\n      <Link {...wrapperProps} to={link}>\n        {renderedAvatar}\n      </Link>\n    ) : (\n      <div {...wrapperProps}>{renderedAvatar}</div>\n    );\n  },\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    case 'lg':\n      return 'w-40 h-40';\n    case 'xl':\n      return 'w-60 h-60';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","import {\n  keepPreviousData,\n  useQuery,\n  UseQueryOptions,\n} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  results: NormalizedModel[];\n}\n\ninterface Params {\n  query?: string;\n  perPage?: number;\n  with?: string;\n}\n\nexport function useNormalizedModels(\n  endpoint: string,\n  queryParams: Params,\n  queryOptions?: Omit<\n    UseQueryOptions<Response, unknown, Response, [string, Params]>,\n    'queryKey' | 'queryFn'\n  > | null,\n) {\n  return useQuery({\n    queryKey: [endpoint, queryParams],\n    queryFn: () => fetchModels(endpoint, queryParams),\n    placeholderData: keepPreviousData,\n    ...queryOptions,\n  });\n}\n\nasync function fetchModels(endpoint: string, params: Params) {\n  return apiClient.get<Response>(endpoint, {params}).then(r => r.data);\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\ninterface Response extends BackendResponse {\n  model: NormalizedModel;\n}\n\nexport function useNormalizedModel(\n  endpoint: string,\n  queryParams?: Record<string, string>,\n  queryOptions?: {enabled?: boolean},\n) {\n  return useQuery({\n    queryKey: [endpoint, queryParams],\n    queryFn: () => fetchModel(endpoint, queryParams),\n    ...queryOptions,\n  });\n}\n\nasync function fetchModel(\n  endpoint: string,\n  params?: Record<string, string>,\n): Promise<Response> {\n  return apiClient.get(endpoint, {params}).then(r => r.data);\n}\n","import React, {ReactNode, useRef, useState} from 'react';\nimport {useTrans} from '../../i18n/use-trans';\nimport {Trans} from '../../i18n/trans';\nimport {Avatar} from '../images/avatar';\nimport {Tooltip} from '../tooltip/tooltip';\nimport {IconButton} from '../buttons/icon-button';\nimport {EditIcon} from '../../icons/material/Edit';\nimport {message} from '../../i18n/message';\nimport {Item} from './listbox/item';\nimport {useController, useFormContext} from 'react-hook-form';\nimport {useControlledState} from '@react-stately/utils';\nimport {getInputFieldClassNames} from './input-field/get-input-field-class-names';\nimport clsx from 'clsx';\nimport {Skeleton} from '../skeleton/skeleton';\nimport {useNormalizedModels} from '../../users/queries/use-normalized-models';\nimport {useNormalizedModel} from '../../users/queries/use-normalized-model';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '../animation/opacity-animation';\nimport {Select} from '@common/ui/forms/select/select';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\nimport {BaseFieldProps} from '@common/ui/forms/input-field/base-field-props';\n\ninterface NormalizedModelFieldProps {\n  label?: ReactNode;\n  className?: string;\n  background?: BaseFieldProps['background'];\n  value?: string | number;\n  placeholder?: MessageDescriptor;\n  searchPlaceholder?: MessageDescriptor;\n  defaultValue?: string | number;\n  onChange?: (value: string | number) => void;\n  invalid?: boolean;\n  errorMessage?: string;\n  description?: ReactNode;\n  autoFocus?: boolean;\n  queryParams?: Record<string, string>;\n  endpoint: string;\n  disabled?: boolean;\n  required?: boolean;\n}\nexport function NormalizedModelField({\n  label,\n  className,\n  background,\n  value,\n  defaultValue = '',\n  placeholder = message('Select item...'),\n  searchPlaceholder = message('Find an item...'),\n  onChange,\n  description,\n  errorMessage,\n  invalid,\n  autoFocus,\n  queryParams,\n  endpoint,\n  disabled,\n  required,\n}: NormalizedModelFieldProps) {\n  const inputRef = useRef<HTMLButtonElement>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedValue, setSelectedValue] = useControlledState(\n    value,\n    defaultValue,\n    onChange,\n  );\n  const query = useNormalizedModels(endpoint, {\n    query: inputValue,\n    ...queryParams,\n  });\n  const {trans} = useTrans();\n\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\n\n  if (selectedValue) {\n    return (\n      <div className={className}>\n        <div className={fieldClassNames.label}>{label}</div>\n        <div\n          className={clsx(\n            'rounded-input border p-8',\n            background,\n            invalid && 'border-danger',\n          )}\n        >\n          <AnimatePresence initial={false} mode=\"wait\">\n            <SelectedModelPreview\n              disabled={disabled}\n              endpoint={endpoint}\n              modelId={selectedValue}\n              queryParams={queryParams}\n              onEditClick={() => {\n                setSelectedValue('');\n                setInputValue('');\n                requestAnimationFrame(() => {\n                  inputRef.current?.focus();\n                  inputRef.current?.click();\n                });\n              }}\n            />\n          </AnimatePresence>\n        </div>\n        {description && !errorMessage && (\n          <div className={fieldClassNames.description}>{description}</div>\n        )}\n        {errorMessage && (\n          <div className={fieldClassNames.error}>{errorMessage}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Select\n      className={className}\n      showSearchField\n      invalid={invalid}\n      errorMessage={errorMessage}\n      description={description}\n      color=\"white\"\n      isAsync\n      background={background}\n      placeholder={trans(placeholder)}\n      searchPlaceholder={trans(searchPlaceholder)}\n      label={label}\n      isLoading={query.isFetching}\n      items={query.data?.results}\n      inputValue={inputValue}\n      onInputValueChange={setInputValue}\n      selectionMode=\"single\"\n      selectedValue={selectedValue}\n      onSelectionChange={setSelectedValue}\n      ref={inputRef}\n      autoFocus={autoFocus}\n      disabled={disabled}\n      required={required}\n    >\n      {model => (\n        <Item\n          value={model.id}\n          key={model.id}\n          description={model.description}\n          startIcon={<Avatar src={model.image} />}\n        >\n          {model.name}\n        </Item>\n      )}\n    </Select>\n  );\n}\n\ninterface SelectedModelPreviewProps {\n  modelId: string | number;\n  selectedValue?: number | string;\n  onEditClick?: () => void;\n  endpoint?: string;\n  disabled?: boolean;\n  queryParams?: NormalizedModelFieldProps['queryParams'];\n}\nfunction SelectedModelPreview({\n  modelId,\n  onEditClick,\n  endpoint,\n  disabled,\n  queryParams,\n}: SelectedModelPreviewProps) {\n  const {data, isLoading} = useNormalizedModel(\n    `${endpoint}/${modelId}`,\n    queryParams,\n  );\n\n  if (isLoading || !data?.model) {\n    return <LoadingSkeleton key=\"skeleton\" />;\n  }\n\n  return (\n    <m.div\n      className={clsx(\n        'flex items-center gap-10',\n        disabled && 'pointer-events-none cursor-not-allowed text-disabled',\n      )}\n      key=\"preview\"\n      {...opacityAnimation}\n    >\n      {data.model.image && <Avatar src={data.model.image} />}\n      <div>\n        <div className=\"text-sm leading-4\">{data.model.name}</div>\n        <div className=\"text-xs text-muted\">{data.model.description}</div>\n      </div>\n      <Tooltip label={<Trans message=\"Change item\" />}>\n        <IconButton\n          className=\"ml-auto text-muted\"\n          size=\"sm\"\n          onClick={onEditClick}\n          disabled={disabled}\n        >\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\n      <div className=\"max-h-[36px] flex-auto\">\n        <Skeleton className=\"text-xs\" />\n        <Skeleton className=\"max-h-8 text-xs\" />\n      </div>\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\n    </m.div>\n  );\n}\n\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\n  name: string;\n}\nexport function FormNormalizedModelField({\n  name,\n  ...fieldProps\n}: FormNormalizedModelFieldProps) {\n  const {clearErrors} = useFormContext();\n  const {\n    field: {onChange, value = ''},\n    fieldState: {invalid, error},\n  } = useController({\n    name,\n  });\n\n  return (\n    <NormalizedModelField\n      value={value}\n      onChange={value => {\n        onChange(value);\n        clearErrors(name);\n      }}\n      invalid={invalid}\n      errorMessage={error?.message}\n      {...fieldProps}\n    />\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\nimport {FilterSelectModelControl} from '@common/datatable/filters/backend-filter';\n\nexport function NormalizedModelFilterPanel({\n  filter,\n}: FilterPanelProps<FilterSelectModelControl>) {\n  return (\n    <FormNormalizedModelField\n      name={`${filter.key}.value`}\n      endpoint={`normalized-models/${filter.control.model}`}\n    />\n  );\n}\n","import {FilterOperator} from './backend-filter';\nimport {message} from '../../i18n/message';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\n  {\n    '=': message('is'),\n    '!=': message('is not'),\n    '>': message('is greater than'),\n    '>=': message('is greater than or equal to'),\n    '<': message('is less than'),\n    '<=': message('is less than or equal to'),\n    has: message('Include'),\n    doesntHave: message('Do not include'),\n    between: message('Is between'),\n    hasAll: message('Include all'),\n  };\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {FilterOperatorNames} from '@common/datatable/filters/filter-operator-names';\nimport {Fragment} from 'react';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {\n  FilterNumberInputControl,\n  FilterTextInputControl,\n} from '@common/datatable/filters/backend-filter';\n\nexport function InputFilterPanel({\n  filter,\n}: FilterPanelProps<FilterTextInputControl | FilterNumberInputControl>) {\n  const control = filter.control;\n  return (\n    <Fragment>\n      <FormSelect\n        selectionMode=\"single\"\n        name={`${filter.key}.operator`}\n        className=\"mb-14\"\n        size=\"sm\"\n        required\n      >\n        {filter.operators?.map(operator => (\n          <Item key={operator} value={operator}>\n            {<Trans {...FilterOperatorNames[operator]} />}\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        size=\"sm\"\n        name={`${filter.key}.value`}\n        type={filter.control.inputType}\n        min={'minValue' in control ? control.minValue : undefined}\n        max={'maxValue' in control ? control.maxValue : undefined}\n        minLength={'minLength' in control ? control.minLength : undefined}\n        maxLength={'maxLength' in control ? control.maxLength : undefined}\n        required\n      />\n    </Fragment>\n  );\n}\n","import React, {\n  Children,\n  cloneElement,\n  isValidElement,\n  ReactElement,\n} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\nexport interface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n  wrap?: boolean;\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n  wrap = true,\n}: ChipListProps) {\n  return (\n    <div\n      className={clsx(\n        'flex items-center gap-8',\n        wrap && 'flex-wrap',\n        className,\n      )}\n    >\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import {ChipValue} from './chip-field';\n\nexport function stringToChipValue(value: string | number): ChipValue {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {id: value, name: `${value}`, description: `${value}`};\n}\n","import React, {\n  HTMLAttributes,\n  Key,\n  ReactElement,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {useFocusManager} from '@react-aria/focus';\nimport clsx from 'clsx';\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport {ChipList} from './chip-list';\nimport {Field, FieldProps} from '../field';\nimport {Input} from '../input';\nimport {Chip, ChipProps} from './chip';\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\nimport {ProgressCircle} from '../../../progress/progress-circle';\nimport {useField} from '../use-field';\nimport {Avatar} from '../../../images/avatar';\nimport {Listbox} from '../../listbox/listbox';\nimport {useListbox} from '../../listbox/use-listbox';\nimport {BaseFieldPropsWithDom} from '../base-field-props';\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\nimport {createEventHandler} from '@common/utils/dom/create-event-handler';\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\nimport {stringToChipValue} from './string-to-chip-value';\nimport {Popover} from '../../../overlays/popover';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\n\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\n  invalid?: boolean;\n  errorMessage?: string;\n}\n\nexport type ChipFieldProps<T> = Omit<\n  ListboxProps,\n  'selectionMode' | 'displayWith'\n> &\n  Omit<\n    BaseFieldPropsWithDom<HTMLInputElement>,\n    'value' | 'onChange' | 'defaultValue'\n  > & {\n    value?: (ChipValue | string)[];\n    defaultValue?: (ChipValue | string)[];\n    displayWith?: (value: ChipValue) => ReactNode;\n    validateWith?: (value: ChipValue) => ChipValue;\n    allowCustomValue?: boolean;\n    showDropdownArrow?: boolean;\n    onChange?: (value: ChipValue[]) => void;\n    suggestions?: T[];\n    children?: ListBoxChildren<T>['children'];\n    placeholder?: string;\n    chipSize?: ChipProps['size'];\n    openMenuOnFocus?: boolean;\n    valueKey?: 'id' | 'name';\n    onChipClick?: (value: ChipValue) => void;\n  };\n\nfunction ChipFieldInner<T>(\n  props: ChipFieldProps<T>,\n  ref: Ref<HTMLInputElement>,\n) {\n  const fieldRef = useRef<HTMLDivElement>(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'sm',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    allowCustomValue = true,\n    showDropdownArrow,\n    onChipClick,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true,\n  });\n\n  const [value, onChange] = useChipFieldValueState(props);\n\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n\n  const loadingIndicator = (\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\n  );\n\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\n\n  const {fieldProps, inputProps} = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow,\n  });\n\n  return (\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input\n        ref={fieldRef}\n        className={clsx('flex flex-wrap items-center', fieldClassNames.input)}\n        onClick={() => {\n          // refocus input when clicking outside it, but while still inside chip field\n          inputRef.current?.focus();\n        }}\n      >\n        <ListWrapper\n          displayChipUsing={displayWith}\n          onChipClick={onChipClick}\n          items={value}\n          setItems={onChange}\n          chipSize={chipSize}\n        />\n        <ChipInput\n          size={props.size}\n          showEmptyMessage={showEmptyMessage}\n          inputProps={inputProps}\n          inputValue={inputValue}\n          onInputValueChange={onInputValueChange}\n          fieldRef={fieldRef}\n          inputRef={inputRef}\n          chips={value}\n          setChips={onChange}\n          validateWith={validateWith}\n          isLoading={isLoading}\n          suggestions={suggestions}\n          placeholder={placeholder}\n          openMenuOnFocus={openMenuOnFocus}\n          listboxIsOpen={listboxIsOpen}\n          setListboxIsOpen={setListboxIsOpen}\n          allowCustomValue={allowCustomValue}\n        >\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>\n  );\n}\n\ninterface ListWrapperProps {\n  items: ChipValue[];\n  setItems: (items: ChipValue[]) => void;\n  displayChipUsing: (value: ChipValue) => ReactNode;\n  chipSize?: ChipProps['size'];\n  onChipClick?: (value: ChipValue) => void;\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n  onChipClick,\n}: ListWrapperProps) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(\n    (key: Key) => {\n      const i = items.findIndex(cr => cr.id === key);\n      const newItems = [...items];\n      if (i > -1) {\n        newItems.splice(i, 1);\n        setItems(newItems);\n      }\n      return newItems;\n    },\n    [items, setItems],\n  );\n\n  return (\n    <ChipList\n      className={clsx(\n        'max-w-full flex-shrink-0 flex-wrap',\n        chipSize === 'xs' ? 'my-6' : 'my-8',\n      )}\n      size={chipSize}\n      selectable\n    >\n      {items.map(item => (\n        <Chip\n          key={item.id}\n          errorMessage={item.errorMessage}\n          adornment={item.image ? <Avatar circle src={item.image} /> : null}\n          onClick={() => onChipClick?.(item)}\n          onRemove={() => {\n            const newItems = removeItem(item.id);\n            if (newItems.length) {\n              // focus previous chip\n              manager?.focusPrevious({tabbable: true});\n            } else {\n              // focus input\n              manager?.focusLast();\n            }\n          }}\n        >\n          {displayChipUsing(item)}\n        </Chip>\n      ))}\n    </ChipList>\n  );\n}\n\ninterface ChipInputProps<T> {\n  showEmptyMessage?: boolean;\n  inputProps: ReturnType<typeof useField>['inputProps'];\n  inputValue?: string;\n  onInputValueChange?: (value: string) => void;\n  fieldRef: RefObject<HTMLDivElement>;\n  inputRef: RefObject<HTMLInputElement>;\n  chips: ChipValue[];\n  setChips: (items: ChipValue[]) => void;\n  validateWith?: (value: ChipValue) => ChipValue;\n  isLoading?: boolean;\n  suggestions?: T[];\n  placeholder?: string;\n  openMenuOnFocus?: boolean;\n  listboxIsOpen: boolean;\n  setListboxIsOpen: (value: boolean) => void;\n  allowCustomValue: boolean;\n  children: ListBoxChildren<T>['children'];\n  size: FieldProps['size'];\n}\nfunction ChipInput<T>(props: ChipInputProps<T>) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n    allowCustomValue,\n    isLoading,\n    size,\n  } = props;\n  const manager = useFocusManager();\n\n  const addItems = useCallback(\n    (items?: ChipValue[]) => {\n      items = (items || []).filter(item => {\n        const invalid = !item || !item.id || !item.name;\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n        return !alreadyExists && !invalid;\n      });\n      if (!items.length) return;\n\n      if (validateWith) {\n        items = items.map(item => validateWith(item));\n      }\n      setChips([...chips, ...items]);\n    },\n    [chips, setChips, validateWith],\n  );\n\n  const listbox = useListbox<T>({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value as string);\n    },\n  });\n\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue,\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange,\n  } = listbox;\n\n  const handleItemSelection = (textValue: string) => {\n    const option =\n      collection.size && activeIndex != null\n        ? [...collection.values()][activeIndex]\n        : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else if (allowCustomValue) {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\n    useListboxKeyboardNavigation(listbox);\n\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n\n  return (\n    <Listbox\n      listbox={listbox}\n      mobileOverlay={Popover}\n      isLoading={isLoading}\n      onPointerDown={e => {\n        // prevent focus from leaving input when scrolling listbox via mouse\n        e.preventDefault();\n      }}\n    >\n      <input\n        type=\"text\"\n        className={clsx(\n          'mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none',\n          size === 'xs' ? 'h-20' : 'h-30',\n        )}\n        placeholder={placeholder}\n        {...mergeProps(inputProps, {\n          ref: inputRef,\n          value: inputValue,\n          onChange: onInputChange,\n          onPaste: e => {\n            const paste = e.clipboardData.getData('text');\n            const emails = paste.match(\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi,\n            );\n            if (emails) {\n              e.preventDefault();\n              const selection = window.getSelection();\n              if (selection?.rangeCount) {\n                selection.deleteFromDocument();\n                addItems(emails.map(email => stringToChipValue(email)));\n              }\n            }\n          },\n          'aria-autocomplete': 'list',\n          'aria-controls': isOpen ? listboxId : undefined,\n          autoComplete: 'off',\n          autoCorrect: 'off',\n          spellCheck: 'false',\n          onKeyDown: e => {\n            const input = e.target as HTMLInputElement;\n\n            if (e.key === 'Enter') {\n              // prevent form submitting\n              e.preventDefault();\n              // add chip from selected listbox option or current input text value\n              handleItemSelection(input.value);\n              return;\n            }\n\n            // on escape, clear input and close dropdown\n            if (e.key === 'Escape' && isOpen) {\n              setIsOpen(false);\n              setInputValue('');\n            }\n\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n            if (\n              e.key === 'ArrowUp' &&\n              isOpen &&\n              (activeIndex === 0 || activeIndex == null)\n            ) {\n              setActiveIndex(null);\n              return;\n            }\n\n            // block left and right arrows from navigating in input, if focus is on listbox\n            if (\n              activeIndex != null &&\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\n            ) {\n              e.preventDefault();\n              return;\n            }\n\n            // move focus on the last chip, if focus is at the  start of input\n            if (\n              (e.key === 'ArrowLeft' ||\n                e.key === 'Backspace' ||\n                e.key === 'Delete') &&\n              input.selectionStart === 0 &&\n              activeIndex == null &&\n              chips.length\n            ) {\n              manager?.focusPrevious({tabbable: true});\n              return;\n            }\n\n            // fallthrough to listbox navigation handlers for arrow keys\n            const handled = handleTriggerKeyDown(e);\n            if (!handled) {\n              handleListboxKeyboardNavigation(e);\n            }\n          },\n          onFocus: handleFocusAndClick,\n          onClick: handleFocusAndClick,\n        } as HTMLAttributes<HTMLInputElement>)}\n      />\n    </Listbox>\n  );\n}\n\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey,\n}: ChipFieldProps<any>) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(\n    (value: ChipValue[]) => {\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n      onChange?.(newValue as any);\n    },\n    [onChange, valueKey],\n  );\n\n  return useControlledState<ChipValue[]>(\n    !propsValue ? undefined : propsValue,\n    propsDefaultValue || [],\n    handleChange,\n  );\n}\n\nfunction mixedValueToChipValue(\n  value?: (string | number | ChipValue)[] | null,\n): ChipValue[] | undefined {\n  if (value == null) {\n    return undefined;\n  }\n\n  return value.map(v => {\n    return typeof v !== 'object' ? stringToChipValue(v as string) : v;\n  });\n}\n\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>},\n) => ReactElement;\n","import {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {ChipField, ChipFieldProps} from './chip-field';\n\nexport type FormChipFieldProps<T> = ChipFieldProps<T> & {\n  name: string;\n};\n\nexport function FormChipField<T>({children, ...props}: FormChipFieldProps<T>) {\n  const {\n    field: {onChange, onBlur, value = [], ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<ChipFieldProps<T>> = {\n    onChange,\n    onBlur,\n    value,\n    invalid,\n    errorMessage: error?.message,\n  };\n\n  return (\n    <ChipField ref={ref} {...mergeProps(formProps, props)}>\n      {children}\n    </ChipField>\n  );\n}\n","import {Item} from '@common/ui/forms/listbox/item';\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {FilterChipFieldControl} from '@common/datatable/filters/backend-filter';\nimport {Trans} from '@common/i18n/trans';\n\nexport function ChipFieldFilterPanel({\n  filter,\n}: FilterPanelProps<FilterChipFieldControl>) {\n  const {trans} = useTrans();\n  return (\n    <FormChipField\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      valueKey=\"id\"\n      allowCustomValue={false}\n      showDropdownArrow\n      placeholder={\n        filter.control.placeholder\n          ? trans(filter.control.placeholder)\n          : undefined\n      }\n      displayWith={chip =>\n        filter.control.options.find(o => o.key === chip.id)?.label.message\n      }\n      suggestions={filter.control.options.map(o => ({\n        id: o.key,\n        name: o.label.message,\n      }))}\n    >\n      {chip => (\n        <Item key={chip.id} value={chip.id}>\n          {<Trans message={chip.name} />}\n        </Item>\n      )}\n    </FormChipField>\n  );\n}\n","import {BackendFilter, FilterControlType} from '../backend-filter';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {Button} from '@common/ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {Trans} from '@common/i18n/trans';\nimport clsx from 'clsx';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"paper\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.control.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'border-r border-r-primary-light mr-8 pr-8'\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import {DialogTrigger} from '../../../ui/overlays/dialog/dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {ReactNode} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useDialogContext} from '../../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../../ui/overlays/dialog/dialog-header';\nimport {Trans} from '../../../i18n/trans';\nimport {DialogBody} from '../../../ui/overlays/dialog/dialog-body';\nimport {Form} from '../../../ui/forms/form';\nimport {DialogFooter} from '../../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../../ui/buttons/button';\nimport {FilterListControlProps} from './filter-list-control';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody padding=\"px-14 pt-14 pb-4 max-h-288\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"text-muted text-xs mb-14\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {Fragment, memo} from 'react';\nimport {useNumberFormatter} from './use-number-formatter';\nimport {NumberFormatOptions} from '@internationalized/number';\nimport {shallowEqual} from '../utils/shallow-equal';\n\ninterface FormattedNumberProps extends NumberFormatOptions {\n  value: number;\n}\nexport const FormattedNumber = memo(\n  ({value, ...options}: FormattedNumberProps) => {\n    const formatter = useNumberFormatter(options);\n\n    if (isNaN(value)) {\n      value = 0;\n    }\n\n    return <Fragment>{formatter.format(value)}</Fragment>;\n  },\n  shallowEqual\n);\n","import {\n  BackendFilter,\n  CustomFilterControl,\n  DatePickerFilterControl,\n  FilterBooleanToggleControl,\n  FilterChipFieldControl,\n  FilterControl,\n  FilterControlType,\n  FilterNumberInputControl,\n  FilterOperator,\n  FilterSelectControl,\n  FilterSelectModelControl,\n  FilterTextInputControl,\n} from '../backend-filter';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {Trans} from '@common/i18n/trans';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {Avatar} from '@common/ui/images/avatar';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {DateRangeFilterPanel} from '../panels/date-range-filter-panel';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\nimport {AbsoluteDateRange} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useNormalizedModel} from '@common/users/queries/use-normalized-model';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {ChipFieldFilterPanel} from '@common/datatable/filters/panels/chip-field-filter-panel';\nimport {FormattedNumber} from '@common/i18n/formatted-number';\n\nexport interface FilterListControlProps<T = unknown, E = FilterControl> {\n  filter: BackendFilter<E>;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any, any>) {\n  switch (props.filter.control.type) {\n    case FilterControlType.DateRangePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select:\n      return <SelectControl {...props} />;\n    case FilterControlType.ChipField:\n      return <ChipFieldControl {...props} />;\n    case FilterControlType.Input:\n      return <InputControl {...props} />;\n    case FilterControlType.SelectModel:\n      return <SelectModelControl {...props} />;\n    case FilterControlType.Custom:\n      const Control = (props.filter.control as CustomFilterControl).listItem;\n      return <Control {...props} />;\n    default:\n      return null;\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<\n    Required<AbsoluteDateRange>,\n    DatePickerFilterControl\n  >,\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateRangeFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<\n  FilterBooleanToggleControl['defaultValue'],\n  FilterBooleanToggleControl\n>) {\n  // todo: toggle control on or off here\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: filter.control.defaultValue});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(\n  props: FilterListControlProps<Key, FilterSelectControl>,\n) {\n  const {filter, value} = props;\n  const option = filter.control.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={option ? <Trans {...option.label} /> : null}\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction ChipFieldControl(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={<MultipleValues {...props} />}\n      panel={<ChipFieldFilterPanel filter={props.filter} />}\n    />\n  );\n}\n\nfunction MultipleValues(\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\n) {\n  const {trans} = useTrans();\n  const {filter, value} = props;\n  const options = value.map(v => filter.control.options.find(o => o.key === v));\n  const maxShownCount = 3;\n  const notShownCount = value.length - maxShownCount;\n\n  // translate names, add commas and limit to 3\n  const names = (\n    <Fragment>\n      {options\n        .filter(Boolean)\n        .slice(0, maxShownCount)\n        .map((o, i) => {\n          let name = '';\n          if (i !== 0) {\n            name += ', ';\n          }\n          name += trans(o!.label);\n          return name;\n        })}\n    </Fragment>\n  );\n\n  // indicate that there are some names not shown\n  return notShownCount > 0 ? (\n    <Trans\n      message=\":names + :count more\"\n      values={{names: names, count: notShownCount}}\n    />\n  ) : (\n    names\n  );\n}\n\nfunction InputControl(\n  props: FilterListControlProps<\n    string,\n    FilterTextInputControl | FilterNumberInputControl\n  >,\n) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  const formattedValue =\n    filter.control.inputType === 'number' ? (\n      <FormattedNumber value={value as any} />\n    ) : (\n      value\n    );\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {formattedValue}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(\n  props: FilterListControlProps<string, FilterSelectModelControl>,\n) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(\n    `normalized-models/${filter.control.model}/${value}`,\n    undefined,\n    {enabled: !!value},\n  );\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar size=\"xs\" src={data?.model.image} className=\"mr-6\" />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key);\n\n        if (!filter) return null;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key}>\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey != null ? field.valueKey : field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  isSameDay,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timezone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  clear: () => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean,\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<V, CV = V> {\n  value?: V | null | '';\n  defaultValue?: V | null;\n  onChange?: (value: CV | null) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>,\n): BaseDatePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue,\n  );\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value || now,\n    props.defaultValue || now,\n    value => {\n      setIsPlaceholder(false);\n      setStateValue?.(value);\n    },\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(internalValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = internalValue\n        ? internalValue.set(newValue)\n        : toZoned(newValue, timezone);\n      setInternalValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setInternalValue, min, max, internalValue, timezone],\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\n    [internalValue, isPlaceholder],\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection],\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {useTrans} from '@common/i18n/use-trans';\nimport clsx from 'clsx';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const now = useCurrentDateTime();\n\n  const footer = showCalendarFooter && (\n    <DialogFooter\n      padding=\"px-14 pb-14\"\n      startAction={\n        <Button\n          disabled={state.isPlaceholder}\n          variant=\"text\"\n          color=\"primary\"\n          onClick={() => {\n            state.clear();\n          }}\n        >\n          <Trans message=\"Clear\" />\n        </Button>\n      }\n    >\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        onClick={() => {\n          state.setSelectedValue(now);\n          state.setCalendarIsOpen(false);\n        }}\n      >\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody\n          className=\"flex items-start gap-40\"\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\n        >\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\n        }\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  const entries: FileSystemEntry[] = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry as FileSystemFileEntry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n    }\n  }\n}\n\nasync function* getEntriesFromDirectory(\n  item: FileSystemDirectoryEntry\n): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '@common/utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\nimport {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<UploadedFile[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\n  allowDragEventsFromItself?: boolean;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  onDragOver?: (\n    target: MixedDraggable,\n    e: React.DragEvent<HTMLElement>\n  ) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    const allowEventsOnSelf =\n      options.allowDragEventsFromItself ||\n      ref.current !== draggable.ref?.current;\n\n    return !!(\n      draggable?.type &&\n      allowEventsOnSelf &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {Permission} from './permission';\nimport {Subscription} from '../billing/subscription';\nimport {Role} from './role';\nimport {SocialProfile} from './social-profile';\nimport {AccessToken} from './access-token';\nimport type {ActiveSession} from '@common/auth/ui/account-settings/sessions-panel/requests/use-user-sessions';\n\nexport const USER_MODEL = 'user';\n\nexport interface User {\n  id: number;\n  display_name: string;\n  username?: string;\n  first_name?: string;\n  last_name?: string;\n  avatar?: string;\n  email_verified_at: string;\n  permissions?: Permission[];\n  email: string;\n  password: string;\n  language: string;\n  timezone: string;\n  country: string;\n  created_at: string;\n  updated_at: string;\n  subscriptions?: Omit<Subscription, 'user'>[];\n  roles: Role[];\n  social_profiles: SocialProfile[];\n  tokens?: AccessToken[];\n  has_password: boolean;\n  available_space: number | null;\n  unread_notifications_count?: number;\n  card_last_four?: number;\n  card_brand?: string;\n  card_expires?: string;\n  model_type: typeof USER_MODEL;\n  banned_at?: string;\n  followed_users?: Omit<User, 'followed_users' | 'followers'>[];\n  followers_count?: number;\n  followed_users_count?: number;\n  followers?: Omit<User, 'followed_users' | 'followers'>[];\n  last_login?: ActiveSession;\n  bans?: {\n    id: number;\n    comment: string;\n    expired_at?: string;\n  }[];\n  two_factor_confirmed_at?: string;\n  two_factor_recovery_codes?: string[];\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const LinkIcon = createSvgIcon(\n  <path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\" />\n, 'LinkOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreVertIcon = createSvgIcon(\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'MoreVertOutlined');\n","function memo(getDeps, fn, opts) {\n  let deps = opts.initialDeps ?? [];\n  let result;\n  return () => {\n    var _a, _b, _c, _d;\n    let depTime;\n    if (opts.key && ((_a = opts.debug) == null ? void 0 : _a.call(opts)))\n      depTime = Date.now();\n    const newDeps = getDeps();\n    const depsChanged = newDeps.length !== deps.length || newDeps.some((dep, index) => deps[index] !== dep);\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    let resultTime;\n    if (opts.key && ((_b = opts.debug) == null ? void 0 : _b.call(opts)))\n      resultTime = Date.now();\n    result = fn(...newDeps);\n    if (opts.key && ((_c = opts.debug) == null ? void 0 : _c.call(opts))) {\n      const depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      const resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      const resultFpsPercentage = resultEndTime / 16;\n      const pad = (str, num) => {\n        str = String(str);\n        while (str.length < num) {\n          str = \" \" + str;\n        }\n        return str;\n      };\n      console.info(\n        `%c⏱ ${pad(resultEndTime, 5)} /${pad(depEndTime, 5)} ms`,\n        `\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(\n          0,\n          Math.min(120 - 120 * resultFpsPercentage, 120)\n        )}deg 100% 31%);`,\n        opts == null ? void 0 : opts.key\n      );\n    }\n    (_d = opts == null ? void 0 : opts.onChange) == null ? void 0 : _d.call(opts, result);\n    return result;\n  };\n}\nfunction notUndefined(value, msg) {\n  if (value === void 0) {\n    throw new Error(`Unexpected undefined${msg ? `: ${msg}` : \"\"}`);\n  } else {\n    return value;\n  }\n}\nconst approxEqual = (a, b) => Math.abs(a - b) < 1;\nexport {\n  approxEqual,\n  memo,\n  notUndefined\n};\n//# sourceMappingURL=utils.js.map\n","import { memo, notUndefined, approxEqual } from \"./utils.js\";\nconst defaultKeyExtractor = (index) => index;\nconst defaultRangeExtractor = (range) => {\n  const start = Math.max(range.startIndex - range.overscan, 0);\n  const end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  const arr = [];\n  for (let i = start; i <= end; i++) {\n    arr.push(i);\n  }\n  return arr;\n};\nconst observeElementRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = (rect) => {\n    const { width, height } = rect;\n    cb({ width: Math.round(width), height: Math.round(height) });\n  };\n  handler(element.getBoundingClientRect());\n  if (typeof ResizeObserver === \"undefined\") {\n    return () => {\n    };\n  }\n  const observer = new ResizeObserver((entries) => {\n    const entry = entries[0];\n    if (entry == null ? void 0 : entry.borderBoxSize) {\n      const box = entry.borderBoxSize[0];\n      if (box) {\n        handler({ width: box.inlineSize, height: box.blockSize });\n        return;\n      }\n    }\n    handler(element.getBoundingClientRect());\n  });\n  observer.observe(element, { box: \"border-box\" });\n  return () => {\n    observer.unobserve(element);\n  };\n};\nconst observeWindowRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb({ width: element.innerWidth, height: element.innerHeight });\n  };\n  handler();\n  element.addEventListener(\"resize\", handler, {\n    passive: true\n  });\n  return () => {\n    element.removeEventListener(\"resize\", handler);\n  };\n};\nconst observeElementOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb(element[instance.options.horizontal ? \"scrollLeft\" : \"scrollTop\"]);\n  };\n  handler();\n  element.addEventListener(\"scroll\", handler, {\n    passive: true\n  });\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n  };\n};\nconst observeWindowOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb(element[instance.options.horizontal ? \"scrollX\" : \"scrollY\"]);\n  };\n  handler();\n  element.addEventListener(\"scroll\", handler, {\n    passive: true\n  });\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n  };\n};\nconst measureElement = (element, entry, instance) => {\n  if (entry == null ? void 0 : entry.borderBoxSize) {\n    const box = entry.borderBoxSize[0];\n    if (box) {\n      const size = Math.round(\n        box[instance.options.horizontal ? \"inlineSize\" : \"blockSize\"]\n      );\n      return size;\n    }\n  }\n  return Math.round(\n    element.getBoundingClientRect()[instance.options.horizontal ? \"width\" : \"height\"]\n  );\n};\nconst windowScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nconst elementScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nclass Virtualizer {\n  constructor(opts) {\n    this.unsubs = [];\n    this.scrollElement = null;\n    this.isScrolling = false;\n    this.isScrollingTimeoutId = null;\n    this.scrollToIndexTimeoutId = null;\n    this.measurementsCache = [];\n    this.itemSizeCache = /* @__PURE__ */ new Map();\n    this.pendingMeasuredCacheIndexes = [];\n    this.scrollDirection = null;\n    this.scrollAdjustments = 0;\n    this.measureElementCache = /* @__PURE__ */ new Map();\n    this.observer = /* @__PURE__ */ (() => {\n      let _ro = null;\n      const get = () => {\n        if (_ro) {\n          return _ro;\n        } else if (typeof ResizeObserver !== \"undefined\") {\n          return _ro = new ResizeObserver((entries) => {\n            entries.forEach((entry) => {\n              this._measureElement(entry.target, entry);\n            });\n          });\n        } else {\n          return null;\n        }\n      };\n      return {\n        disconnect: () => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.disconnect();\n        },\n        observe: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.observe(target, { box: \"border-box\" });\n        },\n        unobserve: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.unobserve(target);\n        }\n      };\n    })();\n    this.range = null;\n    this.setOptions = (opts2) => {\n      Object.entries(opts2).forEach(([key, value]) => {\n        if (typeof value === \"undefined\")\n          delete opts2[key];\n      });\n      this.options = {\n        debug: false,\n        initialOffset: 0,\n        overscan: 1,\n        paddingStart: 0,\n        paddingEnd: 0,\n        scrollPaddingStart: 0,\n        scrollPaddingEnd: 0,\n        horizontal: false,\n        getItemKey: defaultKeyExtractor,\n        rangeExtractor: defaultRangeExtractor,\n        onChange: () => {\n        },\n        measureElement,\n        initialRect: { width: 0, height: 0 },\n        scrollMargin: 0,\n        scrollingDelay: 150,\n        indexAttribute: \"data-index\",\n        initialMeasurementsCache: [],\n        lanes: 1,\n        ...opts2\n      };\n    };\n    this.notify = (sync) => {\n      var _a, _b;\n      (_b = (_a = this.options).onChange) == null ? void 0 : _b.call(_a, this, sync);\n    };\n    this.maybeNotify = memo(\n      () => {\n        this.calculateRange();\n        return [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ];\n      },\n      (isScrolling) => {\n        this.notify(isScrolling);\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"maybeNotify\",\n        debug: () => this.options.debug,\n        initialDeps: [\n          this.isScrolling,\n          this.range ? this.range.startIndex : null,\n          this.range ? this.range.endIndex : null\n        ]\n      }\n    );\n    this.cleanup = () => {\n      this.unsubs.filter(Boolean).forEach((d) => d());\n      this.unsubs = [];\n      this.scrollElement = null;\n    };\n    this._didMount = () => {\n      this.measureElementCache.forEach(this.observer.observe);\n      return () => {\n        this.observer.disconnect();\n        this.cleanup();\n      };\n    };\n    this._willUpdate = () => {\n      const scrollElement = this.options.getScrollElement();\n      if (this.scrollElement !== scrollElement) {\n        this.cleanup();\n        this.scrollElement = scrollElement;\n        this._scrollToOffset(this.scrollOffset, {\n          adjustments: void 0,\n          behavior: void 0\n        });\n        this.unsubs.push(\n          this.options.observeElementRect(this, (rect) => {\n            this.scrollRect = rect;\n            this.maybeNotify();\n          })\n        );\n        this.unsubs.push(\n          this.options.observeElementOffset(this, (offset) => {\n            this.scrollAdjustments = 0;\n            if (this.scrollOffset === offset) {\n              return;\n            }\n            if (this.isScrollingTimeoutId !== null) {\n              clearTimeout(this.isScrollingTimeoutId);\n              this.isScrollingTimeoutId = null;\n            }\n            this.isScrolling = true;\n            this.scrollDirection = this.scrollOffset < offset ? \"forward\" : \"backward\";\n            this.scrollOffset = offset;\n            this.maybeNotify();\n            this.isScrollingTimeoutId = setTimeout(() => {\n              this.isScrollingTimeoutId = null;\n              this.isScrolling = false;\n              this.scrollDirection = null;\n              this.maybeNotify();\n            }, this.options.scrollingDelay);\n          })\n        );\n      }\n    };\n    this.getSize = () => {\n      return this.scrollRect[this.options.horizontal ? \"width\" : \"height\"];\n    };\n    this.memoOptions = memo(\n      () => [\n        this.options.count,\n        this.options.paddingStart,\n        this.options.scrollMargin,\n        this.options.getItemKey\n      ],\n      (count, paddingStart, scrollMargin, getItemKey) => {\n        this.pendingMeasuredCacheIndexes = [];\n        return {\n          count,\n          paddingStart,\n          scrollMargin,\n          getItemKey\n        };\n      },\n      {\n        key: false\n      }\n    );\n    this.getFurthestMeasurement = (measurements, index) => {\n      const furthestMeasurementsFound = /* @__PURE__ */ new Map();\n      const furthestMeasurements = /* @__PURE__ */ new Map();\n      for (let m = index - 1; m >= 0; m--) {\n        const measurement = measurements[m];\n        if (furthestMeasurementsFound.has(measurement.lane)) {\n          continue;\n        }\n        const previousFurthestMeasurement = furthestMeasurements.get(\n          measurement.lane\n        );\n        if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n          furthestMeasurements.set(measurement.lane, measurement);\n        } else if (measurement.end < previousFurthestMeasurement.end) {\n          furthestMeasurementsFound.set(measurement.lane, true);\n        }\n        if (furthestMeasurementsFound.size === this.options.lanes) {\n          break;\n        }\n      }\n      return furthestMeasurements.size === this.options.lanes ? Array.from(furthestMeasurements.values()).sort((a, b) => {\n        if (a.end === b.end) {\n          return a.index - b.index;\n        }\n        return a.end - b.end;\n      })[0] : void 0;\n    };\n    this.getMeasurements = memo(\n      () => [this.memoOptions(), this.itemSizeCache],\n      ({ count, paddingStart, scrollMargin, getItemKey }, itemSizeCache) => {\n        const min = this.pendingMeasuredCacheIndexes.length > 0 ? Math.min(...this.pendingMeasuredCacheIndexes) : 0;\n        this.pendingMeasuredCacheIndexes = [];\n        const measurements = this.measurementsCache.slice(0, min);\n        for (let i = min; i < count; i++) {\n          const key = getItemKey(i);\n          const furthestMeasurement = this.options.lanes === 1 ? measurements[i - 1] : this.getFurthestMeasurement(measurements, i);\n          const start = furthestMeasurement ? furthestMeasurement.end : paddingStart + scrollMargin;\n          const measuredSize = itemSizeCache.get(key);\n          const size = typeof measuredSize === \"number\" ? measuredSize : this.options.estimateSize(i);\n          const end = start + size;\n          const lane = furthestMeasurement ? furthestMeasurement.lane : i % this.options.lanes;\n          measurements[i] = {\n            index: i,\n            start,\n            size,\n            end,\n            key,\n            lane\n          };\n        }\n        this.measurementsCache = measurements;\n        return measurements;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getMeasurements\",\n        debug: () => this.options.debug\n      }\n    );\n    this.calculateRange = memo(\n      () => [this.getMeasurements(), this.getSize(), this.scrollOffset],\n      (measurements, outerSize, scrollOffset) => {\n        return this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n          measurements,\n          outerSize,\n          scrollOffset\n        }) : null;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"calculateRange\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getIndexes = memo(\n      () => [\n        this.options.rangeExtractor,\n        this.calculateRange(),\n        this.options.overscan,\n        this.options.count\n      ],\n      (rangeExtractor, range, overscan, count) => {\n        return range === null ? [] : rangeExtractor({\n          ...range,\n          overscan,\n          count\n        });\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.indexFromElement = (node) => {\n      const attributeName = this.options.indexAttribute;\n      const indexStr = node.getAttribute(attributeName);\n      if (!indexStr) {\n        console.warn(\n          `Missing attribute name '${attributeName}={index}' on measured element.`\n        );\n        return -1;\n      }\n      return parseInt(indexStr, 10);\n    };\n    this._measureElement = (node, entry) => {\n      const item = this.measurementsCache[this.indexFromElement(node)];\n      if (!item || !node.isConnected) {\n        this.measureElementCache.forEach((cached, key) => {\n          if (cached === node) {\n            this.observer.unobserve(node);\n            this.measureElementCache.delete(key);\n          }\n        });\n        return;\n      }\n      const prevNode = this.measureElementCache.get(item.key);\n      if (prevNode !== node) {\n        if (prevNode) {\n          this.observer.unobserve(prevNode);\n        }\n        this.observer.observe(node);\n        this.measureElementCache.set(item.key, node);\n      }\n      const measuredItemSize = this.options.measureElement(node, entry, this);\n      this.resizeItem(item, measuredItemSize);\n    };\n    this.resizeItem = (item, size) => {\n      const itemSize = this.itemSizeCache.get(item.key) ?? item.size;\n      const delta = size - itemSize;\n      if (delta !== 0) {\n        if (item.start < this.scrollOffset + this.scrollAdjustments) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"correction\", delta);\n          }\n          this._scrollToOffset(this.scrollOffset, {\n            adjustments: this.scrollAdjustments += delta,\n            behavior: void 0\n          });\n        }\n        this.pendingMeasuredCacheIndexes.push(item.index);\n        this.itemSizeCache = new Map(this.itemSizeCache.set(item.key, size));\n        this.notify(false);\n      }\n    };\n    this.measureElement = (node) => {\n      if (!node) {\n        return;\n      }\n      this._measureElement(node, void 0);\n    };\n    this.getVirtualItems = memo(\n      () => [this.getIndexes(), this.getMeasurements()],\n      (indexes, measurements) => {\n        const virtualItems = [];\n        for (let k = 0, len = indexes.length; k < len; k++) {\n          const i = indexes[k];\n          const measurement = measurements[i];\n          virtualItems.push(measurement);\n        }\n        return virtualItems;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualItemForOffset = (offset) => {\n      const measurements = this.getMeasurements();\n      return notUndefined(\n        measurements[findNearestBinarySearch(\n          0,\n          measurements.length - 1,\n          (index) => notUndefined(measurements[index]).start,\n          offset\n        )]\n      );\n    };\n    this.getOffsetForAlignment = (toOffset, align) => {\n      const size = this.getSize();\n      if (align === \"auto\") {\n        if (toOffset <= this.scrollOffset) {\n          align = \"start\";\n        } else if (toOffset >= this.scrollOffset + size) {\n          align = \"end\";\n        } else {\n          align = \"start\";\n        }\n      }\n      if (align === \"start\") {\n        toOffset = toOffset;\n      } else if (align === \"end\") {\n        toOffset = toOffset - size;\n      } else if (align === \"center\") {\n        toOffset = toOffset - size / 2;\n      }\n      const scrollSizeProp = this.options.horizontal ? \"scrollWidth\" : \"scrollHeight\";\n      const scrollSize = this.scrollElement ? \"document\" in this.scrollElement ? this.scrollElement.document.documentElement[scrollSizeProp] : this.scrollElement[scrollSizeProp] : 0;\n      const maxOffset = scrollSize - this.getSize();\n      return Math.max(Math.min(maxOffset, toOffset), 0);\n    };\n    this.getOffsetForIndex = (index, align = \"auto\") => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      const measurement = notUndefined(this.getMeasurements()[index]);\n      if (align === \"auto\") {\n        if (measurement.end >= this.scrollOffset + this.getSize() - this.options.scrollPaddingEnd) {\n          align = \"end\";\n        } else if (measurement.start <= this.scrollOffset + this.options.scrollPaddingStart) {\n          align = \"start\";\n        } else {\n          return [this.scrollOffset, align];\n        }\n      }\n      const toOffset = align === \"end\" ? measurement.end + this.options.scrollPaddingEnd : measurement.start - this.options.scrollPaddingStart;\n      return [this.getOffsetForAlignment(toOffset, align), align];\n    };\n    this.isDynamicMode = () => this.measureElementCache.size > 0;\n    this.cancelScrollToIndex = () => {\n      if (this.scrollToIndexTimeoutId !== null) {\n        clearTimeout(this.scrollToIndexTimeoutId);\n        this.scrollToIndexTimeoutId = null;\n      }\n    };\n    this.scrollToOffset = (toOffset, { align = \"start\", behavior } = {}) => {\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getOffsetForAlignment(toOffset, align), {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.scrollToIndex = (index, { align: initialAlign = \"auto\", behavior } = {}) => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      const [toOffset, align] = this.getOffsetForIndex(index, initialAlign);\n      this._scrollToOffset(toOffset, { adjustments: void 0, behavior });\n      if (behavior !== \"smooth\" && this.isDynamicMode()) {\n        this.scrollToIndexTimeoutId = setTimeout(() => {\n          this.scrollToIndexTimeoutId = null;\n          const elementInDOM = this.measureElementCache.has(\n            this.options.getItemKey(index)\n          );\n          if (elementInDOM) {\n            const [toOffset2] = this.getOffsetForIndex(index, align);\n            if (!approxEqual(toOffset2, this.scrollOffset)) {\n              this.scrollToIndex(index, { align, behavior });\n            }\n          } else {\n            this.scrollToIndex(index, { align, behavior });\n          }\n        });\n      }\n    };\n    this.scrollBy = (delta, { behavior } = {}) => {\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.scrollOffset + delta, {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.getTotalSize = () => {\n      var _a;\n      const measurements = this.getMeasurements();\n      let end;\n      if (measurements.length === 0) {\n        end = this.options.paddingStart;\n      } else {\n        end = this.options.lanes === 1 ? ((_a = measurements[measurements.length - 1]) == null ? void 0 : _a.end) ?? 0 : Math.max(\n          ...measurements.slice(-this.options.lanes).map((m) => m.end)\n        );\n      }\n      return end - this.options.scrollMargin + this.options.paddingEnd;\n    };\n    this._scrollToOffset = (offset, {\n      adjustments,\n      behavior\n    }) => {\n      this.options.scrollToFn(offset, { behavior, adjustments }, this);\n    };\n    this.measure = () => {\n      this.itemSizeCache = /* @__PURE__ */ new Map();\n      this.notify(false);\n    };\n    this.setOptions(opts);\n    this.scrollRect = this.options.initialRect;\n    this.scrollOffset = this.options.initialOffset;\n    this.measurementsCache = this.options.initialMeasurementsCache;\n    this.measurementsCache.forEach((item) => {\n      this.itemSizeCache.set(item.key, item.size);\n    });\n    this.maybeNotify();\n  }\n}\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    const middle = (low + high) / 2 | 0;\n    const currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange({\n  measurements,\n  outerSize,\n  scrollOffset\n}) {\n  const count = measurements.length - 1;\n  const getOffset = (index) => measurements[index].start;\n  const startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  let endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return { startIndex, endIndex };\n}\nexport {\n  Virtualizer,\n  approxEqual,\n  defaultKeyExtractor,\n  defaultRangeExtractor,\n  elementScroll,\n  measureElement,\n  memo,\n  notUndefined,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  windowScroll\n};\n//# sourceMappingURL=index.js.map\n","import * as React from \"react\";\nimport { flushSync } from \"react-dom\";\nimport { observeElementRect, observeElementOffset, elementScroll, observeWindowRect, observeWindowOffset, windowScroll, Virtualizer } from \"@tanstack/virtual-core\";\nexport * from \"@tanstack/virtual-core\";\nconst useIsomorphicLayoutEffect = typeof document !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nfunction useVirtualizerBase(options) {\n  const rerender = React.useReducer(() => ({}), {})[1];\n  const resolvedOptions = {\n    ...options,\n    onChange: (instance2, sync) => {\n      var _a;\n      if (sync) {\n        flushSync(rerender);\n      } else {\n        rerender();\n      }\n      (_a = options.onChange) == null ? void 0 : _a.call(options, instance2, sync);\n    }\n  };\n  const [instance] = React.useState(\n    () => new Virtualizer(resolvedOptions)\n  );\n  instance.setOptions(resolvedOptions);\n  React.useEffect(() => {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate();\n  });\n  return instance;\n}\nfunction useVirtualizer(options) {\n  return useVirtualizerBase({\n    observeElementRect,\n    observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options\n  });\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase({\n    getScrollElement: () => typeof document !== \"undefined\" ? window : null,\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: typeof document !== \"undefined\" ? window.scrollY : void 0,\n    ...options\n  });\n}\nexport {\n  useVirtualizer,\n  useWindowVirtualizer\n};\n//# sourceMappingURL=index.js.map\n","import React, {useContext, useMemo} from 'react';\nimport {FileEntry} from '../file-entry';\nimport {useSettings} from '../../core/settings/use-settings';\nimport {isAbsoluteUrl} from '@common/utils/urls/is-absolute-url';\n\nexport const FileEntryUrlsContext = React.createContext<\n  Record<string, string | number | null | undefined>\n>(null!);\n\nexport function useFileEntryUrls(\n  entry?: FileEntry,\n  options?: {thumbnail?: boolean; downloadHashes?: string[]},\n): {previewUrl?: string; downloadUrl?: string} {\n  const {base_url} = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n\n  return useMemo(() => {\n    if (!entry) {\n      return {};\n    }\n\n    let previewUrl: string | undefined;\n    if (entry.url) {\n      previewUrl = isAbsoluteUrl(entry.url)\n        ? entry.url\n        : `${base_url}/${entry.url}`;\n    }\n\n    const urls = {\n      previewUrl,\n      downloadUrl: `${base_url}/api/v1/file-entries/download/${\n        options?.downloadHashes || entry.hash\n      }`,\n    };\n\n    if (urlSearchParams) {\n      // preview url\n      if (urls.previewUrl) {\n        urls.previewUrl = addParams(\n          urls.previewUrl,\n          {...urlSearchParams, thumbnail: options?.thumbnail ? 'true' : ''},\n          base_url,\n        );\n      }\n\n      // download url\n      urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n    }\n\n    return urls;\n  }, [\n    base_url,\n    entry,\n    options?.downloadHashes,\n    options?.thumbnail,\n    urlSearchParams,\n  ]);\n}\n\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value as string);\n  });\n  return url.toString();\n}\n","import React from 'react';\nimport {FileEntry} from '../file-entry';\n\nexport interface FilePreviewContextValue {\n  entries: FileEntry[];\n  activeIndex: number;\n}\n\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\n  null!\n);\n","import {ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {Button} from '../../../ui/buttons/button';\nimport {downloadFileFromUrl} from '../../utils/download-file-from-url';\nimport {FilePreviewContext} from '../file-preview-context';\nimport {Trans} from '../../../i18n/trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\n\ninterface Props extends FilePreviewProps {\n  message?: ReactNode;\n}\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n  return (\n    <div\n      className={clsx(\n        className,\n        'shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded'\n      )}\n    >\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && (\n        <div className=\"block mt-20 text-center\">\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => {\n              if (downloadUrl) {\n                downloadFileFromUrl(downloadUrl);\n              }\n            }}\n          >\n            <Trans message=\"Download\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import clsx from 'clsx';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function ImageFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <img\n      className={clsx(className, 'shadow')}\n      src={previewUrl}\n      alt={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '@common/ui/progress/progress-circle';\nimport {useFileEntryUrls} from '@common/uploads/hooks/file-entry-urls';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {Trans} from '@common/i18n/trans';\nimport {apiClient} from '@common/http/query-client';\n\nconst FIVE_MB = 5242880;\n\nexport function TextFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState<string | null>(null);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size! >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl)\n        .then(response => {\n          setContents(response.data);\n        })\n        .catch(() => {\n          setIsFailed(true);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [entry, previewUrl]);\n\n  if (isLoading) {\n    return (\n      <ProgressCircle\n        isIndeterminate\n        aria-label={trans({message: 'Loading file contents'})}\n      />\n    );\n  }\n\n  if (tooLarge) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"This file is too large to preview.\" />}\n      />\n    );\n  }\n\n  if (isFailed) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"There was an issue previewing this file\" />}\n      />\n    );\n  }\n\n  return (\n    <pre\n      className={clsx(\n        'rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full',\n        className\n      )}\n    >\n      <div className=\"container mx-auto\">{`${contents}`}</div>\n    </pre>\n  );\n}\n\nfunction getFileContents(src: string) {\n  return apiClient.get(src, {\n    responseType: 'text',\n    // required for s3 presigned url to work\n    withCredentials: false,\n    headers: {\n      Accept: 'text/plain',\n    },\n  });\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\n\nexport function VideoFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLVideoElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <video\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      playsInline\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </video>\n  );\n}\n","import {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useEffect, useRef, useState} from 'react';\n\nexport function AudioFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLAudioElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <audio\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </audio>\n  );\n}\n","import clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function PdfFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <iframe\n      title={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n      className={clsx(className, 'w-full h-full')}\n      src={`${previewUrl}#toolbar=0`}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '../../../ui/progress/progress-circle';\nimport {FileEntry} from '../../file-entry';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {apiClient} from '../../../http/query-client';\n\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const ref = useRef<HTMLIFrameElement>(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef<any>();\n  const [isLoading, setIsLoading] = useState(false);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <div className={clsx(className, 'w-full h-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe\n        ref={ref}\n        title={trans({\n          message: 'Preview for :name',\n          values: {name: entry.name},\n        })}\n        className={clsx('w-full h-full', isLoading && 'hidden')}\n      />\n    </div>\n  );\n}\n\nasync function buildPreviewUrl(\n  urlString: string,\n  entry: FileEntry\n): Promise<string> {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {data} = await apiClient.post(\n      `file-entries/${entry.id}/add-preview-token`\n    );\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n\n  return buildOfficeLivePreviewUrl(url);\n}\n\nfunction buildOfficeLivePreviewUrl(url: URL) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\n    url.toString()\n  )}`;\n}\n","import {ImageFilePreview} from './file-preview/image-file-preview';\nimport {FileEntry} from '../file-entry';\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\nimport {TextFilePreview} from './file-preview/text-file-preview';\nimport {VideoFilePreview} from './file-preview/video-file-preview';\nimport {AudioFilePreview} from './file-preview/audio-file-preview';\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\n\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview,\n} as const;\n\nexport function getPreviewForEntry(entry: FileEntry) {\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\n  const type = entry?.type as keyof typeof AvailablePreviews;\n  return (\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ChevronLeftIcon = createSvgIcon(\n  <path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />\n, 'ChevronLeftOutlined');\n","import clsx from 'clsx';\nimport {FileTypeIcon} from './file-type-icon';\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\nimport {useTrans} from '../../i18n/use-trans';\nimport {FileEntry} from '../file-entry';\n\nconst TwoMB = 2 * 1024 * 1024;\n\ninterface Props {\n  file: FileEntry;\n  className?: string;\n  iconClassName?: string;\n  showImage?: boolean;\n}\nexport function FileThumbnail({\n  file,\n  className,\n  iconClassName,\n  showImage = true,\n}: Props) {\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(file, {thumbnail: true});\n\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\n    showImage = false;\n  }\n\n  if (showImage && file.type === 'image' && previewUrl) {\n    const alt = trans({\n      message: ':fileName thumbnail',\n      values: {fileName: file.name},\n    });\n    return (\n      <img\n        className={clsx(className, 'object-cover')}\n        src={previewUrl}\n        alt={alt}\n        draggable={false}\n      />\n    );\n  }\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\n}\n","import {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\nimport clsx from 'clsx';\nimport {getPreviewForEntry} from './available-previews';\nimport {FileEntry} from '../file-entry';\nimport {FilePreviewContext} from './file-preview-context';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {ChevronLeftIcon} from '../../icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '../../icons/material/ChevronRight';\nimport {FileDownloadIcon} from '../../icons/material/FileDownload';\nimport {downloadFileFromUrl} from '../utils/download-file-from-url';\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\nimport {Trans} from '../../i18n/trans';\nimport {Button} from '../../ui/buttons/button';\nimport {CloseIcon} from '../../icons/material/Close';\nimport {FileThumbnail} from '../file-type-icon/file-thumbnail';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {KeyboardArrowLeftIcon} from '../../icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '../../icons/material/KeyboardArrowRight';\nimport {useControlledState} from '@react-stately/utils';\nimport {opacityAnimation} from '../../ui/animation/opacity-animation';\n\nexport interface FilePreviewContainerProps {\n  entries: FileEntry[];\n  activeIndex?: number;\n  defaultActiveIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  onClose?: () => void;\n  showHeader?: boolean;\n  headerActionsLeft?: ReactNode;\n  className?: string;\n  allowDownload?: boolean;\n}\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}: FilePreviewContainerProps) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex || 0,\n    props.onActiveIndexChange\n  );\n\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {entries, activeIndex};\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n\n  return (\n    <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && (\n        <Header\n          actionsLeft={headerActionsLeft}\n          isMobile={isMobile}\n          onClose={onClose}\n          onNext={canOpenNext ? openNext : undefined}\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\n          allowDownload={allowDownload}\n        />\n      )}\n      <div className={clsx('overflow-hidden relative flex-auto', className)}>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10\"\n            disabled={!canOpenPrevious}\n            onClick={openPrevious}\n          >\n            <KeyboardArrowLeftIcon />\n          </IconButton>\n        )}\n        <AnimatePresence initial={false}>\n          <m.div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            key={activeEntry.id}\n            {...opacityAnimation}\n          >\n            <Preview\n              className=\"max-h-[calc(100%-30px)]\"\n              entry={activeEntry}\n              allowDownload={allowDownload}\n            />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10\"\n            disabled={!canOpenNext}\n            onClick={openNext}\n          >\n            <KeyboardArrowRightIcon />\n          </IconButton>\n        )}\n      </div>\n    </FilePreviewContext.Provider>\n  );\n}\n\ninterface HeaderProps {\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onClose?: () => void;\n  isMobile: boolean | null;\n  actionsLeft?: ReactNode;\n  allowDownload?: boolean;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload,\n}: HeaderProps) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n\n  const desktopDownloadButton = (\n    <Button\n      startIcon={<FileDownloadIcon />}\n      variant=\"text\"\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <Trans message=\"Download\" />\n    </Button>\n  );\n\n  const mobileDownloadButton = (\n    <IconButton\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <FileDownloadIcon />\n    </IconButton>\n  );\n\n  const downloadButton = isMobile\n    ? mobileDownloadButton\n    : desktopDownloadButton;\n\n  return (\n    <div className=\"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted\">\n      <div className=\"flex items-center gap-4 w-1/3 justify-start\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main\">\n        <FileThumbnail\n          file={activeEntry}\n          iconClassName=\"w-16 h-16\"\n          showImage={false}\n        />\n        <div className=\"whitespace-nowrap overflow-hidden overflow-ellipsis\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap\">\n        {!isMobile && (\n          <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"bg-divider w-1 h-24 mx-20\" />\n          </Fragment>\n        )}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {\n  FilePreviewContainer,\n  FilePreviewContainerProps,\n} from './file-preview-container';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\n\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\nexport function FilePreviewDialog(props: Props) {\n  return (\n    <Dialog\n      size=\"fullscreenTakeover\"\n      background=\"bg-alt\"\n      className=\"flex flex-col\"\n    >\n      <Content {...props} />\n    </Dialog>\n  );\n}\n\nfunction Content(props: Props) {\n  const {close} = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n  FilterSelectControl,\n} from '../../datatable/filters/backend-filter';\nimport {message} from '../../i18n/message';\nimport {USER_MODEL} from '../../auth/user';\nimport {\n  createdAtFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\n\nexport const FILE_ENTRY_TYPE_FILTER: BackendFilter<FilterSelectControl> = {\n  key: 'type',\n  label: message('Type'),\n  description: message('Type of the file'),\n  defaultOperator: FilterOperator.eq,\n  control: {\n    type: FilterControlType.Select,\n    defaultValue: '05',\n    options: [\n      {key: '02', label: message('Text'), value: 'text'},\n      {\n        key: '03',\n        label: message('Audio'),\n        value: 'audio',\n      },\n      {\n        key: '04',\n        label: message('Video'),\n        value: 'video',\n      },\n      {\n        key: '05',\n        label: message('Image'),\n        value: 'image',\n      },\n      {key: '06', label: message('PDF'), value: 'pdf'},\n      {\n        key: '07',\n        label: message('Spreadsheet'),\n        value: 'spreadsheet',\n      },\n      {\n        key: '08',\n        label: message('Word Document'),\n        value: 'word',\n      },\n      {\n        key: '09',\n        label: message('Photoshop'),\n        value: 'photoshop',\n      },\n      {\n        key: '10',\n        label: message('Archive'),\n        value: 'archive',\n      },\n      {\n        key: '11',\n        label: message('Folder'),\n        value: 'folder',\n      },\n    ],\n  },\n};\n\nexport const FILE_ENTRY_INDEX_FILTERS: BackendFilter[] = [\n  FILE_ENTRY_TYPE_FILTER,\n  {\n    key: 'public',\n    label: message('Visibility'),\n    description: message('Whether file is publicly accessible'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.Select,\n      defaultValue: '01',\n      options: [\n        {key: '01', label: message('Private'), value: false},\n        {key: '02', label: message('Public'), value: true},\n      ],\n    },\n  },\n  createdAtFilter({\n    description: message('Date file was uploaded'),\n  }),\n  updatedAtFilter({\n    description: message('Date file was last changed'),\n  }),\n  {\n    key: 'owner_id',\n    label: message('Uploader'),\n    description: message('User that this file was uploaded by'),\n    defaultOperator: FilterOperator.eq,\n    control: {\n      type: FilterControlType.SelectModel,\n      model: USER_MODEL,\n    },\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowBackIcon = createSvgIcon(\n  <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\n, 'ArrowBackOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const UnfoldMoreIcon = createSvgIcon(\n  <path d=\"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z\" />\n, 'UnfoldMoreOutlined');\n"],"names":["DashboardLayoutContext","createContext","useBlockBodyOverflow","disable","useEffect","DashboardLayout","children","leftSidenav","onLeftSidenavChange","rightSidenav","initialRightSidenavStatus","onRightSidenavChange","name","leftSidenavCanBeCompact","height","className","gridClassName","blockBodyOverflow","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","getFromLocalStorage","leftSidenavStatus","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","rightSidenavStatus","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","shouldShowUnderlay","jsx","jsxs","clsx","AnimatePresence","Underlay","DashboardContent","isScrollable","cloneElement","DashboardSidenav","position","size","mode","overlayPosition","display","overflow","forceClosed","isMobileMode","useContext","isOverlayMode","variants","sizeClassName","getSize","m","e","target","MenuOpenIcon","createSvgIcon","DashboardNavbar","hideToggleButton","props","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","Navbar","IconButton","FilterControlType","FilterOperator","startOfDay","date","endOfDay","getUserTimezone","defaultTimezone","_a","getBootstrapData","preferredTimezone","_c","_b","getLocalTimeZone","Now","now","locale","DateRangePresets","message","startOfWeek","endOfWeek","start","startOfMonth","endOfMonth","startOfYear","endOfYear","DateRangeIcon","Input","React","ref","inputProps","wrapperProps","autoFocus","style","onClick","FocusScope","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","Field","mergeProps","focusManager","createFocusManager","getDefaultGranularity","CalendarDate","dateIsInvalid","min","max","useBaseDatePickerState","selectedDate","timezone","useUserTimezone","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","granularity","toZoned","useCurrentDateTime","useDateRangePickerState","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","completeRange","value","clear","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","range","end","maxDate","startMax","minDate","endMin","setSelectedValue","newRange","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate","ArrowRightAltIcon","adjustSegment","part","amount","options","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","onChange","useIsMobileMediaQuery","enteredKeys","useRef","localeCode","useSelectedLocale","useFocusManager","formatter","useDateFormatter","parser","NumberParser","setSegmentValue","newValue","adjustSegmentValue","backspace","parsed","today","onKeyDown","onInput","amPmFormatter","am","amDate","pm","pmDate","key","numberValue","allowsZero","shouldSetValue","spinButtonProps","LiteralDateSegment","getSegmentLimits","type","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","state","memoOptions","dateValue","segments","limits","textValue","index","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","CalendarCell","currentMonth","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","isDisabled","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","CalendarMonthHeader","WeekdayHeader","weekIndex","dayIndex","shiftCalendars","direction","count","newDates","monthFormatter","isBackwardDisabled","isForwardDisabled","dayFormatter","dateDay","weekday","Calendar","visibleMonths","Fragment","FormattedDateTimeRange","memo","preset","dates","useSettings","DateFormatPresets","castToDate","shallowEqual","parseAbsolute","DatePresetList","onPresetSelected","selectedValue","List","ListItem","Trans","useIsTabletMediaQuery","Switch","description","invalid","errorMessage","iconRight","useAutoFocus","getSizeClassName","descriptionId","useId","FormSwitch","error","useController","formProps","DateRangeComparePresets","diffInMinutes","DateRangeComparePresetList","originalRangeValue","DateRangeDialog","compareState","showInlineDatePickerField","compareVisibleDefault","isTablet","close","useDialogContext","initialStateRef","hasPlaceholder","compareVisible","setCompareVisible","footer","DialogFooter","Button","Dialog","DialogBody","Calendars","InlineDatePickerField","label","DateRangePicker","hideCalendarIcon","dialog","DialogTrigger","openOnClick","isHourSegment","FormDateRangePicker","dateRangeToAbsoluteRange","absoluteRangeToDateRange","dateRange","parseAbsoluteToLocal","absoluteRange","timestampFilter","createdAtFilter","updatedAtFilter","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","encodeBackendFilters","filterValues","filters","item","transformValue","fm","filterConfig","f","option","useBackendFilterUrlParams","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","a","b","getDecodedWithoutKeys","values","newFilters","replaceAll","add","remove","isCtrlKeyPressed","isMac","useGridNavigation","cellCount","rowCount","focusSiblingCell","focusFirstElementAfterGrid","operations","grid","currentCell","row","rowIndex","cellIndex","rowOpCount","_d","cellOpCount","_e","_f","_g","nextCell","nextFocusableElement","getFocusableTreeWalker","walker","next","last","focusWithoutScrolling","TableContext","useTableCellStyle","isHeader","columns","cellHeight","headerCellHeight","column","userPadding","justify","TableCell","rowIsHovered","id","rowContext","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","preventDefault","stopPropagation","onPress","onLongPress","addGlobalListener","removeGlobalListener","useGlobalListeners","onPointerDown","onPointerMove","onPointerUp","deltaX","deltaY","longPressTriggered","createEventHandler","isCtrlOrShiftPressed","useTableRowStyle","isSelected","isDarkMode","useIsDarkMode","hideBorder","enableSelection","collapseOnMobile","onAction","interactableElements","TableRow","renderAs","selectedRows","toggleRow","selectRow","selectRowOnContextMenu","selectionStyle","hideHeaderRow","isTouchDevice","isHovered","setIsHovered","clickedOnInteractable","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","styleClassName","RowElement","CheckboxColumnConfig","SelectAllCheckbox","Skeleton","SelectRowCheckbox","Checkbox","trans","useTrans","data","onSelectionChange","allRowsSelected","someRowsSelected","d","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","enableSorting","sortingKey","allowSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","TableHeaderRow","columnIndex","Table","userColumns","propsSelectedRows","propsDefaultSelectedRows","propsOnSelectionChange","propsSortDescriptor","propsOnSortChange","onDelete","ariaLabelledBy","renderRowAs","tableBody","meta","propsTableRef","closeOnInteractOutside","isCollapsedMode","newValues","merge","filteredColumns","c","visibleInMode","contextValue","navProps","tableBodyProps","BasicTableBody","tableRef","useInteractOutside","SelectFilterPanel","filter","FormSelect","Item","DateRangeFilterPanel","Avatar","forwardRef","circle","src","link","fallback","lazy","renderedAvatar","AvatarPlaceholderIcon","Tooltip","Link","useNormalizedModels","endpoint","queryParams","queryOptions","useQuery","fetchModels","keepPreviousData","params","apiClient","r","useNormalizedModel","fetchModel","NormalizedModelField","background","defaultValue","placeholder","searchPlaceholder","disabled","required","inputValue","setInputValue","query","SelectedModelPreview","Select","model","modelId","onEditClick","isLoading","LoadingSkeleton","opacityAnimation","EditIcon","FormNormalizedModelField","clearErrors","useFormContext","NormalizedModelFilterPanel","FilterOperatorNames","InputFilterPanel","control","operator","FormTextField","ChipList","color","radius","selectable","wrap","Children","chip","isValidElement","stringToChipValue","ChipFieldInner","fieldRef","displayWith","v","validateWith","suggestions","onInputValueChange","onItemSelected","onOpenChange","chipSize","openMenuOnFocus","showEmptyMessage","propsValue","propsOnChange","valueKey","isAsync","allowCustomValue","showDropdownArrow","onChipClick","inputFieldProps","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","loadingIndicator","ProgressCircle","dropdownArrow","KeyboardArrowDownIcon","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","removeItem","i","cr","newItems","Chip","setChips","chips","addItems","listbox","useListbox","handleItemSelection","activeIndex","setActiveIndex","isOpen","setIsOpen","refs","listboxId","collection","onInputChange","useLayoutEffect","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","Listbox","Popover","emails","selection","email","input","mixedValueToChipValue","propsDefaultValue","handleChange","ChipField","FormChipField","ChipFieldFilterPanel","o","FilterListTriggerButton","isInactive","InactiveFilterButton","ActiveFilterButton","isBoolean","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","form","useForm","formId","DialogHeader","Form","formValue","FormattedNumber","useNumberFormatter","FilterListControl","DatePickerControl","BooleanToggleControl","SelectControl","ChipFieldControl","InputControl","SelectModelControl","Control","valueLabel","MultipleValues","maxShownCount","notShownCount","names","operatorLabel","formattedValue","skeleton","modelPreview","FilterList","field","handleValueChange","payload","CloseIcon","AddIcon","FileDownloadIcon","downloadFileFromUrl","url","useDatePickerState","DatePicker","showCalendarFooter","FormDatePicker","format","parsedValue","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","activeInteraction","setActiveInteraction","domRectToObj","updateRects","targets","observer","entries","entry","width","left","top","useDraggable","preview","hidePreview","dragHandleRef","removeAllGlobalListeners","optionsRef","notifyMonitors","callback","monitor","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","file","getEntryFile","UploadedFile","getEntriesFromDirectory","reader","resolve","reject","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","element","dropResult","USER_MODEL","LinkIcon","MoreVertIcon","getDeps","fn","opts","deps","result","depTime","newDeps","dep","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","str","num","notUndefined","msg","approxEqual","defaultKeyExtractor","defaultRangeExtractor","arr","observeElementRect","instance","cb","handler","box","observeElementOffset","measureElement","elementScroll","offset","adjustments","behavior","toOffset","Virtualizer","_ro","get","opts2","sync","isScrolling","scrollElement","paddingStart","scrollMargin","getItemKey","measurements","furthestMeasurementsFound","furthestMeasurements","measurement","previousFurthestMeasurement","itemSizeCache","furthestMeasurement","measuredSize","lane","outerSize","scrollOffset","calculateRange","rangeExtractor","overscan","attributeName","indexStr","cached","prevNode","measuredItemSize","itemSize","delta","indexes","virtualItems","k","len","findNearestBinarySearch","align","scrollSizeProp","maxOffset","initialAlign","toOffset2","low","high","getCurrentValue","middle","currentValue","startIndex","endIndex","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","rerender","React.useReducer","resolvedOptions","instance2","flushSync","React.useState","useVirtualizer","FileEntryUrlsContext","useFileEntryUrls","base_url","urlSearchParams","previewUrl","isAbsoluteUrl","urls","addParams","urlString","baseUrl","FilePreviewContext","DefaultFilePreview","allowDownload","activeEntry","content","downloadUrl","ImageFilePreview","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","setIsLoading","isFailed","setIsFailed","contents","setContents","getFileContents","response","VideoFilePreview","mediaInvalid","setMediaInvalid","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","timeoutId","buildPreviewUrl","buildOfficeLivePreviewUrl","AvailablePreviews","getPreviewForEntry","mime","ChevronLeftIcon","TwoMB","FileThumbnail","iconClassName","showImage","alt","FileTypeIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","onNext","onPrevious","actionsLeft","downloadButton","ChevronRightIcon","FilePreviewDialog","Content","FILE_ENTRY_TYPE_FILTER","FILE_ENTRY_INDEX_FILTERS","ArrowBackIcon","UnfoldMoreIcon"],"mappings":"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","x_google_ignoreList":[97,98,99]}