{"version":3,"file":"swagger-api-docs-page-20ff11aa.mjs","sources":["../../../common/resources/client/swagger/swagger-api-docs-page.tsx"],"sourcesContent":["import SwaggerUI from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\nimport {Settings} from '../core/settings/settings';\nimport {useMemo} from 'react';\nimport {Navbar} from '../ui/navigation/navbar/navbar';\nimport {Footer} from '../ui/footer/footer';\nimport {useSettings} from '../core/settings/use-settings';\n\nexport default function SwaggerApiDocsPage() {\n  const settings = useSettings();\n\n  const plugins = useMemo(() => {\n    return getPluginsConfig(settings);\n  }, [settings]);\n\n  return (\n    <div className=\"h-full overflow-y-auto bg-alt\">\n      <Navbar size=\"sm\" />\n      <div className=\"container mx-auto\">\n        <SwaggerUI\n          url={`${settings.base_url}/swagger.yaml`}\n          plugins={plugins}\n          onComplete={system => {\n            //scroll to Tickets/incomingEmail\n            const hash = location.hash.slice(1);\n            if (hash) {\n              const el = document.querySelector(\n                `#operations-${hash.replace(/\\//g, '-')}`,\n              );\n              if (el) {\n                el.scrollIntoView();\n                el.querySelector('button')?.click();\n              }\n            }\n          }}\n        />\n        <Footer className=\"px-20\" />\n      </div>\n    </div>\n  );\n}\n\nfunction getPluginsConfig(settings: Settings) {\n  return [\n    {\n      statePlugins: {\n        spec: {\n          wrapActions: {\n            updateSpec: (oriAction: any) => {\n              return (spec: any) => {\n                // Replace site name\n                spec = spec.replaceAll(\n                  'SITE_NAME',\n                  settings.branding.site_name.replace(':', ''),\n                );\n                // Replace site url\n                spec = spec.replaceAll('SITE_URL', settings.base_url);\n                return oriAction(spec);\n              };\n            },\n            // Add current server url to docs\n            updateJsonSpec: (oriAction: any) => {\n              return (spec: any) => {\n                spec.servers = [{url: `${settings.base_url}/api/v1`}];\n                return oriAction(spec);\n              };\n            },\n          },\n        },\n      },\n    },\n  ];\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,SAAwB,qBAAqB;AAC3C,QAAM,WAAW;AAEX,QAAA,UAAU,QAAQ,MAAM;AAC5B,WAAO,iBAAiB,QAAQ;AAAA,EAAA,GAC/B,CAAC,QAAQ,CAAC;AAGX,SAAA,qBAAC,OAAI,EAAA,WAAU,iCACb,UAAA;AAAA,IAAC,oBAAA,QAAA,EAAO,MAAK,KAAK,CAAA;AAAA,IAClB,qBAAC,OAAI,EAAA,WAAU,qBACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,KAAK,GAAG,SAAS,QAAQ;AAAA,UACzB;AAAA,UACA,YAAY,CAAU,WAAA;;AAEpB,kBAAM,OAAO,SAAS,KAAK,MAAM,CAAC;AAClC,gBAAI,MAAM;AACR,oBAAM,KAAK,SAAS;AAAA,gBAClB,eAAe,KAAK,QAAQ,OAAO,GAAG,CAAC;AAAA,cAAA;AAEzC,kBAAI,IAAI;AACN,mBAAG,eAAe;AACf,yBAAA,cAAc,QAAQ,MAAtB,mBAAyB;AAAA,cAC9B;AAAA,YACF;AAAA,UACF;AAAA,QAAA;AAAA,MACF;AAAA,MACA,oBAAC,QAAO,EAAA,WAAU,QAAQ,CAAA;AAAA,IAAA,GAC5B;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,SAAS,iBAAiB,UAAoB;AACrC,SAAA;AAAA,IACL;AAAA,MACE,cAAc;AAAA,QACZ,MAAM;AAAA,UACJ,aAAa;AAAA,YACX,YAAY,CAAC,cAAmB;AAC9B,qBAAO,CAAC,SAAc;AAEpB,uBAAO,KAAK;AAAA,kBACV;AAAA,kBACA,SAAS,SAAS,UAAU,QAAQ,KAAK,EAAE;AAAA,gBAAA;AAG7C,uBAAO,KAAK,WAAW,YAAY,SAAS,QAAQ;AACpD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA;AAAA,YAEA,gBAAgB,CAAC,cAAmB;AAClC,qBAAO,CAAC,SAAc;AACf,qBAAA,UAAU,CAAC,EAAC,KAAK,GAAG,SAAS,QAAQ,WAAU;AACpD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EAAA;AAEJ;"}